"use strict";(self.webpackChunkproducts_app=self.webpackChunkproducts_app||[]).push([[179],{2011:(mt,Ce,k)=>{k.d(Ce,{Dh:()=>ve,GT:()=>se,cc:()=>Ie,hO:()=>He,on:()=>j,pX:()=>ie,xv:()=>ce});var f=k(4650),Y=k(9260),O=k(4976);mt=k.hmd(mt);const re=["ngOnDestroy"],ie=(Me,xe,Ue,Re={})=>new Proxy(Me,{get:(_e,we)=>Ue.runOutsideAngular(()=>{var Ge;if(Me[we])return!(null===(Ge=Re?.spy)||void 0===Ge)&&Ge.get&&Re.spy.get(we,Me[we]),Me[we];if(re.indexOf(we)>-1)return()=>{};const Ne=xe.toPromise().then(nt=>{const ne=nt&&nt[we];return"function"==typeof ne?ne.bind(nt):ne&&ne.then?ne.then(Tt=>Ue.run(()=>Tt)):Ue.run(()=>ne)});return new Proxy(()=>{},{get:(nt,ne)=>Ne[ne],apply:(nt,ne,Tt)=>Ne.then(Xe=>{var zt;const ot=Xe&&Xe(...Tt);return!(null===(zt=Re?.spy)||void 0===zt)&&zt.apply&&Re.spy.apply(we,Tt,ot),ot})})})}),se=(Me,xe)=>{xe.forEach(Ue=>{Object.getOwnPropertyNames(Ue.prototype||Ue).forEach(Re=>{Object.defineProperty(Me.prototype,Re,Object.getOwnPropertyDescriptor(Ue.prototype||Ue,Re))})})};class pe{constructor(xe){return xe}}const ve=new f.OlP("angularfire2.app.options"),ce=new f.OlP("angularfire2.app.name");function j(Me,xe,Ue){const _e="object"==typeof Ue&&Ue||{};_e.name=_e.name||"string"==typeof Ue&&Ue||"[DEFAULT]";const Ge=Y.Z.apps.filter(Ne=>Ne&&Ne.name===_e.name)[0]||xe.runOutsideAngular(()=>Y.Z.initializeApp(Me,_e));try{JSON.stringify(Me)!==JSON.stringify(Ge.options)&&B("error",`${Ge.name} Firebase App already initialized with different options${mt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(Ge)}const B=(Me,...xe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Me](...xe)},q={provide:pe,useFactory:j,deps:[ve,f.R0b,[new f.FiY,ce]]};let He=(()=>{class Me{constructor(Ue){Y.Z.registerVersion("angularfire",O.q4.full,"core"),Y.Z.registerVersion("angularfire",O.q4.full,"app-compat"),Y.Z.registerVersion("angular",f.q4F.full,Ue.toString())}static initializeApp(Ue,Re){return{ngModule:Me,providers:[{provide:ve,useValue:Ue},{provide:ce,useValue:Re}]}}}return Me.\u0275fac=function(Ue){return new(Ue||Me)(f.LFG(f.Lbi))},Me.\u0275mod=f.oAB({type:Me}),Me.\u0275inj=f.cJS({providers:[q]}),Me})();function Ie(Me,xe,Ue,Re,_e){const[,we,Ge]=globalThis.\u0275AngularfireInstanceCache.find(Ne=>Ne[0]===Me)||[];if(we)return function Ze(Me,xe){try{return Me.toString()===xe.toString()}catch{return Me===xe}}(_e,Ge)||(he("error",`${xe} was already initialized on the ${Ue} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),he("warn",{is:_e,was:Ge})),we;{const Ne=Re();return globalThis.\u0275AngularfireInstanceCache.push([Me,Ne,_e]),Ne}}const lt=!!mt.hot,he=(Me,...xe)=>{(0,f.X6Q)()&&typeof console<"u"&&console[Me](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(mt,Ce,k)=>{k.d(Ce,{q4:()=>oi,iC:()=>Bi,HU:()=>vt,vb:()=>nc,JM:()=>tc});var f=k(4650),Y=k(259),O=k(5861),re=k(6881),ie=k(2090),se=k(4859),pe=k(1877);const ve=(E,D)=>D.some(A=>E instanceof A);let ce,j;const He=new WeakMap,Ie=new WeakMap,Ze=new WeakMap,lt=new WeakMap,he=new WeakMap;let Ue={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return Ie.get(E);if("objectStoreNames"===D)return E.objectStoreNames||Ze.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ge(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function we(E){return"function"==typeof E?function _e(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function q(){return j||(j=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Ne(this),D),Ge(He.get(this))}:function(...D){return Ge(E.apply(Ne(this),D))}:function(D,...A){const P=E.call(Ne(this),D,...A);return Ze.set(P,D.sort?D.sort():[D]),Ge(P)}}(E):(E instanceof IDBTransaction&&function xe(E){if(Ie.has(E))return;const D=new Promise((A,P)=>{const $=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",te),E.removeEventListener("abort",te)},W=()=>{A(),$()},te=()=>{P(E.error||new DOMException("AbortError","AbortError")),$()};E.addEventListener("complete",W),E.addEventListener("error",te),E.addEventListener("abort",te)});Ie.set(E,D)}(E),ve(E,function B(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,Ue):E)}function Ge(E){if(E instanceof IDBRequest)return function Me(E){const D=new Promise((A,P)=>{const $=()=>{E.removeEventListener("success",W),E.removeEventListener("error",te)},W=()=>{A(Ge(E.result)),$()},te=()=>{P(E.error),$()};E.addEventListener("success",W),E.addEventListener("error",te)});return D.then(A=>{A instanceof IDBCursor&&He.set(A,E)}).catch(()=>{}),he.set(D,E),D}(E);if(lt.has(E))return lt.get(E);const D=we(E);return D!==E&&(lt.set(E,D),he.set(D,E)),D}const Ne=E=>he.get(E),Tt=["get","getKey","getAll","getAllKeys","count"],Xe=["put","add","delete","clear"],zt=new Map;function ot(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(zt.get(D))return zt.get(D);const A=D.replace(/FromIndex$/,""),P=D!==A,$=Xe.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!$&&!Tt.includes(A))return;const W=function(){var te=(0,O.Z)(function*(qe,...je){const st=this.transaction(qe,$?"readwrite":"readonly");let xt=st.store;return P&&(xt=xt.index(je.shift())),(yield Promise.all([xt[A](...je),$&&st.done]))[0]});return function(je){return te.apply(this,arguments)}}();return zt.set(D,W),W}!function Re(E){Ue=E(Ue)}(E=>({...E,get:(D,A,P)=>ot(D,A)||E.get(D,A,P),has:(D,A)=>!!ot(D,A)||E.has(D,A)}));const le="@firebase/installations",fe="0.6.4",Ee=1e4,be=`w:${fe}`,ze="FIS_v2",Be="https://firebaseinstallations.googleapis.com/v1",dt=36e5,Gt=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ct(E){return E instanceof ie.ZR&&E.code.includes("request-failed")}function nn({projectId:E}){return`${Be}/projects/${E}/installations`}function yn(E){return{token:E.token,requestStatus:2,expiresIn:Vo(E.expiresIn),creationTime:Date.now()}}function Dn(E,D){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,O.Z)(function*(E,D){const P=(yield D.json()).error;return Gt.create("request-failed",{requestName:E,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})})).apply(this,arguments)}function jr({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Ss(E){return li.apply(this,arguments)}function li(){return(li=(0,O.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function Vo(E){return Number(E.replace("s","000"))}function ft(){return(ft=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:A}){const P=nn(E),$=jr(E),W=D.getImmediate({optional:!0});if(W){const st=yield W.getHeartbeatsHeader();st&&$.append("x-firebase-client",st)}const qe={method:"POST",headers:$,body:JSON.stringify({fid:A,authVersion:ze,appId:E.appId,sdkVersion:be})},je=yield Ss(()=>fetch(P,qe));if(je.ok){const st=yield je.json();return{fid:st.fid||A,registrationStatus:2,refreshToken:st.refreshToken,authToken:yn(st.authToken)}}throw yield Dn("Create Installation",je)})).apply(this,arguments)}function Xr(E){return new Promise(D=>{setTimeout(D,E)})}const gr=/^[cdef][\w-]{21}$/,$r="";function Wi(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function Xt(E){return function Oc(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return gr.test(A)?A:$r}catch{return $r}}function rn(E){return`${E.appName}!${E.appId}`}const rt=new Map;function Nt(E,D){const A=rn(E);sr(A,D),function Hr(E,D){const A=function ti(){return!An&&"BroadcastChannel"in self&&(An=new BroadcastChannel("[Firebase] FID Change"),An.onmessage=E=>{sr(E.data.key,E.data.fid)}),An}();A&&A.postMessage({key:E,fid:D}),function pn(){0===rt.size&&An&&(An.close(),An=null)}()}(A,D)}function sr(E,D){const A=rt.get(E);if(A)for(const P of A)P(D)}let An=null;const As="firebase-installations-database",Kt=1,Zi="firebase-installations-store";let sn=null;function hi(){return sn||(sn=function nt(E,D,{blocked:A,upgrade:P,blocking:$,terminated:W}={}){const te=indexedDB.open(E,D),qe=Ge(te);return P&&te.addEventListener("upgradeneeded",je=>{P(Ge(te.result),je.oldVersion,je.newVersion,Ge(te.transaction))}),A&&te.addEventListener("blocked",()=>A()),qe.then(je=>{W&&je.addEventListener("close",()=>W()),$&&je.addEventListener("versionchange",()=>$())}).catch(()=>{}),qe}(As,Kt,{upgrade:(E,D)=>{0===D&&E.createObjectStore(Zi)}})),sn}function Nn(E,D){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,O.Z)(function*(E,D){const A=rn(E),$=(yield hi()).transaction(Zi,"readwrite"),W=$.objectStore(Zi),te=yield W.get(A);return yield W.put(D,A),yield $.done,(!te||te.fid!==D.fid)&&Nt(E,D.fid),D})).apply(this,arguments)}function Ri(E){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(E){const D=rn(E),P=(yield hi()).transaction(Zi,"readwrite");yield P.objectStore(Zi).delete(D),yield P.done})).apply(this,arguments)}function Ni(E,D){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,O.Z)(function*(E,D){const A=rn(E),$=(yield hi()).transaction(Zi,"readwrite"),W=$.objectStore(Zi),te=yield W.get(A),qe=D(te);return void 0===qe?yield W.delete(A):yield W.put(qe,A),yield $.done,qe&&(!te||te.fid!==qe.fid)&&Nt(E,qe.fid),qe})).apply(this,arguments)}function U(E){return L.apply(this,arguments)}function L(){return L=(0,O.Z)(function*(E){let D;const A=yield Ni(E.appConfig,P=>{const $=function z(E){return Cn(E||{fid:Wi(),registrationStatus:0})}(P),W=function ge(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(Gt.create("app-offline"))};const A={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},P=function Q(E,D){return Oe.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:P}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:St(E)}:{installationEntry:D}}(E,$);return D=W.registrationPromise,W.installationEntry});return A.fid===$r?{installationEntry:yield D}:{installationEntry:A,registrationPromise:D}}),L.apply(this,arguments)}function Oe(){return Oe=(0,O.Z)(function*(E,D){try{const A=yield function br(E,D){return ft.apply(this,arguments)}(E,D);return Nn(E.appConfig,A)}catch(A){throw Ct(A)&&409===A.customData.serverCode?yield Ri(E.appConfig):yield Nn(E.appConfig,{fid:D.fid,registrationStatus:0}),A}}),Oe.apply(this,arguments)}function St(E){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,O.Z)(function*(E){let D=yield Ln(E.appConfig);for(;1===D.registrationStatus;)yield Xr(100),D=yield Ln(E.appConfig);if(0===D.registrationStatus){const{installationEntry:A,registrationPromise:P}=yield U(E);return P||A}return D})).apply(this,arguments)}function Ln(E){return Ni(E,D=>{if(!D)throw Gt.create("installation-not-found");return Cn(D)})}function Cn(E){return function an(E){return 1===E.registrationStatus&&E.registrationTime+Ee<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Tr(){return(Tr=(0,O.Z)(function*({appConfig:E,heartbeatServiceProvider:D},A){const P=function Pi(E,{fid:D}){return`${nn(E)}/${D}/authTokens:generate`}(E,A),$=function Cr(E,{refreshToken:D}){const A=jr(E);return A.append("Authorization",function Zs(E){return`${ze} ${E}`}(D)),A}(E,A),W=D.getImmediate({optional:!0});if(W){const st=yield W.getHeartbeatsHeader();st&&$.append("x-firebase-client",st)}const qe={method:"POST",headers:$,body:JSON.stringify({installation:{sdkVersion:be,appId:E.appId}})},je=yield Ss(()=>fetch(P,qe));if(je.ok)return yn(yield je.json());throw yield Dn("Generate Auth Token",je)})).apply(this,arguments)}function Ki(E){return Da.apply(this,arguments)}function Da(){return Da=(0,O.Z)(function*(E,D=!1){let A;const P=yield Ni(E.appConfig,W=>{if(!Ht(W))throw Gt.create("not-registered");const te=W.authToken;if(!D&&function pt(E){return 2===E.requestStatus&&!function en(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+dt}(E)}(te))return W;if(1===te.requestStatus)return A=function ae(E,D){return X.apply(this,arguments)}(E,D),W;{if(!navigator.onLine)throw Gt.create("app-offline");const qe=function Jt(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}(W);return A=function ht(E,D){return Et.apply(this,arguments)}(E,qe),qe}});return A?yield A:P.authToken}),Da.apply(this,arguments)}function X(){return(X=(0,O.Z)(function*(E,D){let A=yield Ae(E.appConfig);for(;1===A.authToken.requestStatus;)yield Xr(100),A=yield Ae(E.appConfig);const P=A.authToken;return 0===P.requestStatus?Ki(E,D):P})).apply(this,arguments)}function Ae(E){return Ni(E,D=>{if(!Ht(D))throw Gt.create("not-registered");return function or(E){return 1===E.requestStatus&&E.requestTime+Ee<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Et(){return Et=(0,O.Z)(function*(E,D){try{const A=yield function qt(E,D){return Tr.apply(this,arguments)}(E,D),P=Object.assign(Object.assign({},D),{authToken:A});return yield Nn(E.appConfig,P),A}catch(A){if(!Ct(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const P=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Nn(E.appConfig,P)}else yield Ri(E.appConfig);throw A}}),Et.apply(this,arguments)}function Ht(E){return void 0!==E&&2===E.registrationStatus}function gu(){return(gu=(0,O.Z)(function*(E){const D=E,{installationEntry:A,registrationPromise:P}=yield U(D);return P?P.catch(console.error):Ki(D).catch(console.error),A.fid})).apply(this,arguments)}function Uo(){return Uo=(0,O.Z)(function*(E,D=!1){const A=E;return yield function fi(E){return We.apply(this,arguments)}(A),(yield Ki(A,D)).token}),Uo.apply(this,arguments)}function We(){return(We=(0,O.Z)(function*(E){const{registrationPromise:D}=yield U(E);D&&(yield D)})).apply(this,arguments)}function ss(E){return Gt.create("missing-app-config-values",{valueName:E})}const $t="installations",Ys=E=>{const D=E.getProvider("app").getImmediate(),A=function Ca(E){if(!E||!E.options)throw ss("App Configuration");if(!E.name)throw ss("App Name");const D=["projectId","apiKey","appId"];for(const A of D)if(!E.options[A])throw ss(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:A,heartbeatServiceProvider:(0,re._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},os=E=>{const D=E.getProvider("app").getImmediate(),A=(0,re._getProvider)(D,$t).getImmediate();return{getId:()=>function zn(E){return gu.apply(this,arguments)}(A),getToken:$=>function Bh(E){return Uo.apply(this,arguments)}(A,$)}};(function Qs(){(0,re._registerComponent)(new se.wA($t,Ys,"PUBLIC")),(0,re._registerComponent)(new se.wA("installations-internal",os,"PRIVATE"))})(),(0,re.registerVersion)(le,fe),(0,re.registerVersion)(le,fe,"esm2017");const Vn="@firebase/remote-config",mr=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class us{constructor(D,A,P,$){this.client=D,this.storage=A,this.storageCache=P,this.logger=$}isCachedDataFresh(D,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const P=Date.now()-A,$=P<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${P}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${$}.`),$}fetch(D){var A=this;return(0,O.Z)(function*(){const[P,$]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if($&&A.isCachedDataFresh(D.cacheMaxAgeMillis,P))return $;D.eTag=$&&$.eTag;const W=yield A.client.fetch(D),te=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===W.status&&te.push(A.storage.setLastSuccessfulFetchResponse(W)),yield Promise.all(te),W})()}}function dg(E=navigator){return E.languages&&E.languages[0]||E.language}class Lc{constructor(D,A,P,$,W,te){this.firebaseInstallations=D,this.sdkVersion=A,this.namespace=P,this.projectId=$,this.apiKey=W,this.appId=te}fetch(D){var A=this;return(0,O.Z)(function*(){const[P,$]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},je={sdk_version:A.sdkVersion,app_instance_id:P,app_instance_id_token:$,app_id:A.appId,language_code:dg()},st={method:"POST",headers:qe,body:JSON.stringify(je)},xt=fetch(te,st),Rt=new Promise((dr,ji)=>{D.signal.addEventListener(()=>{const Us=new Error("The operation was aborted.");Us.name="AbortError",ji(Us)})});let Rr;try{yield Promise.race([xt,Rt]),Rr=yield xt}catch(dr){let ji="fetch-client-network";throw"AbortError"===dr?.name&&(ji="fetch-timeout"),mr.create(ji,{originalErrorMessage:dr?.message})}let mn=Rr.status;const kt=Rr.headers.get("ETag")||void 0;let Vs,Do;if(200===Rr.status){let dr;try{dr=yield Rr.json()}catch(ji){throw mr.create("fetch-client-parse",{originalErrorMessage:ji?.message})}Vs=dr.entries,Do=dr.state}if("INSTANCE_STATE_UNSPECIFIED"===Do?mn=500:"NO_CHANGE"===Do?mn=304:("NO_TEMPLATE"===Do||"EMPTY_CONFIG"===Do)&&(Vs={}),304!==mn&&200!==mn)throw mr.create("fetch-status",{httpStatus:mn});return{status:mn,eTag:kt,config:Vs}})()}}class fg{constructor(D,A){this.client=D,this.storage=A}fetch(D){var A=this;return(0,O.Z)(function*(){const P=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(D,P)})()}attemptFetch(D,{throttleEndTimeMillis:A,backoffCount:P}){var $=this;return(0,O.Z)(function*(){yield function hg(E,D){return new Promise((A,P)=>{const $=Math.max(D-Date.now(),0),W=setTimeout(A,$);E.addEventListener(()=>{clearTimeout(W),P(mr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,A);try{const W=yield $.client.fetch(D);return yield $.storage.deleteThrottleMetadata(),W}catch(W){if(!function ld(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(W))throw W;const te={throttleEndTimeMillis:Date.now()+(0,ie.$s)(P),backoffCount:P+1};return yield $.storage.setThrottleMetadata(te),$.attemptFetch(D,te)}})()}}class ky{constructor(D,A,P,$,W){this.app=D,this._client=A,this._storageCache=P,this._storage=$,this._logger=W,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _u(E,D){const A=E.target.error||void 0;return mr.create(D,{originalErrorMessage:A&&A?.message})}const mi="app_namespace_store";class Fy{constructor(D,A,P,$=function Go(){return new Promise((E,D)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=P=>{D(_u(P,"storage-open"))},A.onsuccess=P=>{E(P.target.result)},A.onupgradeneeded=P=>{0===P.oldVersion&&P.target.result.createObjectStore(mi,{keyPath:"compositeKey"})}}catch(A){D(mr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=D,this.appName=A,this.namespace=P,this.openDbPromise=$}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var A=this;return(0,O.Z)(function*(){const P=yield A.openDbPromise;return new Promise(($,W)=>{const qe=P.transaction([mi],"readonly").objectStore(mi),je=A.createCompositeKey(D);try{const st=qe.get(je);st.onerror=xt=>{W(_u(xt,"storage-get"))},st.onsuccess=xt=>{const Rt=xt.target.result;$(Rt?Rt.value:void 0)}}catch(st){W(mr.create("storage-get",{originalErrorMessage:st?.message}))}})})()}set(D,A){var P=this;return(0,O.Z)(function*(){const $=yield P.openDbPromise;return new Promise((W,te)=>{const je=$.transaction([mi],"readwrite").objectStore(mi),st=P.createCompositeKey(D);try{const xt=je.put({compositeKey:st,value:A});xt.onerror=Rt=>{te(_u(Rt,"storage-set"))},xt.onsuccess=()=>{W()}}catch(xt){te(mr.create("storage-set",{originalErrorMessage:xt?.message}))}})})()}delete(D){var A=this;return(0,O.Z)(function*(){const P=yield A.openDbPromise;return new Promise(($,W)=>{const qe=P.transaction([mi],"readwrite").objectStore(mi),je=A.createCompositeKey(D);try{const st=qe.delete(je);st.onerror=xt=>{W(_u(xt,"storage-delete"))},st.onsuccess=()=>{$()}}catch(st){W(mr.create("storage-delete",{originalErrorMessage:st?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Hh{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const A=D.storage.getLastFetchStatus(),P=D.storage.getLastSuccessfulFetchTimestampMillis(),$=D.storage.getActiveConfig(),W=yield A;W&&(D.lastFetchStatus=W);const te=yield P;te&&(D.lastSuccessfulFetchTimestampMillis=te);const qe=yield $;qe&&(D.activeConfig=qe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function Vc(){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function cs(){(0,re._registerComponent)(new se.wA("remote-config",function E(D,{instanceIdentifier:A}){const P=D.getProvider("app").getImmediate(),$=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw mr.create("registration-window");if(!(0,ie.hl)())throw mr.create("indexed-db-unavailable");const{projectId:W,apiKey:te,appId:qe}=P.options;if(!W)throw mr.create("registration-project-id");if(!te)throw mr.create("registration-api-key");if(!qe)throw mr.create("registration-app-id");const je=new Fy(qe,P.name,A=A||"firebase"),st=new Hh(je),xt=new pe.Yd(Vn);xt.logLevel=pe.in.ERROR;const Rt=new Lc($,re.SDK_VERSION,A,W,te,qe),Rr=new fg(Rt,je),mn=new us(Rr,je,st,xt),kt=new ky(P,mn,st,je,xt);return function ri(E){const D=(0,ie.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(kt),kt},"PUBLIC").setMultipleInstances(!0)),(0,re.registerVersion)(Vn,"0.4.4"),(0,re.registerVersion)(Vn,"0.4.4","esm2017")}();const fd=(E,D)=>D.some(A=>E instanceof A);let Uc,xs;const Eu=new WeakMap,Rs=new WeakMap,zr=new WeakMap,Sr=new WeakMap,Ma=new WeakMap;let ls={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return Rs.get(E);if("objectStoreNames"===D)return E.objectStoreNames||zr.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ar(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function gd(E){return"function"==typeof E?function pd(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function wu(){return xs||(xs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Xn(this),D),Ar(Eu.get(this))}:function(...D){return Ar(E.apply(Xn(this),D))}:function(D,...A){const P=E.call(Xn(this),D,...A);return zr.set(P,D.sort?D.sort():[D]),Ar(P)}}(E):(E instanceof IDBTransaction&&function zo(E){if(Rs.has(E))return;const D=new Promise((A,P)=>{const $=()=>{E.removeEventListener("complete",W),E.removeEventListener("error",te),E.removeEventListener("abort",te)},W=()=>{A(),$()},te=()=>{P(E.error||new DOMException("AbortError","AbortError")),$()};E.addEventListener("complete",W),E.addEventListener("error",te),E.addEventListener("abort",te)});Rs.set(E,D)}(E),fd(E,function Gh(){return Uc||(Uc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,ls):E)}function Ar(E){if(E instanceof IDBRequest)return function ur(E){const D=new Promise((A,P)=>{const $=()=>{E.removeEventListener("success",W),E.removeEventListener("error",te)},W=()=>{A(Ar(E.result)),$()},te=()=>{P(E.error),$()};E.addEventListener("success",W),E.addEventListener("error",te)});return D.then(A=>{A instanceof IDBCursor&&Eu.set(A,E)}).catch(()=>{}),Ma.set(D,E),D}(E);if(Sr.has(E))return Sr.get(E);const D=gd(E);return D!==E&&(Sr.set(E,D),Ma.set(D,E)),D}const Xn=E=>Ma.get(E);function Iu(E,D,{blocked:A,upgrade:P,blocking:$,terminated:W}={}){const te=indexedDB.open(E,D),qe=Ar(te);return P&&te.addEventListener("upgradeneeded",je=>{P(Ar(te.result),je.oldVersion,je.newVersion,Ar(te.transaction))}),A&&te.addEventListener("blocked",()=>A()),qe.then(je=>{W&&je.addEventListener("close",()=>W()),$&&je.addEventListener("versionchange",()=>$())}).catch(()=>{}),qe}function ds(E,{blocked:D}={}){const A=indexedDB.deleteDatabase(E);return D&&A.addEventListener("blocked",()=>D()),Ar(A).then(()=>{})}const Bc=["get","getKey","getAll","getAllKeys","count"],Ns=["put","add","delete","clear"],qo=new Map;function xa(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(qo.get(D))return qo.get(D);const A=D.replace(/FromIndex$/,""),P=D!==A,$=Ns.includes(A);if(!(A in(P?IDBIndex:IDBObjectStore).prototype)||!$&&!Bc.includes(A))return;const W=function(){var te=(0,O.Z)(function*(qe,...je){const st=this.transaction(qe,$?"readwrite":"readonly");let xt=st.store;return P&&(xt=xt.index(je.shift())),(yield Promise.all([xt[A](...je),$&&st.done]))[0]});return function(je){return te.apply(this,arguments)}}();return qo.set(D,W),W}!function cr(E){ls=E(ls)}(E=>({...E,get:(D,A,P)=>xa(D,A)||E.get(D,A,P),has:(D,A)=>!!xa(D,A)||E.has(D,A)}));const Pt="/firebase-messaging-sw.js",Ra="/firebase-cloud-messaging-push-scope",md="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yd="https://fcmregistrations.googleapis.com/v1",Du="google.c.a.c_id",vd="google.c.a.c_l",Cu="google.c.a.ts",pg="google.c.a.e";var ue=(()=>{return(E=ue||(ue={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",ue;var E})();function Vt(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bu(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),P=atob(A),$=new Uint8Array(P.length);for(let W=0;W<P.length;++W)$[W]=P.charCodeAt(W);return $}const Tu="fcm_token_details_db",er=5,eo="fcm_token_object_Store";function qr(){return qr=(0,O.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(W=>W.name).includes(Tu))return null;let D=null;return(yield Iu(Tu,er,{upgrade:(P=(0,O.Z)(function*($,W,te,qe){var je;if(W<2||!$.objectStoreNames.contains(eo))return;const st=qe.objectStore(eo),xt=yield st.index("fcmSenderId").get(E);if(yield st.clear(),xt)if(2===W){const Rt=xt;if(!Rt.auth||!Rt.p256dh||!Rt.endpoint)return;D={token:Rt.fcmToken,createTime:null!==(je=Rt.createTime)&&void 0!==je?je:Date.now(),subscriptionOptions:{auth:Rt.auth,p256dh:Rt.p256dh,endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:"string"==typeof Rt.vapidKey?Rt.vapidKey:Vt(Rt.vapidKey)}}}else if(3===W){const Rt=xt;D={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:Vt(Rt.auth),p256dh:Vt(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:Vt(Rt.vapidKey)}}}else if(4===W){const Rt=xt;D={token:Rt.fcmToken,createTime:Rt.createTime,subscriptionOptions:{auth:Vt(Rt.auth),p256dh:Vt(Rt.p256dh),endpoint:Rt.endpoint,swScope:Rt.swScope,vapidKey:Vt(Rt.vapidKey)}}}}),function(W,te,qe,je){return P.apply(this,arguments)})})).close(),yield ds(Tu),yield ds("fcm_vapid_details_db"),yield ds("undefined"),function wd(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var P}),qr.apply(this,arguments)}const Au="firebase-messaging-database",gg=1,hs="firebase-messaging-store";let Na=null;function Wn(){return Na||(Na=Iu(Au,gg,{upgrade:(E,D)=>{0===D&&E.createObjectStore(hs)}})),Na}function yi(E){return Ji.apply(this,arguments)}function Ji(){return Ji=(0,O.Z)(function*(E){const D=Mu(E),P=yield(yield Wn()).transaction(hs).objectStore(hs).get(D);if(P)return P;{const $=yield function Su(E){return qr.apply(this,arguments)}(E.appConfig.senderId);if($)return yield to(E,$),$}}),Ji.apply(this,arguments)}function to(E,D){return vi.apply(this,arguments)}function vi(){return(vi=(0,O.Z)(function*(E,D){const A=Mu(E),$=(yield Wn()).transaction(hs,"readwrite");return yield $.objectStore(hs).put(D,A),yield $.done,D})).apply(this,arguments)}function Pa(){return(Pa=(0,O.Z)(function*(E){const D=Mu(E),P=(yield Wn()).transaction(hs,"readwrite");yield P.objectStore(hs).delete(D),yield P.done})).apply(this,arguments)}function Mu({appConfig:E}){return E.appId}const Zn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Wo(E,D){return jc.apply(this,arguments)}function jc(){return(jc=(0,O.Z)(function*(E,D){const A=yield $c(E),P=Dd(D),$={method:"POST",headers:A,body:JSON.stringify(P)};let W;try{W=yield(yield fetch(Oa(E.appConfig),$)).json()}catch(te){throw Zn.create("token-subscribe-failed",{errorInfo:te?.toString()})}if(W.error)throw Zn.create("token-subscribe-failed",{errorInfo:W.error.message});if(!W.token)throw Zn.create("token-subscribe-no-token");return W.token})).apply(this,arguments)}function Id(){return(Id=(0,O.Z)(function*(E,D){const A=yield $c(E),P=Dd(D.subscriptionOptions),$={method:"PATCH",headers:A,body:JSON.stringify(P)};let W;try{W=yield(yield fetch(`${Oa(E.appConfig)}/${D.token}`,$)).json()}catch(te){throw Zn.create("token-update-failed",{errorInfo:te?.toString()})}if(W.error)throw Zn.create("token-update-failed",{errorInfo:W.error.message});if(!W.token)throw Zn.create("token-update-no-token");return W.token})).apply(this,arguments)}function Ru(E,D){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(E,D){const P={method:"DELETE",headers:yield $c(E)};try{const W=yield(yield fetch(`${Oa(E.appConfig)}/${D}`,P)).json();if(W.error)throw Zn.create("token-unsubscribe-failed",{errorInfo:W.error.message})}catch($){throw Zn.create("token-unsubscribe-failed",{errorInfo:$?.toString()})}})).apply(this,arguments)}function Oa({projectId:E}){return`${yd}/projects/${E}/registrations`}function $c(E){return ka.apply(this,arguments)}function ka(){return(ka=(0,O.Z)(function*({appConfig:E,installations:D}){const A=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Dd({p256dh:E,auth:D,endpoint:A,vapidKey:P}){const $={web:{endpoint:A,auth:D,p256dh:E}};return P!==md&&($.web.applicationPubKey=P),$}const Pu=6048e5;function Ou(){return Ou=(0,O.Z)(function*(E){const D=yield function Wh(E,D){return Cd.apply(this,arguments)}(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:Vt(D.getKey("auth")),p256dh:Vt(D.getKey("p256dh"))},P=yield yi(E.firebaseDependencies);if(P){if(function yg(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}(P.subscriptionOptions,A))return Date.now()>=P.createTime+Pu?function bn(E,D){return ku.apply(this,arguments)}(E,{token:P.token,createTime:Date.now(),subscriptionOptions:A}):P.token;try{yield Ru(E.firebaseDependencies,P.token)}catch($){console.warn($)}return qh(E.firebaseDependencies,A)}return qh(E.firebaseDependencies,A)}),Ou.apply(this,arguments)}function fs(){return fs=(0,O.Z)(function*(E){const D=yield yi(E.firebaseDependencies);D&&(yield Ru(E.firebaseDependencies,D.token),yield function Ed(E){return Pa.apply(this,arguments)}(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),fs.apply(this,arguments)}function ku(){return ku=(0,O.Z)(function*(E,D){try{const A=yield function xu(E,D){return Id.apply(this,arguments)}(E.firebaseDependencies,D),P=Object.assign(Object.assign({},D),{token:A,createTime:Date.now()});return yield to(E.firebaseDependencies,P),A}catch(A){throw yield function yr(E){return fs.apply(this,arguments)}(E),A}}),ku.apply(this,arguments)}function qh(E,D){return no.apply(this,arguments)}function no(){return(no=(0,O.Z)(function*(E,D){const P={token:yield Wo(E,D),createTime:Date.now(),subscriptionOptions:D};return yield to(E,P),P.token})).apply(this,arguments)}function Cd(){return(Cd=(0,O.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:bu(D)})})).apply(this,arguments)}function Fu(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Hc(E,D){if(!D.notification)return;E.notification={};const A=D.notification.title;A&&(E.notification.title=A);const P=D.notification.body;P&&(E.notification.body=P);const $=D.notification.image;$&&(E.notification.image=$);const W=D.notification.icon;W&&(E.notification.icon=W)}(D,E),function Gc(E,D){D.data&&(E.data=D.data)}(D,E),function bd(E,D){var A,P,$,W,te;if(!(D.fcmOptions||null!==(A=D.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const qe=null!==($=null===(P=D.fcmOptions)||void 0===P?void 0:P.link)&&void 0!==$?$:null===(W=D.notification)||void 0===W?void 0:W.click_action;qe&&(E.fcmOptions.link=qe);const je=null===(te=D.fcmOptions)||void 0===te?void 0:te.analytics_label;je&&(E.fcmOptions.analyticsLabel=je)}(D,E),D}function Zo(E,D){const A=[];for(let P=0;P<E.length;P++)A.push(E.charAt(P)),P<D.length&&A.push(D.charAt(P));return A.join("")}function ps(E){return Zn.create("missing-app-config-values",{valueName:E})}Zo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Zo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class vg{constructor(D,A,P){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $=function Ko(E){if(!E||!E.options)throw ps("App Configuration Object");if(!E.name)throw ps("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const P of D)if(!A[P])throw ps(P);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:$,installations:A,analyticsProvider:P}}_delete(){return Promise.resolve()}}function Zh(E){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,O.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Pt,{scope:Ra}),E.swRegistration.update().catch(()=>{})}catch(D){throw Zn.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function Fa(){return(Fa=(0,O.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield Zh(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Zn.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=md)})).apply(this,arguments)}function Yo(){return Yo=(0,O.Z)(function*(E,D){if(!navigator)throw Zn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Zn.create("permission-blocked");return yield function ro(E,D){return io.apply(this,arguments)}(E,D?.vapidKey),yield function Ly(E,D){return Fa.apply(this,arguments)}(E,D?.serviceWorkerRegistration),function zh(E){return Ou.apply(this,arguments)}(E)}),Yo.apply(this,arguments)}function so(){return(so=(0,O.Z)(function*(E,D,A){const P=function oo(E){switch(E){case ue.NOTIFICATION_CLICKED:return"notification_open";case ue.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(P,{message_id:A[Du],message_name:A[vd],message_time:A[Cu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ao(){return ao=(0,O.Z)(function*(E,D){const A=D.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===ue.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Fu(A)):E.onMessageHandler.next(Fu(A)));const P=A.data;(function zc(E){return"object"==typeof E&&!!E&&Du in E})(P)&&"1"===P[pg]&&(yield function qc(E,D,A){return so.apply(this,arguments)}(E,A.messageType,P))}),ao.apply(this,arguments)}const Ps="@firebase/messaging",uo=E=>{const D=new vg(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function Uu(E,D){return ao.apply(this,arguments)}(D,A)),D},Bu=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:P=>function Vu(E,D){return Yo.apply(this,arguments)}(D,P)}};function Kh(){return ju.apply(this,arguments)}function ju(){return(ju=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function La(){(0,re._registerComponent)(new se.wA("messaging",uo,"PUBLIC")),(0,re._registerComponent)(new se.wA("messaging-internal",Bu,"PRIVATE")),(0,re.registerVersion)(Ps,"0.12.4"),(0,re.registerVersion)(Ps,"0.12.4","esm2017")}();const gn="analytics",Md="firebase_id",$u="origin",Zc=6e4,Hu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gu="https://www.googletagmanager.com/gtag/js",tr=new pe.Yd("@firebase/analytics"),Un=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Kc(E){if(!E.startsWith(Gu)){const D=Un.create("invalid-gtag-resource",{gtagURL:E});return tr.warn(D.message),""}return E}function Va(E){return Promise.all(E.map(D=>D.catch(A=>A)))}function ho(){return(ho=(0,O.Z)(function*(E,D,A,P,$,W){const te=P[$];try{if(te)yield D[te];else{const je=(yield Va(A)).find(st=>st.measurementId===$);je&&(yield D[je.appId])}}catch(qe){tr.error(qe)}E("config",$,W)})).apply(this,arguments)}function Ba(){return(Ba=(0,O.Z)(function*(E,D,A,P,$){try{let W=[];if($&&$.send_to){let te=$.send_to;Array.isArray(te)||(te=[te]);const qe=yield Va(A);for(const je of te){const st=qe.find(Rt=>Rt.measurementId===je),xt=st&&D[st.appId];if(!xt){W=[];break}W.push(xt)}}0===W.length&&(W=Object.values(D)),yield Promise.all(W),E("event",P,$||{})}catch(W){tr.error(W)}})).apply(this,arguments)}const ja=30,po=new class fo{constructor(D={},A=1e3){this.throttleMetadata=D,this.intervalMillis=A}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,A){this.throttleMetadata[D]=A}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Jh(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function Yt(){return(Yt=(0,O.Z)(function*(E){var D;const{appId:A,apiKey:P}=E,$={method:"GET",headers:Jh(P)},W=Hu.replace("{app-id}",A),te=yield fetch(W,$);if(200!==te.status&&304!==te.status){let qe="";try{const je=yield te.json();null!==(D=je.error)&&void 0!==D&&D.message&&(qe=je.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:te.status,responseMessage:qe})}return te.json()})).apply(this,arguments)}function $a(){return($a=(0,O.Z)(function*(E,D=po,A){const{appId:P,apiKey:$,measurementId:W}=E.options;if(!P)throw Un.create("no-app-id");if(!$){if(W)return{measurementId:W,appId:P};throw Un.create("no-api-key")}const te=D.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Uy;return setTimeout((0,O.Z)(function*(){qe.abort()}),void 0!==A?A:Zc),Qc({appId:P,apiKey:$,measurementId:W},te,qe,D)})).apply(this,arguments)}function Qc(E,D,A){return Jc.apply(this,arguments)}function Jc(){return Jc=(0,O.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:A},P,$=po){var W;const{appId:te,measurementId:qe}=E;try{yield function Vy(E,D){return new Promise((A,P)=>{const $=Math.max(D-Date.now(),0),W=setTimeout(A,$);E.addEventListener(()=>{clearTimeout(W),P(Un.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(P,D)}catch(je){if(qe)return tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${je?.message}]`),{appId:te,measurementId:qe};throw je}try{const je=yield function xd(E){return Yt.apply(this,arguments)}(E);return $.deleteThrottleMetadata(te),je}catch(je){const st=je;if(!function Xh(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(st)){if($.deleteThrottleMetadata(te),qe)return tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${st?.message}]`),{appId:te,measurementId:qe};throw je}const xt=503===Number(null===(W=st?.customData)||void 0===W?void 0:W.httpStatus)?(0,ie.$s)(A,$.intervalMillis,ja):(0,ie.$s)(A,$.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+xt,backoffCount:A+1};return $.setThrottleMetadata(te,Rt),tr.debug(`Calling attemptFetch again in ${xt} millis`),Qc(E,Rt,P,$)}}),Jc.apply(this,arguments)}class Uy{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let go,nf;function ef(){return(ef=(0,O.Z)(function*(E,D,A,P,$){if($&&$.global)E("event",A,P);else{const W=yield D;E("event",A,Object.assign(Object.assign({},P),{send_to:W}))}})).apply(this,arguments)}function un(){return(un=(0,O.Z)(function*(){if(!(0,ie.hl)())return tr.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(E){return tr.warn(Un.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function ut(){return ut=(0,O.Z)(function*(E,D,A,P,$,W,te){var qe;const je=function _g(E){return $a.apply(this,arguments)}(E);je.then(mn=>{A[mn.measurementId]=mn.appId,E.options.measurementId&&mn.measurementId!==E.options.measurementId&&tr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mn=>tr.error(mn)),D.push(je);const st=function Wr(){return un.apply(this,arguments)}().then(mn=>{if(mn)return P.getId()}),[xt,Rt]=yield Promise.all([je,st]);(function ea(E){const D=window.document.getElementsByTagName("script");for(const A of Object.values(D))if(A.src&&A.src.includes(Gu)&&A.src.includes(E))return A;return null})(W)||function ms(E,D){const A=function Ua(E,D){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,D)),A}("firebase-js-sdk-policy",{createScriptURL:Kc}),P=document.createElement("script"),$=`${Gu}?l=${E}&id=${D}`;P.src=A?A?.createScriptURL($):$,P.async=!0,document.head.appendChild(P)}(W,xt.measurementId),nf&&($("consent","default",nf),function el(E){nf=E}(void 0)),$("js",new Date);const Rr=null!==(qe=te?.config)&&void 0!==qe?qe:{};return Rr[$u]="firebase",Rr.update=!0,null!=Rt&&(Rr[Md]=Rt),$("config",xt.measurementId,Rr),go&&($("set",go),function Ku(E){go=E}(void 0)),xt.measurementId}),ut.apply(this,arguments)}class Mr{constructor(D){this.app=D}_delete(){return delete Tn[this.app.options.appId],Promise.resolve()}}let Tn={},Rd=[];const Ga={};let tl,wi,_i="dataLayer",Yu="gtag",ta=!1;function ks(E,D,A){!function qa(){const E=[];if((0,ie.ru)()&&E.push("This is a browser extension environment."),(0,ie.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((P,$)=>`(${$+1}) ${P}`).join(" "),A=Un.create("invalid-analytics-context",{errorInfo:D});tr.warn(A.message)}}();const P=E.options.appId;if(!P)throw Un.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw Un.create("no-api-key");tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Tn[P])throw Un.create("already-exists",{id:P});if(!ta){!function Yh(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(_i);const{wrappedGtag:W,gtagCore:te}=function Os(E,D,A,P,$){let W=function(...te){window[P].push(arguments)};return window[$]&&"function"==typeof window[$]&&(W=window[$]),window[$]=function Xo(E,D,A,P){function W(){return W=(0,O.Z)(function*(te,...qe){try{if("event"===te){const[je,st]=qe;yield function Yc(E,D,A,P,$){return Ba.apply(this,arguments)}(E,D,A,je,st)}else if("config"===te){const[je,st]=qe;yield function zu(E,D,A,P,$,W){return ho.apply(this,arguments)}(E,D,A,P,je,st)}else if("consent"===te){const[je]=qe;E("consent","update",je)}else if("get"===te){const[je,st,xt]=qe;E("get",je,st,xt)}else if("set"===te){const[je]=qe;E("set",je)}else E(te,...qe)}catch(je){tr.error(je)}}),W.apply(this,arguments)}return function $(te){return W.apply(this,arguments)}}(W,E,D,A),{gtagCore:W,wrappedGtag:window[$]}}(Tn,Rd,Ga,_i,Yu);wi=W,tl=te,ta=!0}return Tn[P]=function si(E,D,A,P,$,W,te){return ut.apply(this,arguments)}(E,Rd,Ga,D,tl,_i,A),new Mr(E)}function Qu(){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const na="@firebase/analytics";!function rf(){(0,re._registerComponent)(new se.wA(gn,(D,{options:A})=>ks(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,re._registerComponent)(new se.wA("analytics-internal",function E(D){try{const A=D.getProvider(gn).getImmediate();return{logEvent:(P,$,W)=>function Nd(E,D,A,P){E=(0,ie.m9)(E),function By(E,D,A,P,$){return ef.apply(this,arguments)}(wi,Tn[E.app.options.appId],D,A,P).catch($=>tr.error($))}(A,P,$,W)}}catch(A){throw Un.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,re.registerVersion)(na,"0.10.0"),(0,re.registerVersion)(na,"0.10.0","esm2017")}();var Wa=k(4408),Li=k(7565);const xr=new class Ka extends Li.v{}(class Za extends Wa.o{constructor(D,A){super(D,A),this.scheduler=D,this.work=A}schedule(D,A=0){return A>0?super.schedule(D,A):(this.delay=A,this.state=D,this.scheduler.flush(this),this)}execute(D,A){return A>0||this.closed?super.execute(D,A):this._execute(D,A)}requestAsyncId(D,A,P=0){return null!=P&&P>0||null==P&&this.delay>0?super.requestAsyncId(D,A,P):(D.flush(this),0)}});var ol=k(4986),Kn=k(8505),_o=k(9468),wo=k(5363);const oi=new f.GfV("7.5.0"),Bn="__angularfire_symbol__analyticsIsSupportedValue",Eo="__angularfire_symbol__analyticsIsSupported",al="__angularfire_symbol__remoteConfigIsSupportedValue",ra="__angularfire_symbol__remoteConfigIsSupported",Vi="__angularfire_symbol__messagingIsSupportedValue",ys="__angularfire_symbol__messagingIsSupported";function tc(E,D,A){if(D){if(1===D.length)return D[0];const W=D.filter(te=>te.app===A);if(1===W.length)return W[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[Eo]||(globalThis[Eo]=Qu().then(E=>globalThis[Bn]=E).catch(()=>globalThis[Bn]=!1)),globalThis[ys]||(globalThis[ys]=Kh().then(E=>globalThis[Vi]=E).catch(()=>globalThis[Vi]=!1)),globalThis[ra]||(globalThis[ra]=Vc().then(E=>globalThis[al]=E).catch(()=>globalThis[al]=!1));const nc=(E,D)=>{const A=D?[D]:(0,Y.C6)(),P=[];return A.forEach($=>{$.container.getProvider(E).instances.forEach(te=>{P.includes(te)||P.push(te)})}),P};function vs(){}class ul{constructor(D,A=xr){this.zone=D,this.delegate=A}now(){return this.delegate.now()}schedule(D,A,P){const $=this.zone;return this.delegate.schedule(function(te){$.runGuarded(()=>{D.apply(this,[te])})},A,P)}}class rc{constructor(D){this.zone=D,this.task=null}call(D,A){const P=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",vs,{},vs,vs)),A.pipe((0,Kn.b)({next:P,complete:P,error:P})).subscribe(D).add(P)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vt=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new ul(Zone.current)),this.insideAngular=A.run(()=>new ul(Zone.current,ol.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(f.LFG(f.R0b))},E.\u0275prov=f.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Ui(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Bi(E){return Ui(),function kd(E){return function(A){return(A=A.lift(new rc(E.ngZone))).pipe((0,_o.R)(E.outsideAngular),(0,wo.Q)(E.insideAngular))}}(Ui())(E)}},2090:(mt,Ce,k)=>{k.d(Ce,{$s:()=>Ri,BH:()=>we,G6:()=>be,L:()=>ce,LL:()=>Ye,Pz:()=>_e,Sg:()=>Ge,UG:()=>ne,US:()=>se,ZB:()=>q,ZR:()=>Ot,aH:()=>Re,b$:()=>zt,eu:()=>Be,hl:()=>ze,jU:()=>Tt,m9:()=>Gr,ne:()=>rn,pd:()=>Wi,r3:()=>li,ru:()=>Xe,tV:()=>j,uI:()=>nt,vZ:()=>ft,w1:()=>le,xO:()=>gr,xb:()=>Zs,z$:()=>Ne,zI:()=>dt,zd:()=>$r});const re=function(U){const L=[];let z=0;for(let ge=0;ge<U.length;ge++){let Q=U.charCodeAt(ge);Q<128?L[z++]=Q:Q<2048?(L[z++]=Q>>6|192,L[z++]=63&Q|128):55296==(64512&Q)&&ge+1<U.length&&56320==(64512&U.charCodeAt(ge+1))?(Q=65536+((1023&Q)<<10)+(1023&U.charCodeAt(++ge)),L[z++]=Q>>18|240,L[z++]=Q>>12&63|128,L[z++]=Q>>6&63|128,L[z++]=63&Q|128):(L[z++]=Q>>12|224,L[z++]=Q>>6&63|128,L[z++]=63&Q|128)}return L},se={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,ge=[];for(let Q=0;Q<U.length;Q+=3){const Oe=U[Q],St=Q+1<U.length,Qt=St?U[Q+1]:0,Ln=Q+2<U.length,Cn=Ln?U[Q+2]:0;let Tr=(15&Qt)<<2|Cn>>6,Pi=63&Cn;Ln||(Pi=64,St||(Tr=64)),ge.push(z[Oe>>2],z[(3&Oe)<<4|Qt>>4],z[Tr],z[Pi])}return ge.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(re(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let z=0,ge=0;for(;z<U.length;){const Q=U[z++];if(Q<128)L[ge++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Oe=U[z++];L[ge++]=String.fromCharCode((31&Q)<<6|63&Oe)}else if(Q>239&&Q<365){const Ln=((7&Q)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;L[ge++]=String.fromCharCode(55296+(Ln>>10)),L[ge++]=String.fromCharCode(56320+(1023&Ln))}else{const Oe=U[z++],St=U[z++];L[ge++]=String.fromCharCode((15&Q)<<12|(63&Oe)<<6|63&St)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,ge=[];for(let Q=0;Q<U.length;){const Oe=z[U.charAt(Q++)],Qt=Q<U.length?z[U.charAt(Q)]:0;++Q;const Cn=Q<U.length?z[U.charAt(Q)]:64;++Q;const qt=Q<U.length?z[U.charAt(Q)]:64;if(++Q,null==Oe||null==Qt||null==Cn||null==qt)throw new pe;ge.push(Oe<<2|Qt>>4),64!==Cn&&(ge.push(Qt<<4&240|Cn>>2),64!==qt&&ge.push(Cn<<6&192|qt))}return ge},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ce=function(U){return function(U){const L=re(U);return se.encodeByteArray(L,!0)}(U).replace(/\./g,"")},j=function(U){try{return se.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function q(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!He(z)||(U[z]=q(U[z],L[z]));return U}function He(U){return"__proto__"!==U}const Me=()=>{try{return function Ie(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&j(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},Re=()=>{var U;return null===(U=Me())||void 0===U?void 0:U.config},_e=U=>{var L;return null===(L=Me())||void 0===L?void 0:L[`_${U}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,ge)=>{z?this.reject(z):this.resolve(ge),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,ge))}}}function Ge(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ge=L||"demo-project",Q=U.iat||0,Oe=U.sub||U.user_id;if(!Oe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const St=Object.assign({iss:`https://securetoken.google.com/${ge}`,aud:ge,iat:Q,exp:Q+3600,auth_time:Q,sub:Oe,user_id:Oe,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(St)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function nt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function ne(){var U;const L=null===(U=Me())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Tt(){return"object"==typeof self&&self.self===self}function Xe(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function le(){const U=Ne();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function be(){return!ne()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ze(){try{return"object"==typeof indexedDB}catch{return!1}}function Be(){return new Promise((U,L)=>{try{let z=!0;const ge="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(ge);Q.onsuccess=()=>{Q.result.close(),z||self.indexedDB.deleteDatabase(ge),U(!0)},Q.onupgradeneeded=()=>{z=!1},Q.onerror=()=>{var Oe;L((null===(Oe=Q.error)||void 0===Oe?void 0:Oe.message)||"")}}catch(z){L(z)}})}function dt(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ot extends Error{constructor(L,z,ge){super(z),this.code=L,this.customData=ge,this.name="FirebaseError",Object.setPrototypeOf(this,Ot.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ye.prototype.create)}}class Ye{constructor(L,z,ge){this.service=L,this.serviceName=z,this.errors=ge}create(L,...z){const ge=z[0]||{},Q=`${this.service}/${L}`,Oe=this.errors[L],St=Oe?function Gt(U,L){return U.replace(Ct,(z,ge)=>{const Q=L[ge];return null!=Q?String(Q):`<${ge}?>`})}(Oe,ge):"Error";return new Ot(Q,`${this.serviceName}: ${St} (${Q}).`,ge)}}const Ct=/\{\$([^}]+)}/g;function li(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Zs(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function ft(U,L){if(U===L)return!0;const z=Object.keys(U),ge=Object.keys(L);for(const Q of z){if(!ge.includes(Q))return!1;const Oe=U[Q],St=L[Q];if(Xr(Oe)&&Xr(St)){if(!ft(Oe,St))return!1}else if(Oe!==St)return!1}for(const Q of ge)if(!z.includes(Q))return!1;return!0}function Xr(U){return null!==U&&"object"==typeof U}function gr(U){const L=[];for(const[z,ge]of Object.entries(U))Array.isArray(ge)?ge.forEach(Q=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(Q))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(ge));return L.length?"&"+L.join("&"):""}function $r(U){const L={};return U.replace(/^\?/,"").split("&").forEach(ge=>{if(ge){const[Q,Oe]=ge.split("=");L[decodeURIComponent(Q)]=decodeURIComponent(Oe)}}),L}function Wi(U){const L=U.indexOf("?");if(!L)return"";const z=U.indexOf("#",L);return U.substring(L,z>0?z:void 0)}function rn(U,L){const z=new rt(U,L);return z.subscribe.bind(z)}class rt{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(ge=>{this.error(ge)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,ge){let Q;if(void 0===L&&void 0===z&&void 0===ge)throw new Error("Missing Observer.");Q=function di(U,L){if("object"!=typeof U||null===U)return!1;for(const z of L)if(z in U&&"function"==typeof U[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:ge},void 0===Q.next&&(Q.next=ei),void 0===Q.error&&(Q.error=ei),void 0===Q.complete&&(Q.complete=ei);const Oe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Oe}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(ge){typeof console<"u"&&console.error&&console.error(ge)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ei(){}const sn=1e3,hi=2,Nn=144e5,Gn=.5;function Ri(U,L=sn,z=hi){const ge=L*Math.pow(z,U),Q=Math.round(Gn*ge*(Math.random()-.5)*2);return Math.min(Nn,ge+Q)}function Gr(U){return U&&U._delegate?U._delegate:U}},7780:(mt,Ce,k)=>{var f=k(4650);let Y=null;function O(){return Y}class ie{}const se=new f.OlP("DocumentToken");let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(){return(0,f.LFG)(j)}()},providedIn:"platform"}),n})();const ce=new f.OlP("Location Initialized");let j=(()=>{class n extends pe{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){B()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){B()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function q(){return new j((0,f.LFG)(se))}()},providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function He(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ie(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ze(n){return n&&"?"!==n[0]?"?"+n:n}let lt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(Me)},providedIn:"root"}),n})();const he=new f.OlP("appBaseHref");let Me=(()=>{class n extends lt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return He(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ze(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+Ze(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+Ze(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pe),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),xe=(()=>{class n extends lt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=He(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+Ze(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+Ze(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pe),f.LFG(he,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ge(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ie(we(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ze(r))}normalize(t){return n.stripTrailingSlash(function _e(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,we(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Ze,n.joinWithSlash=He,n.stripTrailingSlash=Ie,n.\u0275fac=function(t){return new(t||n)(f.LFG(lt))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Re(){return new Ue((0,f.LFG)(lt))}()},providedIn:"root"}),n})();function we(n){return n.replace(/\/index.html$/,"")}class qn{constructor(e,t,r,s){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=s}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ks=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,u,l)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new qn(s.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Pn(m,s)}});for(let s=0,u=r.length;s<u;s++){const m=r.get(s).context;m.index=s,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Pn(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Pn(n,e){n.context.$implicit=e.item}let ss=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new $t,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ba("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ba("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class $t{constructor(){this.$implicit=null,this.ngIf=null}}function ba(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let mi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const hd="server";function cs(n){return n===hd}let Aa=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new fd((0,f.LFG)(se),window)}),n})();class fd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function xs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Uc(this.window.history)||Uc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Uc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class bd extends ie{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class zc extends bd{static makeCurrent(){!function re(n){Y||(Y=n)}(new zc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ko(){return Zo=Zo||document.querySelector("base"),Zo?Zo.getAttribute("href"):null}();return null==t?null:function vg(n){ps=ps||document.createElement("a"),ps.setAttribute("href",n);const e=ps.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Zo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Uo(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ps,Zo=null;const Zh=new f.OlP("TRANSITION_ID"),Ly=[{provide:f.ip1,useFactory:function Lu(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=O(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Zh,se,f.zs3],multi:!0}];let ro=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const io=new f.OlP("EventManagerPlugins");let Vu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(io),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Yo{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=O().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let qc=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const s=this.usageCount;let u=s.get(t)??0;return u+=r,u>0?s.set(t,u):s.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),so=(()=>{class n extends qc{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const s=this.doc.createElement("style");s.textContent=r,t.appendChild(s);const u=this.styleRef.get(r);u?u.push(s):this.styleRef.set(r,[s])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const oo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Uu=/%COMP%/g,La=new f.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Sd(n,e){return e.flat(100).map(t=>t.replace(Uu,n))}function co(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ki=(()=>{class n{constructor(t,r,s,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new gs(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const s=this.getOrCreateRenderer(t,r);return s instanceof Md?s.applyToHost(t):s instanceof gn&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case f.ifc.Emulated:u=new Md(l,m,r,this.appId,w);break;case f.ifc.ShadowDom:return new Ad(l,m,t,r);default:u=new gn(l,m,r,w)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Vu),f.LFG(so),f.LFG(f.AFp),f.LFG(La))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class gs{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(oo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Jo(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Jo(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=oo[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=oo[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,s&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,co(r)):this.eventManager.addEventListener(e,t,co(r))}}function Jo(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Ad extends gs{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Sd(s.id,s.styles);for(const l of u){const m=document.createElement("style");m.textContent=l,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class gn extends gs{constructor(e,t,r,s,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=Sd(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Md extends gn{constructor(e,t,r,s,u){const l=s+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function Kh(n){return"_ngcontent-%COMP%".replace(Uu,n)}(l),this.hostAttr=function ju(n){return"_nghost-%COMP%".replace(Uu,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let $u=(()=>{class n extends Yo{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Zc=["alt","control","meta","shift"],Hu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Gu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let tr=(()=>{class n extends Yo{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Zc.forEach(b=>{const S=r.indexOf(b);S>-1&&(r.splice(S,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=Hu[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Zc.forEach(l=>{l!==s&&(0,Gu[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Yc=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function ms(){zc.makeCurrent()},multi:!0},{provide:se,useFactory:function zu(){return(0,f.RDi)(document),document},deps:[]}]),Ba=new f.OlP(""),Xo=[{provide:f.rWj,useClass:class Fa{addToWindow(e){f.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const s=f.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Os=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Yh(){return new f.qLn},deps:[]},{provide:io,useClass:$u,multi:!0,deps:[se,f.R0b,f.Lbi]},{provide:io,useClass:tr,multi:!0,deps:[se]},{provide:ki,useClass:ki,deps:[Vu,so,f.AFp,La]},{provide:f.FYo,useExisting:ki},{provide:qc,useExisting:so},{provide:so,useClass:so,deps:[se]},{provide:Vu,useClass:Vu,deps:[io,f.R0b]},{provide:class wu{},useClass:ro,deps:[]},[]];let ea=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:Zh,useExisting:f.AFp},Ly]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ba,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Os,...Xo],imports:[mi,f.hGG]}),n})(),Jh=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function po(){return new Jh((0,f.LFG)(se))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var un=k(8996),si=k(7669);function ut(...n){const e=(0,si.yG)(n);return(0,un.D)(n,e)}var Mr=k(7579);class Tn extends Mr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ga=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var _i=k(9751);const{isArray:Yu}=Array,{getPrototypeOf:tl,prototype:wi,keys:ta}=Object;function za(n){if(1===n.length){const e=n[0];if(Yu(e))return{args:e,keys:null};if(function qa(n){return n&&"object"==typeof n&&tl(n)===wi}(e)){const t=ta(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var ks=k(4671),_t=k(4004);const{isArray:nl}=Array;function Fs(n){return(0,_t.U)(e=>function Qu(n,e){return nl(e)?n(...e):n(e)}(n,e))}function Ls(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var vr=k(5403),rl=k(9672);function il(...n){const e=(0,si.yG)(n),t=(0,si.jO)(n),{args:r,keys:s}=za(n);if(0===r.length)return(0,un.D)([],e);const u=new _i.y(function yo(n,e,t=ks.y){return r=>{vo(e,()=>{const{length:s}=n,u=new Array(s);let l=s,m=s;for(let w=0;w<s;w++)vo(e,()=>{const b=(0,un.D)(n[w],e);let S=!1;b.subscribe((0,vr.x)(r,N=>{u[w]=N,S||(S=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>Ls(s,l):ks.y));return t?u.pipe(Fs(t)):u}function vo(n,e,t){n?(0,rl.f)(t,n,e):e()}var Ju=k(8189);function Xu(...n){return function Nd(){return(0,Ju.J)(1)}()((0,un.D)(n,(0,si.yG)(n)))}var na=k(8421);function Pd(n){return new _i.y(e=>{(0,na.Xf)(n()).subscribe(e)})}var rf=k(9635),Wa=k(576);function Za(n,e){const t=(0,Wa.m)(n)?n:()=>n,r=s=>s.error(t());return new _i.y(e?s=>e.schedule(r,0,s):r)}var Li=k(515),Ka=k(727),xr=k(4482);function sl(){return(0,xr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,vr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ol extends _i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,xr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ka.w0;const t=this.getSubject();e.add(this.source.subscribe((0,vr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ka.w0.EMPTY)}return e}refCount(){return sl()(this)}}function Kn(n,e){return(0,xr.e)((t,r)=>{let s=null,u=0,l=!1;const m=()=>l&&!s&&r.complete();t.subscribe((0,vr.x)(r,w=>{s?.unsubscribe();let b=0;const S=u++;(0,na.Xf)(n(w,S)).subscribe(s=(0,vr.x)(r,N=>r.next(e?e(w,N,S,b++):N),()=>{s=null,m()}))},()=>{l=!0,m()}))})}function _o(n){return n<=0?()=>Li.E:(0,xr.e)((e,t)=>{let r=0;e.subscribe((0,vr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function wo(...n){const e=(0,si.yG)(n);return(0,xr.e)((t,r)=>{(e?Xu(n,t,e):Xu(n,t)).subscribe(r)})}function oi(n,e){return(0,xr.e)((t,r)=>{let s=0;t.subscribe((0,vr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var Bn=k(5577);function Eo(n){return(0,xr.e)((e,t)=>{let r=!1;e.subscribe((0,vr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function al(n=ra){return(0,xr.e)((e,t)=>{let r=!1;e.subscribe((0,vr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function ra(){return new Ga}function Vi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?oi((s,u)=>n(s,u,r)):ks.y,_o(1),t?Eo(e):al(()=>new Ga))}function ys(n,e){return(0,Wa.m)(e)?(0,Bn.z)(n,e,1):(0,Bn.z)(n,1)}var lr=k(8505);function Io(n){return(0,xr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,vr.x)(t,void 0,void 0,l=>{u=(0,na.Xf)(n(l,Io(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function ec(n,e){return(0,xr.e)(function sf(n,e,t,r,s){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,vr.x)(l,S=>{const N=b++;w=m?n(w,S,N):(m=!0,S),r&&l.next(w)},s&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function tc(n){return n<=0?()=>Li.E:(0,xr.e)((e,t)=>{let r=[];e.subscribe((0,vr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function nc(n,e){const t=arguments.length>=2;return r=>r.pipe(n?oi((s,u)=>n(s,u,r)):ks.y,tc(1),t?Eo(e):al(()=>new Ga))}function rc(n){return(0,xr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const vt="primary",Ui=Symbol("RouteTitle");class ic{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ei(n){return new ic(n)}function af(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))s[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Bi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!kd(n[s],e[s]))return!1;return!0}function kd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function Fd(n){return Array.prototype.concat.apply([],n)}function Ld(n){return n.length>0?n[n.length-1]:null}function D(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function A(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,un.D)(Promise.resolve(n)):ut(n)}const P=!1,$={exact:function je(n,e,t){if(!dr(n.segments,e.segments)||!Rr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!je(n.children[r],e.children[r],t))return!1;return!0},subset:xt},W={exact:function qe(n,e){return Bi(n,e)},subset:function st(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kd(n[t],e[t]))},ignored:()=>!0};function te(n,e,t){return $[t.paths](n.root,e.root,t.matrixParams)&&W[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function xt(n,e,t){return Rt(n,e,e.segments,t)}function Rt(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!dr(s,t)||e.hasChildren()||!Rr(s,t,r))}if(n.segments.length===t.length){if(!dr(n.segments,t)||!Rr(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!xt(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(dr(n.segments,s)&&Rr(n.segments,s,r)&&n.children[vt])&&Rt(n.children[vt],e,u,r)}}function Rr(n,e,t){return e.every((r,s)=>W[t](n[s].parameters,r.parameters))}class mn{constructor(e=new kt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ei(this.queryParams)),this._queryParamMap}toString(){return ll.serialize(this)}}class kt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,D(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uf(this)}}class Vs{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ei(this.parameters)),this._parameterMap}toString(){return wg(this)}}function dr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Us=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new cl},providedIn:"root"}),n})();class cl{parse(e){const t=new hl(e);return new mn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ya(e.root,!0)}`,r=function jy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${Co(t)}=${Co(s)}`).join("&"):`${Co(t)}=${Co(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function cf(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ll=new cl;function uf(n){return n.segments.map(e=>wg(e)).join("/")}function Ya(n,e){if(!n.hasChildren())return uf(n);if(e){const t=n.children[vt]?Ya(n.children[vt],!1):"",r=[];return D(n.children,(s,u)=>{u!==vt&&r.push(`${u}:${Ya(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ji(n,e){let t=[];return D(n.children,(r,s)=>{s===vt&&(t=t.concat(e(r,s)))}),D(n.children,(r,s)=>{s!==vt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===vt?[Ya(n.children[vt],!1)]:[`${s}:${Ya(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[vt]?`${uf(n)}/${t[0]}`:`${uf(n)}/(${t.join("//")})`}}function dl(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Co(n){return dl(n).replace(/%3B/gi,";")}function bo(n){return dl(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sc(n){return decodeURIComponent(n)}function lf(n){return sc(n.replace(/\+/g,"%20"))}function wg(n){return`${bo(n.path)}${function df(n){return Object.keys(n).map(e=>`;${bo(e)}=${bo(n[e])}`).join("")}(n.parameters)}`}const Eg=/^[^\/()?;=#]+/;function Vd(n){const e=n.match(Eg);return e?e[0]:""}const Q0=/^[^=?&#]+/,$y=/^[^&#]+/;class hl{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new kt([],{}):new kt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[vt]=new kt(e,t)),r}parseSegment(){const e=Vd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,P);return this.capture(e),new Vs(sc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Vd(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=Vd(this.remaining);s&&(r=s,this.capture(r))}e[sc(t)]=sc(r)}parseQueryParam(e){const t=function Qa(n){const e=n.match(Q0);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Ig(n){const e=n.match($y);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=lf(t),u=lf(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Vd(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new f.vHH(4010,P);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=vt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[vt]:new kt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,P)}}function Ud(n){return n.segments.length>0?new kt([],{[vt]:n}):n}function ia(n){const e={};for(const r of Object.keys(n.children)){const u=ia(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Hy(n){if(1===n.numberOfChildren&&n.children[vt]){const e=n.children[vt];return new kt(n.segments.concat(e.segments),e.children)}return n}(new kt(n.segments,e))}function Ja(n){return n instanceof mn}const oc=!1;function Dg(n,e,t,r,s){if(0===t.length)return To(e.root,e.root,e.root,r,s);const u=function gl(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new jd(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return D(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...s,{outlets:m}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&s.push(m))}),s):[...s,u]},[]);return new jd(t,e,r)}(t);return u.toRoot()?To(e.root,e.root,new kt([],{}),r,s):function l(w){const b=function $d(n,e,t,r){if(n.isAbsolute)return new Xa(e.root,!0,0);if(-1===r)return new Xa(t,t===e.root,0);return function eu(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new f.vHH(4005,oc&&"Invalid number of '../'");s=r.segments.length}return new Xa(r,!1,s-u)}(t,r+(pl(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=b.processChildren?_s(b.segmentGroup,b.index,u.commands):Gd(b.segmentGroup,b.index,u.commands);return To(e.root,b.segmentGroup,S,r,s)}(n.snapshot?._lastPathIndex)}function pl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Bd(n){return"object"==typeof n&&null!=n&&n.outlets}function To(n,e,t,r,s){let l,u={};r&&D(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),l=n===e?t:Cg(n,e,t);const m=Ud(ia(l));return new mn(m,u,s)}function Cg(n,e,t){const r={};return D(n.children,(s,u)=>{r[u]=s===e?t:Cg(s,e,t)}),new kt(n.segments,r)}class jd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&pl(r[0]))throw new f.vHH(4003,oc&&"Root segment cannot have matrix parameters");const s=r.find(Bd);if(s&&s!==Ld(r))throw new f.vHH(4004,oc&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Xa{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Gd(n,e,t){if(n||(n=new kt([],{})),0===n.segments.length&&n.hasChildren())return _s(n,e,t);const r=function ff(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],m=t[r];if(Bd(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!gf(w,b,l))return u;r+=2}else{if(!gf(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new kt(n.segments.slice(0,r.pathIndex),{});return u.children[vt]=new kt(n.segments.slice(r.pathIndex),n.children),_s(u,0,s)}return r.match&&0===s.length?new kt(n.segments,{}):r.match&&!n.hasChildren()?ml(n,e,t):r.match?_s(n,0,s):ml(n,e,t)}function _s(n,e,t){if(0===t.length)return new kt(n.segments,{});{const r=function Hd(n){return Bd(n[0])?n[0].outlets:{[vt]:n}}(t),s={};if(!r[vt]&&n.children[vt]&&1===n.numberOfChildren&&0===n.children[vt].segments.length){const u=_s(n.children[vt],e,t);return new kt(n.segments,u.children)}return D(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=Gd(n.children[l],e,u))}),D(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new kt(n.segments,s)}}function ml(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Bd(u)){const w=yl(u.outlets);return new kt(r,w)}if(0===s&&pl(t[0])){r.push(new Vs(n.segments[e].path,pf(t[0]))),s++;continue}const l=Bd(u)?u.outlets[vt]:`${u}`,m=s<t.length-1?t[s+1]:null;l&&m&&pl(m)?(r.push(new Vs(l,pf(m))),s+=2):(r.push(new Vs(l,{})),s++)}return new kt(r,{})}function yl(n){const e={};return D(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=ml(new kt([],{}),0,t))}),e}function pf(n){const e={};return D(n,(t,r)=>e[r]=`${t}`),e}function gf(n,e,t){return n==t.path&&Bi(e,t.parameters)}const vl="imperative";class Bs{constructor(e,t){this.id=e,this.url=t}}class mf extends Bs{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class es extends Bs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _l extends Bs{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class oa extends Bs{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class wl extends Bs{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ac extends Bs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zy extends Bs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qy extends Bs{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wy extends Bs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yf extends Bs{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class El{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bg{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Tg{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uc{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vf{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ii{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let wf=(()=>{class n{createUrlTree(t,r,s,u,l,m){return Dg(t||r.root,s,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Zy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(e){return wf.\u0275fac(e)},providedIn:"root"}),n})();class If{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Df(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Df(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Nr(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return Nr(e,this._root).map(t=>t.value)}}function Df(n,e){if(n===e.value)return e;for(const t of e.children){const r=Df(n,t);if(r)return r}return null}function Nr(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Nr(n,t);if(r.length)return r.unshift(e),r}return[]}class Di{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function cc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ky extends If{constructor(e,t){super(e),this.snapshot=t,nu(this,e)}toString(){return this.snapshot.toString()}}function Yy(n,e){const t=function Qy(n,e){const l=new qd([],{},{},"",{},vt,e,null,n.root,-1,{});return new js("",new Di(l,[]))}(n,e),r=new Tn([new Vs("",{})]),s=new Tn({}),u=new Tn({}),l=new Tn({}),m=new Tn(""),w=new hr(r,s,l,m,u,vt,e,t.root);return w.snapshot=t.root,new Ky(new Di(w,[]),t)}class hr{constructor(e,t,r,s,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,_t.U)(b=>b[Ui]))??ut(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_t.U)(e=>Ei(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_t.U)(e=>Ei(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Cf(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function zd(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class qd{get title(){return this.data?.[Ui]}constructor(e,t,r,s,u,l,m,w,b,S,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=S,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ei(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ei(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class js extends If{constructor(e,t){super(t),this.url=e,nu(this,t)}toString(){return bf(this._root)}}function nu(n,e){e.value._routerState=n,e.children.forEach(t=>nu(n,t))}function bf(n){const e=n.children.length>0?` { ${n.children.map(bf).join(", ")} } `:"";return`${n.value}${e}`}function lc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Bi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Bi(e.params,t.params)||n.params.next(t.params),function Od(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Bi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Bi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ws(n,e){const t=Bi(n.params,e.params)&&function Do(n,e){return dr(n,e)&&n.every((t,r)=>Bi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ws(n.parent,e.parent))}function dc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Ag(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return dc(n,r,s);return dc(n,r)})}(n,e,t);return new Di(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>dc(n,m)),l}}const r=function Mg(n){return new hr(new Tn(n.url),new Tn(n.params),new Tn(n.queryParams),new Tn(n.fragment),new Tn(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>dc(n,u));return new Di(r,s)}}const xg="ngNavigationCancelingError";function y(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Ja(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=h(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function h(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[xg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function p(n){return _(n)&&Ja(n.url)}function _(n){return n&&n[xg]}class T{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new x,this.attachRef=null}}let x=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new T,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const V=!1;let Z=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=vt,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.parentContexts=(0,f.f3M)(x),this.location=(0,f.f3M)(f.s_b),this.changeDetector=(0,f.f3M)(f.sBO),this.environmentInjector=(0,f.f3M)(f.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,V);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,V);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,V);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,V);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new Te(t,m,s.injector);if(r&&function $e(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=s.createComponent(b,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[f.TTD]}),n})();class Te{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===hr?this.route:e===x?this.childContexts:this.parent.get(e,t)}}let Je=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[Z],encapsulation:2}),n})();function tt(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Dl(n){const e=n.children&&n.children.map(Dl),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==vt&&(t.component=Je),t}function $i(n){return n.outlet||vt}function Zd(n,e){const t=n.filter(r=>$i(r)===e);return t.push(...n.filter(r=>$i(r)!==e)),t}function hc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Kd{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=cc(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),D(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=cc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=cc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=cc(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new Ii(u.value.snapshot))}),e.children.length&&this.forwardEvent(new uc(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(lc(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const m=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),lc(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=hc(s.snapshot),w=m?.get(f._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class ev{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class tv{constructor(e,t){this.component=e,this.route=t}}function Tf(n,e,t){const r=n._root;return Yd(r,e?e._root:null,t,[r.value])}function Cl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Yd(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=cc(e);return n.children.forEach(l=>{(function J0(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function qA(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!dr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!dr(n.url,e.url)||!Bi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ws(n,e)||!Bi(n.queryParams,e.queryParams);default:return!ws(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new ev(r)):(u.data=l.data,u._resolvedData=l._resolvedData),Yd(n,e,u.component?m?m.children:null:t,r,s),w&&m&&m.outlet&&m.outlet.isActivated&&s.canDeactivateChecks.push(new tv(m.outlet.component,l))}else l&&Sf(e,m,s),s.canActivateChecks.push(new ev(r)),Yd(n,null,u.component?m?m.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),D(u,(l,m)=>Sf(l,t.getContext(m),s)),s}function Sf(n,e,t){const r=cc(n),s=n.value;D(r,(u,l)=>{Sf(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new tv(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Qd(n){return"function"==typeof n}function iu(n){return n instanceof Ga||"EmptyError"===n?.name}const Pg=Symbol("INITIAL_VALUE");function fc(){return Kn(n=>il(n.map(e=>e.pipe(_o(1),wo(Pg)))).pipe((0,_t.U)(e=>{for(const t of e)if(!0!==t){if(t===Pg)return Pg;if(!1===t||t instanceof mn)return t}return!0}),oi(e=>e!==Pg),_o(1)))}function uv(n){return(0,rf.z)((0,lr.b)(e=>{if(Ja(e))throw y(0,e)}),(0,_t.U)(e=>!0===e))}const cv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function nw(n,e,t,r,s){const u=lv(n,e,t);return u.matched?function Jd(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?ut(s.map(l=>{const m=Cl(l,n);return A(function sv(n){return n&&Qd(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(fc(),uv()):ut(!0)}(r=tt(e,r),e,t).pipe((0,_t.U)(l=>!0===l?u:{...cv})):ut(u)}function lv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...cv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||af)(t,n,e);if(!s)return{...cv};const u={};D(s.posParams,(m,w)=>{u[w]=m.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function Xd(n,e,t,r){if(t.length>0&&function ZD(n,e,t){return t.some(r=>dv(n,e,r)&&$i(r)!==vt)}(n,t,r)){const u=new kt(e,function rw(n,e,t,r){const s={};s[vt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&$i(u)!==vt){const l=new kt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[$i(u)]=l}return s}(n,e,r,new kt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function iw(n,e,t){return t.some(r=>dv(n,e,r))}(n,t,r)){const u=new kt(n.segments,function WD(n,e,t,r,s){const u={};for(const l of r)if(dv(n,t,l)&&!s[$i(l)]){const m=new kt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[$i(l)]=m}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new kt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function dv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function sw(n,e,t,r){return!!($i(n)===r||r!==vt&&dv(e,t,n))&&("**"===n.path||lv(e,n,t).matched)}function eh(n,e,t){return 0===e.length&&!n.children[t]}const Fg=!1;class su{constructor(e){this.segmentGroup=e||null}}class th{constructor(e){this.urlTree=e}}function Af(n){return Za(new su(n))}function hv(n){return Za(new th(n))}class ow{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=Xd(this.urlTree.root,[],[],this.config).segmentGroup,t=new kt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,vt).pipe((0,_t.U)(u=>this.createUrlTree(ia(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Io(u=>{if(u instanceof th)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof su?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,vt).pipe((0,_t.U)(s=>this.createUrlTree(ia(s),e.queryParams,e.fragment))).pipe(Io(s=>{throw s instanceof su?this.noMatchError(s):s}))}noMatchError(e){return new f.vHH(4002,Fg)}createUrlTree(e,t,r){const s=Ud(e);return new mn(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,_t.U)(u=>new kt([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,un.D)(s).pipe(ys(u=>{const l=r.children[u],m=Zd(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,_t.U)(w=>({segment:w,outlet:u})))}),ec((u,l)=>(u[l.outlet]=l.segment,u),{}),nc())}expandSegment(e,t,r,s,u,l){return(0,un.D)(r).pipe(ys(m=>this.expandSegmentAgainstRoute(e,t,r,m,s,u,l).pipe(Io(b=>{if(b instanceof su)return ut(null);throw b}))),Vi(m=>!!m),Io((m,w)=>{if(iu(m))return eh(t,s,u)?ut(new kt([],{})):Af(t);throw m}))}expandSegmentAgainstRoute(e,t,r,s,u,l,m){return sw(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):Af(t):Af(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?hv(u):this.lineralizeSegments(r,u).pipe((0,Bn.z)(l=>{const m=new kt(l,{});return this.expandSegment(e,m,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:S}=lv(t,s,u);if(!m)return Af(t);const N=this.applyRedirectCommands(w,s.redirectTo,S);return s.redirectTo.startsWith("/")?hv(N):this.lineralizeSegments(s,N).pipe((0,Bn.z)(H=>this.expandSegment(e,t,r,H.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=tt(r,e),r.loadChildren?(r._loadedRoutes?ut({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,_t.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new kt(s,{})))):ut(new kt(s,{}))):nw(t,r,s,e).pipe(Kn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,Bn.z)(S=>{const N=S.injector??e,H=S.routes,{segmentGroup:K,slicedSegments:me}=Xd(t,m,w,H),Fe=new kt(K.segments,K.children);if(0===me.length&&Fe.hasChildren())return this.expandChildren(N,H,Fe).pipe((0,_t.U)(wt=>new kt(m,wt)));if(0===H.length&&0===me.length)return ut(new kt(m,{}));const ke=$i(r)===u;return this.expandSegment(N,Fe,H,me,ke?vt:u,!0).pipe((0,_t.U)(At=>new kt(m.concat(At.segments),At.children)))})):Af(t)))}getChildConfig(e,t,r){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function qD(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?ut(!0):ut(s.map(l=>{const m=Cl(l,n);return A(function rv(n){return n&&Qd(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(fc(),uv())}(e,t,r).pipe((0,Bn.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,lr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function YD(n){return Za(h(Fg,3))}())):ut({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return ut(r);if(s.numberOfChildren>1||!s.children[vt])return e.redirectTo,Za(new f.vHH(4e3,Fg));s=s.children[vt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new mn(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return D(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const m=s.substring(1);r[u]=t[m]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return D(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,s)}),new kt(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new f.vHH(4001,Fg);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class fv{}class Mf{constructor(e,t,r,s,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=Xd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,vt).pipe((0,_t.U)(t=>{if(null===t)return null;const r=new qd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},vt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Di(r,t),u=new js(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Cf(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,un.D)(Object.keys(r.children)).pipe(ys(s=>{const u=r.children[s],l=Zd(t,s);return this.processSegmentGroup(e,l,u,s)}),ec((s,u)=>s&&u?(s.push(...u),s):null),function vs(n,e=!1){return(0,xr.e)((t,r)=>{let s=0;t.subscribe((0,vr.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),Eo(null),nc(),(0,_t.U)(s=>{if(null===s)return null;const u=uw(s);return function XD(n){n.sort((e,t)=>e.value.outlet===vt?-1:t.value.outlet===vt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,un.D)(t).pipe(ys(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),Vi(l=>!!l),Io(l=>{if(iu(l))return eh(r,s,u)?ut([]):ut(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!sw(t,r,s,u))return ut(null);let l;if("**"===t.path){const m=s.length>0?Ld(s).parameters:{},w=lw(r)+s.length;l=ut({snapshot:new qd(s,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,aa(t),$i(t),t.component??t._loadedComponent??null,t,cw(r),w,dw(t)),consumedSegments:[],remainingSegments:[]})}else l=nw(r,t,s,e).pipe((0,_t.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:S})=>{if(!m)return null;const N=lw(r)+w.length;return{snapshot:new qd(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,aa(t),$i(t),t.component??t._loadedComponent??null,t,cw(r),N,dw(t)),consumedSegments:w,remainingSegments:b}}));return l.pipe(Kn(m=>{if(null===m)return ut(null);const{snapshot:w,consumedSegments:b,remainingSegments:S}=m;e=t._injector??e;const N=t._loadedInjector??e,H=function eC(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:K,slicedSegments:me}=Xd(r,b,S,H.filter(ke=>void 0===ke.redirectTo));if(0===me.length&&K.hasChildren())return this.processChildren(N,H,K).pipe((0,_t.U)(ke=>null===ke?null:[new Di(w,ke)]));if(0===H.length&&0===me.length)return ut([new Di(w,[])]);const Fe=$i(t)===u;return this.processSegment(N,H,K,me,Fe?vt:u).pipe((0,_t.U)(ke=>null===ke?null:[new Di(w,ke)]))}))}}function tC(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uw(n){const e=[],t=new Set;for(const r of n){if(!tC(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=uw(r.children);e.push(new Di(r.value,s))}return e.filter(r=>!t.has(r))}function cw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function lw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function aa(n){return n.data||{}}function dw(n){return n.resolve||{}}function gv(n){return"string"==typeof n.title||null===n.title}function mv(n){return Kn(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,_t.U)(()=>e)):ut(e)})}const nh=new f.OlP("ROUTES");let vv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,f.f3M)(f.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=A(t.loadComponent()).pipe((0,_t.U)(pw),(0,lr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),rc(()=>{this.componentLoaders.delete(t)})),s=new ol(r,()=>new Mr.x).pipe(sl());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,_t.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,S=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=Fd(w.get(nh,[],f.XFs.Self|f.XFs.Optional)));return{routes:b.map(Dl),injector:w}}),rc(()=>{this.childrenLoaders.delete(r)})),l=new ol(u,()=>new Mr.x).pipe(sl());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return A(t()).pipe((0,_t.U)(pw),(0,Bn.z)(r=>r instanceof f.YKP||Array.isArray(r)?ut(r):(0,un.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pw(n){return function So(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Vg=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Mr.x,this.configLoader=(0,f.f3M)(vv),this.environmentInjector=(0,f.f3M)(f.lqb),this.urlSerializer=(0,f.f3M)(Us),this.rootContexts=(0,f.f3M)(x),this.navigationId=0,this.afterPreactivation=()=>ut(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new bg(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new El(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Tn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vl,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(oi(r=>0!==r.id),(0,_t.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Kn(r=>{let s=!1,u=!1;return ut(r).pipe((0,lr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Kn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new oa(l.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),Li.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return gw(l.source)&&(t.browserUrlTree=l.extractedUrl),ut(l).pipe(Kn(S=>{const N=this.transitions?.getValue();return this.events.next(new mf(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions?.getValue()?Li.E:Promise.resolve(S)}),function aw(n,e,t,r){return Kn(s=>function QD(n,e,t,r,s){return new ow(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,_t.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,lr.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function rC(n,e,t,r,s){return(0,Bn.z)(u=>function pv(n,e,t,r,s,u,l="emptyOnly"){return new Mf(n,e,t,r,s,l,u).recognize().pipe(Kn(m=>null===m?function JD(n){return new _i.y(e=>e.error(n))}(new fv):ut(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,_t.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,lr.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const H=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(H,S)}t.browserUrlTree=S.urlAfterRedirects}const N=new ac(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:N,source:H,restoredState:K,extras:me}=l,Fe=new mf(S,this.urlSerializer.serialize(N),H,K);this.events.next(Fe);const ke=Yy(N,this.rootComponentType).snapshot;return ut(r={...l,targetSnapshot:ke,urlAfterRedirects:N,extras:{...me,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new oa(l.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),Li.E}}),(0,lr.b)(l=>{const m=new zy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,_t.U)(l=>r={...l,guards:Tf(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Og(n,e){return(0,Bn.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?ut({...t,guardsResult:!0}):function GD(n,e,t,r){return(0,un.D)(n).pipe((0,Bn.z)(s=>function zD(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ut(u.map(m=>{const w=hc(e)??s,b=Cl(m,w);return A(function $D(n){return n&&Qd(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Vi())})).pipe(fc()):ut(!0)}(s.component,s.route,t,e,r)),Vi(s=>!0!==s,!0))}(l,r,s,n).pipe((0,Bn.z)(m=>m&&function X0(n){return"boolean"==typeof n}(m)?function ov(n,e,t,r){return(0,un.D)(e).pipe(ys(s=>Xu(function bl(n,e){return null!==n&&e&&e(new Tg(n)),ut(!0)}(s.route.parent,r),function kg(n,e){return null!==n&&e&&e(new vf(n)),ut(!0)}(s.route,r),function av(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function nv(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Pd(()=>ut(l.guards.map(w=>{const b=hc(l.node)??t,S=Cl(w,b);return A(function iv(n){return n&&Qd(n.canActivateChild)}(S)?S.canActivateChild(r,n):b.runInContext(()=>S(r,n))).pipe(Vi())})).pipe(fc())));return ut(u).pipe(fc())}(n,s.path,t),function tw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const s=r.map(u=>Pd(()=>{const l=hc(e)??t,m=Cl(u,l);return A(function WA(n){return n&&Qd(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Vi())}));return ut(s).pipe(fc())}(n,s.route,t))),Vi(s=>!0!==s,!0))}(r,u,n,e):ut(m)),(0,_t.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,lr.b)(l=>{if(r.guardsResult=l.guardsResult,Ja(l.guardsResult))throw y(0,l.guardsResult);const m=new qy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),oi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),mv(l=>{if(l.guards.canActivateChecks.length)return ut(l).pipe((0,lr.b)(m=>{const w=new Wy(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Kn(m=>{let w=!1;return ut(m).pipe(function ZA(n,e){return(0,Bn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return ut(t);let u=0;return(0,un.D)(s).pipe(ys(l=>function KA(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!gv(s)&&(u[Ui]=s.title),function hw(n,e,t,r){const s=function YA(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return ut({});const u={};return(0,un.D)(s).pipe((0,Bn.z)(l=>function fw(n,e,t,r){const s=hc(e)??r,u=Cl(n,s);return A(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Vi(),(0,lr.b)(m=>{u[l]=m}))),tc(1),function ul(n){return(0,_t.U)(()=>n)}(u),Io(l=>iu(l)?Li.E:Za(l)))}(u,n,e,r).pipe((0,_t.U)(l=>(n._resolvedData=l,n.data=Cf(n,t).resolve,s&&gv(s)&&(n.data[Ui]=s.title),null)))}(l.route,r,n,e)),(0,lr.b)(()=>u++),tc(1),(0,Bn.z)(l=>u===s.length?ut(t):Li.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,lr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,lr.b)(m=>{const w=new yf(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),mv(l=>{const m=w=>{const b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,lr.b)(S=>{w.component=S}),(0,_t.U)(()=>{})));for(const S of w.children)b.push(...m(S));return b};return il(m(l.targetSnapshot.root)).pipe(Eo(),_o(1))}),mv(()=>this.afterPreactivation()),(0,_t.U)(l=>{const m=function ru(n,e,t){const r=dc(n,e._root,t?t._root:void 0);return new Ky(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,lr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,_t.U)(r=>(new Kd(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),_o(1),(0,lr.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new es(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),rc(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),Io(l=>{if(u=!0,_(l)){p(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new _l(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),p(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||gw(r.source)};t.scheduleNavigation(w,vl,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new wl(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return Li.E}))}))}cancelNavigationTransition(t,r,s){const u=new _l(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function gw(n){return n!==vl}let mw=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===vt);return r}getResolvedTitleForRoute(t){return t.data[Ui]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(iC)},providedIn:"root"}),n})(),iC=(()=>{class n extends mw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Jh))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(oC)},providedIn:"root"}),n})();class sC{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let oC=(()=>{class n extends sC{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ut=new f.OlP("",{providedIn:"root",factory:()=>({})});let vw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(_w)},providedIn:"root"}),n})(),_w=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uC(n){throw n}function cC(n,e,t){return e.parse("/")}const ww={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ci=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,f.f3M)(f.c2e),this.isNgZoneEnabled=!1,this.options=(0,f.f3M)(Ut,{optional:!0})||{},this.errorHandler=this.options.errorHandler||uC,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||cC,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,f.f3M)(vw),this.routeReuseStrategy=(0,f.f3M)(yw),this.urlCreationStrategy=(0,f.f3M)(Zy),this.titleStrategy=(0,f.f3M)(mw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Fd((0,f.f3M)(nh,{optional:!0})??[]),this.navigationTransitions=(0,f.f3M)(Vg),this.urlSerializer=(0,f.f3M)(Us),this.location=(0,f.f3M)(Ue),this.isNgZoneEnabled=(0,f.f3M)(f.R0b)instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new mn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Yy(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const w={...s};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Dl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=w?this.currentUrlTree.fragment:l;let S=null;switch(m){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,S,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Ja(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,vl,null,r)}navigate(t,r={skipLocationChange:!1}){return function dC(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...ww}:!1===r?{...lC}:r,Ja(t))return te(this.currentUrlTree,t,s);const u=this.parseUrl(t);return te(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b,S;return l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((N,H)=>{m=N,w=H}),S="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nf=(()=>{class n{constructor(t,r,s,u,l,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=l,this.locationStrategy=m,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new Mr.x;const w=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===w||"area"===w,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof es&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,u,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||u||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,f.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ci),f.Y36(hr),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(lt))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})(),Ew=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,s,u,l){this.router=t,this.element=r,this.renderer=s,this.cdr=u,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new f.vpe,this.routerEventsSubscription=t.events.subscribe(m=>{m instanceof es&&this.update()})}ngAfterContentInit(){ut(this.links.changes,ut(null)).pipe((0,Ju.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,un.D)(t).pipe((0,Ju.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Iw(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>!!s.urlTree&&t.isActive(s.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ci),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(Nf,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,s){if(1&t&&f.Suo(s,Nf,5),2&t){let u;f.iGM(u=f.CRH())&&(r.links=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[f.TTD]}),n})();class _v{}let wv=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(oi(t=>t instanceof es),ys(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,f.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,un.D)(s).pipe((0,Ju.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ut(null);const u=s.pipe((0,Bn.z)(l=>null===l?ut(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,un.D)([u,l]).pipe((0,Ju.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ci),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(_v),f.LFG(vv))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pf=new f.OlP("");let Dw=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof es&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof tu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new tu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();var Hs=(()=>((Hs=Hs||{})[Hs.COMPLETE=0]="COMPLETE",Hs[Hs.FAILED=1]="FAILED",Hs[Hs.REDIRECTING=2]="REDIRECTING",Hs))();const Of=!1;function Tl(n,e){return{\u0275kind:n,\u0275providers:e}}const Iv=new f.OlP("",{providedIn:"root",factory:()=>!1});function kf(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(Ci),s=n.get(Cw);1===n.get(Bg)&&r.initialNavigation(),n.get(bw,null,f.XFs.Optional)?.setUpPreloading(),n.get(Pf,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const Cw=new f.OlP(Of?"bootstrap done indicator":"",{factory:()=>new Mr.x}),Bg=new f.OlP(Of?"initial navigation":"",{providedIn:"root",factory:()=>1});function gC(){let n=[];return n=Of?[{provide:f.Xts,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Ci);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function _f(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Tl(1,n)}const bw=new f.OlP(Of?"router preloader":"");function mC(n){return Tl(0,[{provide:bw,useExisting:wv},{provide:_v,useExisting:n}])}const sh=!1,_C=new f.OlP(sh?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Dv=[Ue,{provide:Us,useClass:cl},Ci,x,{provide:hr,useFactory:function Ev(n){return n.routerState.root},deps:[Ci]},vv,sh?{provide:Iv,useValue:!0}:[]];function wC(){return new f.PXZ("Router",Ci)}let EC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Dv,sh&&r?.enableTracing?gC().\u0275providers:[],{provide:nh,multi:!0,useValue:t},{provide:_C,useFactory:Aw,deps:[[Ci,new f.FiY,new f.tp0]]},{provide:Ut,useValue:r||{}},r?.useHash?{provide:lt,useClass:xe}:{provide:lt,useClass:Me},{provide:Pf,useFactory:()=>{const n=(0,f.f3M)(Aa),e=(0,f.f3M)(f.R0b),t=(0,f.f3M)(Ut),r=(0,f.f3M)(Vg),s=(0,f.f3M)(Us);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Dw(s,r,n,e,t)}},r?.preloadingStrategy?mC(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:wC},r?.initialNavigation?DC(r):[],[{provide:Mw,useFactory:kf},{provide:f.tb,multi:!0,useExisting:Mw}]]}}static forChild(t){return{ngModule:n,providers:[{provide:nh,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_C,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Je]}),n})();function Aw(n){if(sh&&n)throw new f.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function DC(n){return["disabled"===n.initialNavigation?Tl(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(Ci);return()=>{e.setUpLocationChangeListener()}}},{provide:Bg,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Tl(2,[{provide:Bg,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(ce,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Ci),u=e.get(Cw);(function JA(n,e){n.events.pipe(oi(t=>t instanceof es||t instanceof _l||t instanceof wl||t instanceof oa),(0,_t.U)(t=>t instanceof es||t instanceof oa?Hs.COMPLETE:t instanceof _l&&(0===t.code||1===t.code)?Hs.REDIRECTING:Hs.FAILED),oi(t=>t!==Hs.REDIRECTING),_o(1)).subscribe(()=>{e()})})(s,()=>{r(!0)}),e.get(Vg).afterPreactivation=()=>(r(!0),u.closed?ut(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const Mw=new f.OlP(sh?"Router Initializer":"");let Lf=(()=>{class n{constructor(){this.data=[{id:10,title:"Clavier Sans fil",unitPrice:40.5},{id:20,title:"Disque externe SSD 1To",unitPrice:100},{id:30,title:"Ecran LED 22 pouces ",unitPrice:320},{id:40,title:"Souris Optique ergonomique",unitPrice:190.5}]}getAppProducts(){return this.data}getProductById(t){return this.data.find(s=>s.id==t)}addProduct(t){this.data.push()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vf=function(n){return["/products",n]};function Cv(n,e){if(1&n&&(f.TgZ(0,"tr")(1,"td",7)(2,"a",8),f._uU(3),f.qZA()()()),2&n){const t=e.$implicit;f.xp6(2),f.Q6J("routerLink",f.VKq(2,Vf,t.id)),f.xp6(1),f.Oqu(t.title)}}let $g=(()=>{class n{constructor(t){this._service=t,this.data=[]}ngOnInit(){this.data=this._service.getAppProducts()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Lf))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products-list"]],decls:13,vars:1,consts:[[1,"card"],[1,"card-header","bg-info","text-white"],[1,"card-body"],[1,"table-responsive-md"],[1,"table","table-striped","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],["routerLinkActive","router-link-active",3,"routerLink"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h5"),f._uU(3,"Products List"),f.qZA()(),f.TgZ(4,"div",2)(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),f._uU(10,"Title"),f.qZA()()(),f.TgZ(11,"tbody"),f.YNc(12,Cv,4,4,"tr",6),f.qZA()()()()()),2&t&&(f.xp6(12),f.Q6J("ngForOf",r.data))},dependencies:[Ks,Nf,Ew]}),n})(),xw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products-promotions"]],decls:2,vars:0,template:function(t,r){1&t&&(f.TgZ(0,"p"),f._uU(1,"products-promotions works!"),f.qZA())}}),n})(),Hg=(()=>{class n{constructor(){this.length=0,this.count=new Tn(this.length),this.countObservable=this.count.asObservable()}addProductToCart(){this.count.next(++this.length),console.log(" >>>>>> Add to cart TRIGGERED !!"+this.length)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bv=(()=>{class n{constructor(t,r,s){this._activated_route=t,this._service=r,this._cartSrervice=s}ngOnInit(){this._activated_route.paramMap.subscribe({next:t=>{let r=Number(t.get("id"));this.product=this._service.getProductById(r)},error:t=>console.log("ATTENTION, erreur lors de l'invocation du service"+t)})}addProductToCart(){this._cartSrervice.addProductToCart()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(hr),f.Y36(Lf),f.Y36(Hg))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products-detail"]],decls:27,vars:4,consts:[[1,"card"],[1,"card-header","bg-info","text-white"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[1,"row","mb-3"],[1,"col-md-3"],[1,"col-md-6","text-danger","fw-bold"],["src","https://placehold.co/150x150","alt","",1,"img-fluid","rounded-top"],[1,"offset-1","col-md-10","d-grid","gap-2","mt-1"],["type","button","name","","id","",1,"btn","btn-primary",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h5"),f._uU(3),f.qZA()(),f.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),f._uU(9,"Id"),f.qZA(),f.TgZ(10,"div",4),f._uU(11),f.qZA()(),f.TgZ(12,"div",5)(13,"div",6),f._uU(14,"Name"),f.qZA(),f.TgZ(15,"div",4),f._uU(16),f.qZA()(),f.TgZ(17,"div",5)(18,"div",6),f._uU(19,"Unit price"),f.qZA(),f.TgZ(20,"div",7),f._uU(21),f.qZA()()(),f.TgZ(22,"div",4),f._UZ(23,"img",8),f.qZA()()()(),f.TgZ(24,"div",9)(25,"button",10),f.NdJ("click",function(){return r.addProductToCart()}),f._uU(26,"Add to card"),f.qZA()()),2&t&&(f.xp6(3),f.hij("Products details for ",r.product.title,""),f.xp6(8),f.Oqu(r.product.id),f.xp6(5),f.Oqu(r.product.title),f.xp6(5),f.Oqu(r.product.unitPrice))}}),n})(),Sv=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),ou=(()=>{class n extends Sv{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const ua=new f.OlP("NgValueAccessor"),bC={provide:ua,useExisting:(0,f.Gpc)(()=>Uf),multi:!0},Nw=new f.OlP("CompositionEventMode");let Uf=(()=>{class n extends Sv{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Rw(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Nw,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([bC]),f.qOj]}),n})();const TC=!1;function _r(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Pw(n){return null!=n&&"number"==typeof n.length}const bi=new f.OlP("NgValidators"),Sl=new f.OlP("NgAsyncValidators"),Mv=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Bf{static min(e){return function Ow(n){return e=>{if(_r(e.value)||_r(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function kw(n){return e=>{if(_r(e.value)||_r(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Fw(n){return _r(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function xv(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Lw(n){return _r(n.value)||Mv.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Vw(n){return e=>_r(e.value)||!Pw(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Gg(n){return e=>Pw(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Uw(n){if(!n)return zg;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(_r(r.value))return null;const s=r.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return Gw(e)}static composeAsync(e){return zw(e)}}function zg(n){return null}function Bw(n){return null!=n}function jw(n){const e=(0,f.QGY)(n)?(0,un.D)(n):n;if(TC&&!(0,f.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new f.vHH(-1101,t)}return e}function $w(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Ao(n,e){return e.map(t=>t(n))}function Hw(n){return n.map(e=>function Rv(n){return!n.validate}(e)?e:t=>e.validate(t))}function Gw(n){if(!n)return null;const e=n.filter(Bw);return 0==e.length?null:function(t){return $w(Ao(t,e))}}function qg(n){return null!=n?Gw(Hw(n)):null}function zw(n){if(!n)return null;const e=n.filter(Bw);return 0==e.length?null:function(t){return function Tv(...n){const e=(0,si.jO)(n),{args:t,keys:r}=za(n),s=new _i.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let S=0;S<l;S++){let N=!1;(0,na.Xf)(t[S]).subscribe((0,vr.x)(u,H=>{N||(N=!0,b--),m[S]=H},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?Ls(r,m):m),u.complete())}))}});return e?s.pipe(Fs(e)):s}(Ao(t,e).map(jw)).pipe((0,_t.U)($w))}}function Nv(n){return null!=n?zw(Hw(n)):null}function qw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Wg(n){return n._rawValidators}function Ww(n){return n._rawAsyncValidators}function Pv(n){return n?Array.isArray(n)?n:[n]:[]}function Al(n,e){return Array.isArray(n)?n.includes(e):n===e}function jf(n,e){const t=Pv(e);return Pv(n).forEach(s=>{Al(t,s)||t.push(s)}),t}function $f(n,e){return Pv(e).filter(t=>!Al(n,t))}class SC{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Nv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ai extends SC{get formDirective(){return null}get path(){return null}}class Ml extends SC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ov{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Zg=(()=>{class n extends Ov{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ml,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),Hf=(()=>{class n extends Ov{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ai,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();function Zw(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const kv=!1,Gf="VALID",zf="INVALID",pc="PENDING",qf="DISABLED";function Wf(n){return(Qg(n)?n.validators:n)||null}function Fv(n,e){return(Qg(e)?e.asyncValidators:n)||null}function Qg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Kw(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,kv?function OC(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new f.vHH(1001,kv?function kC(n,e){return`Cannot find form control ${Zw(n,e)}`}(e,t):"")}function Yw(n,e,t){n._forEachChild((r,s)=>{if(void 0===t[s])throw new f.vHH(1002,kv?function FC(n,e){return`Must supply a value for form control ${Zw(n,e)}`}(e,s):"")})}class Jg{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gf}get invalid(){return this.status===zf}get pending(){return this.status==pc}get disabled(){return this.status===qf}get enabled(){return this.status!==qf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(jf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(jf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators($f(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators($f(e,this._rawAsyncValidators))}hasValidator(e){return Al(this._rawValidators,e)}hasAsyncValidator(e){return Al(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=pc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qf,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Gf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gf||this.status===pc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qf:Gf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=pc,this._hasOwnPendingAsyncValidator=!0;const t=jw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,s)=>r&&r._find(s),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?qf:this.errors?zf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pc)?pc:this._anyControlsHaveStatus(zf)?zf:Gf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function LC(n){return Array.isArray(n)?qg(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function VC(n){return Array.isArray(n)?Nv(n):n||null}(this._rawAsyncValidators)}}class ah extends Jg{constructor(e,t,r){super(Wf(t),Fv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Yw(this,!0,e),Object.keys(e).forEach(r=>{Kw(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const s=this.controls[r];s&&s.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,s)=>((r.enabled||this.disabled)&&(t[s]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((s,u)=>{r=t(r,s,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class BC extends ah{}const uh=new f.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>gc}),gc="always";function Zf(n,e,t=gc){Nl(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Pl(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Es(n,e)})}(n,e),function Lv(n,e){const t=(r,s)=>{e.valueAccessor.writeValue(r),s&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function tm(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Es(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ca(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ch(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Pr(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function em(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Nl(n,e){const t=Wg(n);null!==e.validator?n.setValidators(qw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=Ww(n);null!==e.asyncValidator?n.setAsyncValidators(qw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const s=()=>n.updateValueAndValidity();em(e._rawValidators,s),em(e._rawAsyncValidators,s)}function Pr(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=Wg(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.validator);u.length!==s.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const s=Ww(n);if(Array.isArray(s)&&s.length>0){const u=s.filter(l=>l!==e.asyncValidator);u.length!==s.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return em(e._rawValidators,r),em(e._rawAsyncValidators,r),t}function Es(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Uv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Bv(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Jf=class extends Jg{constructor(e=null,t,r){super(Wf(t),Fv(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Bv(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Uv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Uv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Bv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let ep=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const iE={provide:ua,useExisting:(0,f.Gpc)(()=>$v),multi:!0};let $v=(()=>{class n extends ou{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([iE]),f.qOj]}),n})(),Gv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const om=new f.OlP("NgModelWithFormControlWarning"),zC={provide:ai,useExisting:(0,f.Gpc)(()=>tp)};let tp=(()=>{class n extends ai{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Pr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Zf(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ch(t.control||null,t,!1),function Qw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function Vv(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(ch(r||null,t),(n=>n instanceof Jf)(s)&&(Zf(s,t,this.callSetDisabledState),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function Ol(n,e){Nl(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function lh(n,e){return Pr(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Nl(this.form,this),this._oldForm&&Pr(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(bi,10),f.Y36(Sl,10),f.Y36(uh,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([zC]),f.qOj,f.TTD]}),n})();const aE={provide:Ml,useExisting:(0,f.Gpc)(()=>np)};let np=(()=>{class n extends Ml{set isDisabled(t){}constructor(t,r,s,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function nm(n,e){if(!e)return null;let t,r,s;return Array.isArray(e),e.forEach(u=>{u.constructor===Uf?t=u:function hh(n){return Object.getPrototypeOf(n.constructor)===ou}(u)?r=u:s=u}),s||r||t||null}(0,u)}ngOnChanges(t){this._added||this._setUpControl(),function yc(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function Xg(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(ai,13),f.Y36(bi,10),f.Y36(Sl,10),f.Y36(ua,10),f.Y36(om,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([aE]),f.qOj,f.TTD]}),n})(),tb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Gv]}),n})();class t_ extends Jg{constructor(e,t,r){super(Wf(t),Fv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let s=this._adjustIndex(e);s<0&&(s=0),this.controls[s]&&this.controls[s]._registerOnCollectionChange(()=>{}),this.controls.splice(s,1),t&&(this.controls.splice(s,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Yw(this,!1,e),e.forEach((r,s)=>{Kw(this,!1,s),this.at(s).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,s)=>{this.at(s)&&this.at(s).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,s)=>{r.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function vE(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let _E=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let u={};return vE(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new ah(s,u)}record(t,r=null){const s=this._reduceControls(t);return new BC(s,r)}control(t,r,s){let u={};return this.useNonNullable?(vE(r)?u=r:(u.validators=r,u.asyncValidators=s),new Jf(t,{...u,nonNullable:!0})):new Jf(t,r,s)}array(t,r,s){const u=t.map(l=>this._createControl(l));return new t_(u,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof Jf||t instanceof Jg?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:uh,useValue:t.callSetDisabledState??gc}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[tb]}),n})(),EE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:om,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:uh,useValue:t.callSetDisabledState??gc}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[tb]}),n})();function nb(n,e){1&n&&(f.TgZ(0,"div",14),f._uU(1,"invalid id"),f.qZA())}function rb(n,e){1&n&&(f.TgZ(0,"div",14),f._uU(1,"invalid id"),f.qZA())}let ib=(()=>{class n{constructor(t,r,s){this._builder=t,this._service=r,this._routerService=s,this.productForm=this._builder.group({id:[222,Bf.required],title:["",Bf.minLength(3)],unitPrice:[0,Bf.required]})}addProduct(){this._service.addProduct({id:this.productForm.value.id,title:this.productForm.value.title,unitPrice:this.productForm.value.unitPrice}),this._routerService.navigate(["/products"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(_E),f.Y36(Lf),f.Y36(Ci))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-products-add"]],decls:23,vars:3,consts:[[1,"card"],[1,"card-header","bg-info","text-white"],[1,"card-body"],[1,"row"],[1,"col-md-6",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","productid",1,"form-label"],["type","number","formControlName","id","id","productid","aria-describedby","emailHelp",1,"form-control"],["class","text-danger",4,"ngIf"],["for","producttitle",1,"form-label"],["type","text","formControlName","title","id","producttitle",1,"form-control"],["for","productunitprice",1,"form-label"],["type","number","formControlName","unitPrice","id","productunitprice",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"]],template:function(t,r){if(1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h5"),f._uU(3,"Product Form (Reactive)"),f.qZA()(),f.TgZ(4,"div",2)(5,"div",3)(6,"form",4),f.NdJ("ngSubmit",function(){return r.addProduct()}),f.TgZ(7,"div",5)(8,"label",6),f._uU(9,"Product ID"),f.qZA(),f._UZ(10,"input",7),f.YNc(11,nb,2,0,"div",8),f.qZA(),f.TgZ(12,"div",5)(13,"label",9),f._uU(14,"Title"),f.qZA(),f._UZ(15,"input",10),f.YNc(16,rb,2,0,"div",8),f.qZA(),f.TgZ(17,"div",5)(18,"label",11),f._uU(19,"Unit price"),f.qZA(),f._UZ(20,"input",12),f.qZA(),f.TgZ(21,"button",13),f._uU(22,"Add To Catalogue"),f.qZA()()()()()),2&t){let s,u;f.xp6(6),f.Q6J("formGroup",r.productForm),f.xp6(5),f.Q6J("ngIf",(null==(s=r.productForm.get("id"))?null:s.touched)&&(null==(s=r.productForm.get("id"))?null:s.invalid)),f.xp6(5),f.Q6J("ngIf",(null==(u=r.productForm.get("title"))?null:u.touched)&&(null==(u=r.productForm.get("title"))?null:u.invalid))}},dependencies:[ss,ep,Uf,$v,Zg,Hf,tp,np]}),n})();var sb=k(4986),kr=k(4976);function Fl(){return(0,xr.e)((n,e)=>{let t,r=!1;n.subscribe((0,vr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function IE(n,e){return n===e}var et,xo=k(2011),DE=(k(2644),k(3942)),ye=k(5861),ha=k(6881),fm=k(4859),lu=k(1877),cn=k(2090),n_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ts={},pm=pm||{},jt=n_||self;function rp(){}function ip(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function gh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gm="closure_uid_"+(1e9*Math.random()>>>0),ab=0;function ub(n,e,t){return n.call.apply(n.bind,arguments)}function cb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Ti(n,e,t){return(Ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ub:cb).apply(null,arguments)}function mm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Zr(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,s,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[s].apply(r,l)}}function _c(){this.s=this.s,this.o=this.o}_c.prototype.s=!1,_c.prototype.ra=function(){!this.s&&(this.s=!0,this.N(),0)&&function CE(n){Object.prototype.hasOwnProperty.call(n,gm)&&n[gm]||(n[gm]=++ab)}(this)},_c.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function r_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function TE(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(ip(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function Si(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Si.prototype.h=function(){this.defaultPrevented=!0};var db=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",rp,e),jt.removeEventListener("test",rp,e)}catch{}return n}();function ym(n){return/^[\s\xa0]*$/.test(n)}var SE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function i_(n,e){return n<e?-1:n>e?1:0}function vm(){var n=jt.navigator;return n&&(n=n.userAgent)?n:""}function fa(n){return-1!=vm().indexOf(n)}function _m(n){return _m[" "](n),n}function s_(n,e,t){return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}_m[" "]=rp;var sp,n,AE=fa("Opera"),Ll=fa("Trident")||fa("MSIE"),o_=fa("Edge"),wm=o_||Ll,a_=fa("Gecko")&&!(-1!=vm().toLowerCase().indexOf("webkit")&&!fa("Edge"))&&!(fa("Trident")||fa("MSIE"))&&!fa("Edge"),ME=-1!=vm().toLowerCase().indexOf("webkit")&&!fa("Edge");function u_(){var n=jt.document;return n?n.documentMode:void 0}e:{var Em="",du=(n=vm(),a_?/rv:([^\);]+)(\)|;)/.exec(n):o_?/Edge\/([\d\.]+)/.exec(n):Ll?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):ME?/WebKit\/(\S+)/.exec(n):AE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(du&&(Em=du?du[1]:""),Ll){var c_=u_();if(null!=c_&&c_>parseFloat(Em)){sp=String(c_);break e}}sp=Em}var hb={},hM=jt.document&&Ll&&(u_()||parseInt(sp,10))||void 0;function yh(n,e){if(Si.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(a_){e:{try{_m(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:RE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&yh.$.h.call(this)}}Zr(yh,Si);var RE={2:"touch",3:"pen",4:"mouse"};yh.prototype.h=function(){yh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Dm="closure_listenable_"+(1e6*Math.random()|0),Mt=0;function fb(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++Mt,this.fa=this.ia=!1}function Cm(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function l_(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Vl(n){const e={};for(const t in n)e[t]=n[t];return e}const NE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function op(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<NE.length;u++)t=NE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Ul(n){this.src=n,this.g={},this.h=0}function jn(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=bE(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(Cm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function PE(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Ul.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=PE(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new fb(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var bm="closure_lm_"+(1e6*Math.random()|0),Tm={};function OE(n,e,t,r,s){if(r&&r.once)return h_(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)OE(n,e[u],t,r,s);return null}return t=m_(t),n&&n[Dm]?n.O(e,t,gh(r)?!!r.capture:!!r,s):d_(n,e,t,!1,r,s)}function d_(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=gh(s)?!!s.capture:!!s,m=Bl(n);if(m||(n[bm]=m=new Ul(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function kE(){const e=pb;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)db||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(FE(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function h_(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)h_(n,e[u],t,r,s);return null}return t=m_(t),n&&n[Dm]?n.P(e,t,gh(r)?!!r.capture:!!r,s):d_(n,e,t,!0,r,s)}function f_(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)f_(n,e[u],t,r,s);else r=gh(r)?!!r.capture:!!r,t=m_(t),n&&n[Dm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=PE(u=n.g[e],t,r,s))&&(Cm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Bl(n))&&(e=n.g[e.toString()],n=-1,e&&(n=PE(e,t,r,s)),(t=-1<n?e[n]:null)&&p_(t))}function p_(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Dm])jn(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(FE(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Bl(e))?(jn(t,n),0==t.h&&(t.src=null,e[bm]=null)):Cm(n)}}}function FE(n){return n in Tm?Tm[n]:Tm[n]="on"+n}function pb(n,e){if(n.fa)n=!0;else{e=new yh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&p_(n),n=t.call(r,e)}return n}function Bl(n){return(n=n[bm])instanceof Ul?n:null}var g_="__closure_events_fn_"+(1e9*Math.random()>>>0);function m_(n){return"function"==typeof n?n:(n[g_]||(n[g_]=function(e){return n.handleEvent(e)}),n[g_])}function Kr(){_c.call(this),this.i=new Ul(this),this.S=this,this.J=null}function wr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Si(e,n);else if(e instanceof Si)e.target=e.target||n;else{var s=e;op(e=new Si(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=ap(l,r,!0,e)&&s}if(s=ap(l=e.g=n,r,!0,e)&&s,s=ap(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=ap(l=e.g=t[u],r,!1,e)&&s}function ap(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var m=l.listener,w=l.la||l.src;l.ia&&jn(n.i,l),s=!1!==m.call(w,r)&&s}}return s&&!r.defaultPrevented}Zr(Kr,_c),Kr.prototype[Dm]=!0,Kr.prototype.removeEventListener=function(n,e,t,r){f_(this,n,e,t,r)},Kr.prototype.N=function(){if(Kr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Cm(t[r]);delete n.g[e],n.h--}}this.J=null},Kr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Kr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Sm=jt.JSON.stringify;function LE(){var n=v_;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var y_,vh=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new up,n=>n.reset());class up{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function mb(n){jt.setTimeout(()=>{throw n},0)}function VE(n,e){y_||function UE(){var n=jt.Promise.resolve(void 0);y_=function(){n.then(yb)}}(),Am||(y_(),Am=!0),v_.add(n,e)}var Am=!1,v_=new class gb{constructor(){this.h=this.g=null}add(e,t){const r=vh.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function yb(){for(var n;n=LE();){try{n.h.call(n.g)}catch(t){mb(t)}var e=vh;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Am=!1}function cp(n,e){Kr.call(this),this.h=n||1,this.g=e||jt,this.j=Ti(this.qb,this),this.l=Date.now()}function __(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function w_(n,e,t){if("function"==typeof n)t&&(n=Ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function vb(n){n.g=w_(()=>{n.g=null,n.i&&(n.i=!1,vb(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Zr(cp,Kr),(et=cp.prototype).ga=!1,et.T=null,et.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),wr(this,"tick"),this.ga&&(__(this),this.start()))}},et.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},et.N=function(){cp.$.N.call(this),__(this),delete this.g};class fM extends _c{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vb(this)}N(){super.N(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mm(n){_c.call(this),this.h=n,this.g={}}Zr(Mm,_c);var _b=[];function E_(n,e,t,r){Array.isArray(t)||(t&&(_b[0]=t.toString()),t=_b);for(var s=0;s<t.length;s++){var u=OE(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function lp(n){l_(n.g,function(e,t){this.g.hasOwnProperty(t)&&p_(e)},n),n.g={}}function xm(){this.g=!0}function pa(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ib(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return Sm(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Mm.prototype.N=function(){Mm.$.N.call(this),lp(this)},Mm.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xm.prototype.Ea=function(){this.g=!1},xm.prototype.info=function(){};var jl={},jE=null;function I_(){return jE=jE||new Kr}function $E(n){Si.call(this,jl.Ta,n)}function _h(n){const e=I_();wr(e,new $E(e))}function HE(n,e){Si.call(this,jl.STAT_EVENT,n),this.stat=e}function Hi(n){const e=I_();wr(e,new HE(e,n))}function wh(n,e){Si.call(this,jl.Ua,n),this.size=e}function dp(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}jl.Ta="serverreachability",Zr($E,Si),jl.STAT_EVENT="statevent",Zr(HE,Si),jl.Ua="timingevent",Zr(wh,Si);var hp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},GE={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Rm(){}function D_(){}Rm.prototype.h=null;var Nm,fp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function pp(){Si.call(this,"d")}function C_(){Si.call(this,"c")}function gp(){}function mp(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Mm(this),this.P=Db,this.V=new cp(n=wm?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new qE}function qE(){this.i=null,this.g="",this.h=!1}Zr(pp,Si),Zr(C_,Si),Zr(gp,Rm),gp.prototype.g=function(){return new XMLHttpRequest},gp.prototype.i=function(){return{}},Nm=new gp;var Db=45e3,yp={},Pm={};function Om(n,e,t){n.L=1,n.v=Vm(Ro(e)),n.s=t,n.S=!0,WE(n,null)}function WE(n,e){n.G=Date.now(),vp(n),n.A=Ro(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),T_(t.i,"t",r),n.C=0,t=n.l.I,n.h=new qE,n.g=qm(n.l,t?e:null,!n.s),0<n.O&&(n.M=new fM(Ti(n.Pa,n,n.g),n.O)),E_(n.U,n.g,"readystatechange",n.nb),e=n.I?Vl(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),_h(),function wb(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var S=b[0];b=b[1];var N=S.split("_");l=2<=N.length&&"type"==N[1]?l+(S+"=")+b+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function ZE(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function KE(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=Cb(n,t),s==Pm){4==e&&(n.o=4,Hi(14),r=!1),pa(n.j,n.m,null,"[Incomplete Response]");break}if(s==yp){n.o=4,Hi(15),pa(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}pa(n.j,n.m,s,null),Fm(n,s)}ZE(n)&&s!=Pm&&s!=yp&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Hi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ca&&(n.ca=!0,(e=n.l).g==n&&e.ca&&!e.L&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),U_(e),e.L=!0,Hi(11))):(pa(n.j,n.m,t,"[Invalid Chunked Response]"),wc(n),_p(n))}function Cb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Pm:(t=Number(e.substring(t,r)),isNaN(t)?yp:(r+=1)+t>e.length?Pm:(e=e.substr(r,t),n.C=r+t,e))}function vp(n){n.Y=Date.now()+n.P,YE(n,n.P)}function YE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=dp(Ti(n.lb,n),e)}function km(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function _p(n){0==n.l.H||n.J||xp(n.l,n)}function wc(n){km(n);var e=n.M;e&&"function"==typeof e.ra&&e.ra(),n.M=null,__(n.V),lp(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.ra())}function Fm(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||A_(t.h,n)))if(!n.K&&A_(t.h,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;ql(t),Hm(t)}V_(t),Hi(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.M&&0==t.A&&!t.v&&(t.v=dp(Ti(t.ib,t),6e3));if(1>=oI(t.h)&&t.na){try{t.na()}catch{}t.na=void 0}}else Wl(t,11)}else if((n.K||t.g==n)&&ql(t),!ym(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let b=s[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.J=b[1],t.oa=b[2];const S=b[3];null!=S&&(t.qa=S,t.j.info("VER="+t.qa));const N=b[4];null!=N&&(t.Ga=N,t.j.info("SVER="+t.Ga));const H=b[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const K=n.g;if(K){const me=K.g?K.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(me){var u=r.h;u.g||-1==me.indexOf("spdy")&&-1==me.indexOf("quic")&&-1==me.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(M_(u,u.h),u.h=null))}if(r.F){const Fe=K.g?K.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.Da=Fe,$n(r.G,r.F,Fe))}}t.H=3,t.l&&t.l.Ba(),t.ca&&(t.S=Date.now()-n.G,t.j.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=j_(r,r.I?r.oa:null,r.Y),l.K){x_(r.h,l);var m=l,w=r.K;w&&m.setTimeout(w),m.B&&(km(m),vp(m)),r.g=l}else Dh(r);0<t.i.length&&Gm(t)}else"stop"!=b[0]&&"close"!=b[0]||Wl(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Wl(t,7):F_(t):"noop"!=b[0]&&t.l&&t.l.Aa(b),t.A=0)}_h()}catch{}}function b_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(ip(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Tb(n){if(n.sa&&"function"==typeof n.sa)return n.sa();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(ip(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function bb(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(ip(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(et=mp.prototype).setTimeout=function(n){this.P=n},et.nb=function(n){n=n.target;const e=this.M;e&&3==hu(n)?e.l():this.Pa(n)},et.Pa=function(n){try{if(n==this.g)e:{const S=hu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>S)&&(3!=S||wm||this.g&&(this.h.h||this.g.ja()||cI(this.g)))){this.J||4!=S||7==e||_h(),km(this);var t=this.g.da();this.aa=t;t:if(ZE(this)){var r=cI(this.g);n="";var s=r.length,u=4==hu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){wc(this),_p(this);var l="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function BE(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,S,t),this.i){if(this.ba&&!this.K){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ym(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Hi(12),wc(this),_p(this);break e}pa(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fm(this,t)}this.S?(KE(this,S,l),wm&&this.i&&3==S&&(E_(this.U,this.V,"tick",this.mb),this.V.start())):(pa(this.j,this.m,l,null),Fm(this,l)),4==S&&wc(this),this.i&&!this.J&&(4==S?xp(this.l,this):(this.i=!1,vp(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Hi(12)):(this.o=0,Hi(13)),wc(this),_p(this)}}}catch{}},et.mb=function(){if(this.g){var n=hu(this.g),e=this.g.ja();this.C<e.length&&(km(this),KE(this,n,e),this.i&&4!=n&&vp(this))}},et.cancel=function(){this.J=!0,wc(this)},et.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Eb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(_h(),Hi(17)),wc(this),this.o=2,_p(this)):YE(this,this.Y-n)};var QE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $l(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof $l){this.h=void 0!==e?e:n.h,Eh(this,n.j),this.s=n.s,this.g=n.g,wp(this,n.m),this.l=n.l,e=n.i;var t=new zl;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Lm(this,t),this.o=n.o}else n&&(t=String(n).match(QE))?(this.h=!!e,Eh(this,t[1]||"",!0),this.s=Hl(t[2]||""),this.g=Hl(t[3]||"",!0),wp(this,t[4]),this.l=Hl(t[5]||"",!0),Lm(this,t[6]||"",!0),this.o=Hl(t[7]||"")):(this.h=!!e,this.i=new zl(null,this.h))}function Ro(n){return new $l(n)}function Eh(n,e,t){n.j=t?Hl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function wp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Lm(n,e,t){e instanceof zl?(n.i=e,function nI(n,e){e&&!n.j&&(Ec(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(Um(this,r),T_(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ep(e,pM)),n.i=new zl(e,n.h))}function $n(n,e,t){n.i.set(e,t)}function Vm(n){return $n(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Hl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ep(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,JE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function JE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}$l.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ep(e,Gl,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ep(e,Gl,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ep(t,"/"==t.charAt(0)?Ab:XE,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ep(t,eI)),n.join("")};var Gl=/[#\/\?@]/g,XE=/[#\?:]/g,Ab=/[#\?]/g,pM=/[#\?@]/g,eI=/#/g;function zl(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ec(n){n.g||(n.g=new Map,n.h=0,n.i&&function Sb(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Um(n,e){Ec(n),e=Ic(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function tI(n,e){return Ec(n),e=Ic(n,e),n.g.has(e)}function T_(n,e,t){Um(n,e),0<t.length&&(n.i=null,n.g.set(Ic(n,e),r_(t)),n.h+=t.length)}function Ic(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function S_(n){this.l=n||iI,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ka&&jt.g.Ka()&&jt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(et=zl.prototype).add=function(n,e){Ec(this),this.i=null,n=Ic(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},et.forEach=function(n,e){Ec(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},et.sa=function(){Ec(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},et.Z=function(n){Ec(this);let e=[];if("string"==typeof n)tI(this,n)&&(e=e.concat(this.g.get(Ic(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},et.set=function(n,e){return Ec(this),this.i=null,tI(this,n=Ic(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},et.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},et.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var iI=10;function sI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function oI(n){return n.h?1:n.g?n.g.size:0}function A_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function M_(n,e){n.g?n.g.add(e):n.h=e}function x_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Mb(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return r_(n.i)}function Bm(){}function xb(){this.g=new Bm}function Rb(n,e,t){const r=t||"";try{b_(n,function(s,u){let l=s;gh(s)&&(l=Sm(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function jm(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Ip(n){this.l=n.fc||null,this.j=n.ob||!1}function Dp(n,e){Kr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=$m,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}S_.prototype.cancel=function(){if(this.i=Mb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Bm.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},Bm.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},Zr(Ip,Rm),Ip.prototype.g=function(){return new Dp(this.l,this.j)},Ip.prototype.i=function(n){return function(){return n}}({}),Zr(Dp,Kr);var $m=0;function aI(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Cp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,bp(n)}function bp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(et=Dp.prototype).open=function(n,e){if(this.readyState!=$m)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,bp(this)},et.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||jt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},et.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cp(this)),this.readyState=$m},et.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,bp(this)),this.g&&(this.readyState=3,bp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;aI(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},et.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Cp(this):bp(this),3==this.readyState&&aI(this)}},et.Za=function(n){this.g&&(this.response=this.responseText=n,Cp(this))},et.Ya=function(n){this.g&&(this.response=n,Cp(this))},et.ka=function(){this.g&&Cp(this)},et.setRequestHeader=function(n,e){this.v.append(n,e)},et.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},et.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Dp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Nb=jt.JSON.parse;function rr(n){Kr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=uI,this.L=this.M=!1}Zr(rr,Kr);var uI="",Pb=/^https?$/i,Ob=["POST","PUT"];function R_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,N_(n),Sp(n)}function N_(n){n.F||(n.F=!0,wr(n,"complete"),wr(n,"error"))}function P_(n){if(n.h&&typeof pm<"u"&&(!n.C[1]||4!=hu(n)||2!=n.da()))if(n.v&&4==hu(n))w_(n.La,0,n);else if(wr(n,"readystatechange"),4==hu(n)){n.h=!1;try{const m=n.da();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var s=String(n.I).match(QE)[1]||null;if(!s&&jt.self&&jt.self.location){var u=jt.self.location.protocol;s=u.substr(0,u.length-1)}r=!Pb.test(s?s.toLowerCase():"")}t=r}if(t)wr(n,"complete"),wr(n,"success");else{n.m=6;try{var l=2<hu(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.da()+"]",N_(n)}}finally{Sp(n)}}}function Sp(n,e){if(n.g){O_(n);const t=n.g,r=n.C[0]?rp:null;n.g=null,n.C=null,e||wr(n,"ready");try{t.onreadystatechange=r}catch{}}}function O_(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function hu(n){return n.g?n.g.readyState:0}function cI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case uI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function kb(n){let e="";return l_(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function k_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=kb(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):$n(n,e,t))}function Ap(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function lI(n){this.Ga=0,this.i=[],this.j=new xm,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ap("failFast",!1,n),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ap("baseRetryDelayMs",5e3,n),this.hb=Ap("retryDelaySeedMs",1e4,n),this.eb=Ap("forwardChannelMaxRetries",2,n),this.xa=Ap("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.K=void 0,this.I=n&&n.supportsCrossDomainXhr||!1,this.J="",this.h=new S_(n&&n.concurrentRequestLimit),this.Ja=new xb,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.j.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function F_(n){if(Ih(n),3==n.H){var e=n.W++,t=Ro(n.G);$n(t,"SID",n.J),$n(t,"RID",e),$n(t,"TYPE","terminate"),Mp(n,t),(e=new mp(n,n.j,e,void 0)).L=2,e.v=Vm(Ro(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon&&(t=jt.navigator.sendBeacon(e.v.toString(),"")),!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=qm(e.l,null),e.g.ha(e.v)),e.G=Date.now(),vp(e)}B_(n)}function Hm(n){n.g&&(U_(n),n.g.cancel(),n.g=null)}function Ih(n){Hm(n),n.u&&(jt.clearTimeout(n.u),n.u=null),ql(n),n.h.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function Gm(n){sI(n.h)||n.m||(n.m=!0,VE(n.Na,n),n.C=0)}function No(n,e){var t;t=e?e.m:n.W++;const r=Ro(n.G);$n(r,"SID",n.J),$n(r,"RID",t),$n(r,"AID",n.V),Mp(n,r),n.o&&n.s&&k_(r,n.o,n.s),t=new mp(n,n.j,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.i=e.F.concat(n.i)),e=zm(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),M_(n.h,t),Om(t,r,e)}function Mp(n,e){n.ma&&l_(n.ma,function(t,r){$n(e,r,t)}),n.l&&b_({},function(t,r){$n(e,r,t)})}function zm(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Ti(n.l.Va,n.l,n):null;e:{var s=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=s[w].h;const S=s[w].g;if(b-=u,0>b)u=Math.max(0,s[w].h-100),m=!1;else try{Rb(S,l,"req"+b+"_")}catch{r&&r(S)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.F=n,r}function Dh(n){n.g||n.u||(n.ba=1,VE(n.Ma,n),n.A=0)}function V_(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=dp(Ti(n.Ma,n),hI(n,n.A)),n.A++,0))}function U_(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function dI(n){n.g=new mp(n,n.j,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Ro(n.wa);$n(e,"RID","rpc"),$n(e,"SID",n.J),$n(e,"CI",n.M?"0":"1"),$n(e,"AID",n.V),$n(e,"TYPE","xmlhttp"),Mp(n,e),n.o&&n.s&&k_(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.oa,t.L=1,t.v=Vm(Ro(e)),t.s=null,t.S=!0,WE(t,n)}function ql(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function xp(n,e){var t=null;if(n.g==e){ql(n),U_(n),n.g=null;var r=2}else{if(!A_(n.h,e))return;t=e.F,x_(n.h,e),r=1}if(0!=n.H)if(n.ta=e.aa,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;wr(r=I_(),new wh(r,t)),Gm(n)}else Dh(n);else if(3==(s=e.o)||0==s&&0<n.ta||!(1==r&&function L_(n,e){return!(oI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.F.concat(n.i),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=dp(Ti(n.Na,n,e),hI(n,n.C)),n.C++,0)))}(n,e)||2==r&&V_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:Wl(n,5);break;case 4:Wl(n,10);break;case 3:Wl(n,6);break;default:Wl(n,2)}}function hI(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.l||(t*=2),t*e}function Wl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Ti(n.pb,n);t||(t=new $l("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||Eh(t,"https"),Vm(t)),function gM(n,e){const t=new xm;if(jt.Image){const r=new Image;r.onload=mm(jm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=mm(jm,t,r,"TestLoadImage: error",!1,e),r.onabort=mm(jm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=mm(jm,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Hi(2);n.H=0,n.l&&n.l.za(e),B_(n),Ih(n)}function B_(n){if(n.H=0,n.pa=[],n.l){const e=Mb(n.h);(0!=e.length||0!=n.i.length)&&(TE(n.pa,e),TE(n.pa,n.i),n.h.i.length=0,r_(n.i),n.i.length=0),n.l.ya()}}function j_(n,e,t){var r=t instanceof $l?Ro(t):new $l(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),wp(r,r.m);else{var s=jt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new $l(null,void 0);r&&Eh(u,r),e&&(u.g=e),s&&wp(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&$n(r,t,e),$n(r,"VER",n.qa),Mp(n,r),r}function qm(n,e,t){if(e&&!n.I)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rr(t&&n.Ha&&!n.va?new Ip({ob:!0}):n.va)).Oa(n.I),e}function $_(){}function Ch(){if(Ll&&!(10<=Number(hM)))throw Error("Environmental error: no available transport.")}function Gi(n,e){Kr.call(this),this.g=new lI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!ym(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ym(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Dc(this)}function H_(n){pp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Wm(){C_.call(this),this.status=1}function Dc(n){this.g=n}function Po(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function G_(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function _n(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(et=rr.prototype).Oa=function(n){this.M=n},et.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Nm.g(),this.C=function zE(n){return n.h||(n.h=n.i())}(this.u?this.u:Nm),this.g.onreadystatechange=Ti(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void R_(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=jt.FormData&&n instanceof jt.FormData,!(0<=bE(Ob,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{O_(this),0<this.B&&((this.L=function Tp(n){return Ll&&function mh(){return s_(hb,9,function(){let n=0;const e=SE(String(sp)).split("."),t=SE("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var s=e[l]||"",u=t[l]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==s[0].length&&0==u[0].length)break;n=i_(0==s[1].length?0:parseInt(s[1],10),0==u[1].length?0:parseInt(u[1],10))||i_(0==s[2].length,0==u[2].length)||i_(s[2],u[2]),s=s[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ti(this.ua,this)):this.A=w_(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){R_(this,u)}},et.ua=function(){typeof pm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,wr(this,"timeout"),this.abort(8))},et.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,wr(this,"complete"),wr(this,"abort"),Sp(this))},et.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Sp(this,!0)),rr.$.N.call(this)},et.La=function(){this.s||(this.G||this.v||this.l?P_(this):this.kb())},et.kb=function(){P_(this)},et.da=function(){try{return 2<hu(this)?this.g.status:-1}catch{return-1}},et.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},et.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Nb(e)}},et.Ia=function(){return this.m},et.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(et=lI.prototype).qa=8,et.H=1,et.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new mp(this,this.j,n,void 0);let u=this.s;if(this.U&&(u?(u=Vl(u),op(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zm(this,s,e),$n(t=Ro(this.G),"RID",n),$n(t,"CVER",22),this.F&&$n(t,"X-HTTP-Session-Id",this.F),Mp(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(kb(u)))+"&"+e:this.o&&k_(t,this.o,u)),M_(this.h,s),this.bb&&$n(t,"TYPE","init"),this.P?($n(t,"$req",e),$n(t,"SID","null"),s.ba=!0,Om(s,t,null)):Om(s,t,e),this.H=2}}else 3==this.H&&(n?No(this,n):0==this.i.length||sI(this.h)||No(this))},et.Ma=function(){if(this.u=null,dI(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var n=2*this.S;this.j.info("BP detection timer enabled: "+n),this.B=dp(Ti(this.jb,this),n)}},et.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,Hi(10),Hm(this),dI(this))},et.ib=function(){null!=this.v&&(this.v=null,Hm(this),V_(this),Hi(19))},et.pb=function(n){n?(this.j.info("Successfully pinged google.com"),Hi(2)):(this.j.info("Failed to ping google.com"),Hi(1))},(et=$_.prototype).Ba=function(){},et.Aa=function(){},et.za=function(){},et.ya=function(){},et.Va=function(){},Ch.prototype.g=function(n,e){return new Gi(n,e)},Zr(Gi,Kr),Gi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var n=this.g,e=this.l,t=this.h||void 0;Hi(0),n.Y=e,n.ma=t||{},n.M=n.aa,n.G=j_(n,null,n.Y),Gm(n)},Gi.prototype.close=function(){F_(this.g)},Gi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Sm(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.fb++,n)),3==e.H&&Gm(e)},Gi.prototype.N=function(){this.g.l=null,delete this.j,F_(this.g),delete this.g,Gi.$.N.call(this)},Zr(H_,pp),Zr(Wm,C_),Zr(Dc,$_),Dc.prototype.Ba=function(){wr(this.g,"a")},Dc.prototype.Aa=function(n){wr(this.g,new H_(n))},Dc.prototype.za=function(n){wr(this.g,new Wm)},Dc.prototype.ya=function(){wr(this.g,"b")},Zr(Po,function Fb(){this.blockSize=-1}),Po.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Po.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)G_(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){G_(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){G_(this,r),s=0;break}}this.h=s,this.i+=e},Po.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var fI={};function Rp(n){return-128<=n&&128>n?s_(fI,n,function(e){return new _n([0|e],0>e?-1:0)}):new _n([0|n],0>n?-1:0)}function Oo(n){if(isNaN(n)||!isFinite(n))return Zl;if(0>n)return Yr(Oo(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Zm;return new _n(e,0)}var Zm=4294967296,Zl=Rp(0),z_=Rp(1),q_=Rp(16777216);function ga(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Gs(n){return-1==n.h}function Yr(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new _n(t,~n.h).add(z_)}function Km(n,e){return n.add(Yr(e))}function Qr(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ma(n,e){this.g=n,this.h=e}function Ym(n,e){if(ga(e))throw Error("division by zero");if(ga(n))return new ma(Zl,Zl);if(Gs(n))return e=Ym(Yr(n),e),new ma(Yr(e.g),Yr(e.h));if(Gs(e))return e=Ym(n,Yr(e)),new ma(Yr(e.g),e.h);if(30<n.g.length){if(Gs(n)||Gs(e))throw Error("slowDivide_ only works with positive integers.");for(var t=z_,r=e;0>=r.X(n);)t=gI(t),r=gI(r);var s=Np(t,1),u=Np(r,1);for(r=Np(r,2),t=Np(t,2);!ga(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=Np(r,1),t=Np(t,1)}return e=Km(n,s.R(e)),new ma(s,e)}for(s=Zl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=Oo(t)).R(e);Gs(l)||0<l.X(n);)l=(u=Oo(t-=r)).R(e);ga(u)&&(u=z_),s=s.add(u),n=Km(n,l)}return new ma(s,n)}function gI(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new _n(t,n.h)}function Np(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new _n(s,n.h)}(et=_n.prototype).ea=function(){if(Gs(this))return-Yr(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Zm+r)*e,e*=Zm}return n},et.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(ga(this))return"0";if(Gs(this))return"-"+Yr(this).toString(n);for(var e=Oo(Math.pow(n,6)),t=this,r="";;){var s=Ym(t,e).g,u=((0<(t=Km(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(ga(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},et.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},et.X=function(n){return Gs(n=Km(this,n))?-1:ga(n)?0:1},et.abs=function(){return Gs(this)?Yr(this):this},et.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new _n(t,-2147483648&t[t.length-1]?-1:0)},et.R=function(n){if(ga(this)||ga(n))return Zl;if(Gs(this))return Gs(n)?Yr(this).R(Yr(n)):Yr(Yr(this).R(n));if(Gs(n))return Yr(this.R(Yr(n)));if(0>this.X(q_)&&0>n.X(q_))return Oo(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),m=n.D(s)>>>16,w=65535&n.D(s);t[2*r+2*s]+=l*w,Qr(t,2*r+2*s),t[2*r+2*s+1]+=u*w,Qr(t,2*r+2*s+1),t[2*r+2*s+1]+=l*m,Qr(t,2*r+2*s+1),t[2*r+2*s+2]+=u*m,Qr(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new _n(t,0)},et.gb=function(n){return Ym(this,n).h},et.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new _n(t,this.h&n.h)},et.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new _n(t,this.h|n.h)},et.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new _n(t,this.h^n.h)},Ch.prototype.createWebChannel=Ch.prototype.g,Gi.prototype.send=Gi.prototype.u,Gi.prototype.open=Gi.prototype.m,Gi.prototype.close=Gi.prototype.close,hp.NO_ERROR=0,hp.TIMEOUT=8,hp.HTTP_ERROR=6,GE.COMPLETE="complete",D_.EventType=fp,fp.OPEN="a",fp.CLOSE="b",fp.ERROR="c",fp.MESSAGE="d",Kr.prototype.listen=Kr.prototype.O,rr.prototype.listenOnce=rr.prototype.P,rr.prototype.getLastError=rr.prototype.Sa,rr.prototype.getLastErrorCode=rr.prototype.Ia,rr.prototype.getStatus=rr.prototype.da,rr.prototype.getResponseJson=rr.prototype.Wa,rr.prototype.getResponseText=rr.prototype.ja,rr.prototype.send=rr.prototype.ha,rr.prototype.setWithCredentials=rr.prototype.Oa,Po.prototype.digest=Po.prototype.l,Po.prototype.reset=Po.prototype.reset,Po.prototype.update=Po.prototype.j,_n.prototype.add=_n.prototype.add,_n.prototype.multiply=_n.prototype.R,_n.prototype.modulo=_n.prototype.gb,_n.prototype.compare=_n.prototype.X,_n.prototype.toNumber=_n.prototype.ea,_n.prototype.toString=_n.prototype.toString,_n.prototype.getBits=_n.prototype.D,_n.fromNumber=Oo,_n.fromString=function pI(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Yr(pI(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Oo(Math.pow(e,8)),r=Zl,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=Oo(Math.pow(e,u)),r=r.R(u).add(Oo(l))):r=(r=r.R(t)).add(Oo(l))}return r};var mM=ts.createWebChannelTransport=function(){return new Ch},mI=ts.getStatEventTarget=function(){return I_()},Pp=ts.ErrorCode=hp,Op=ts.EventType=GE,Lb=ts.Event=jl,Qm=ts.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Vb=ts.FetchXmlHttpFactory=Ip,kp=ts.WebChannel=D_,Ub=ts.XhrIo=rr,Bb=ts.Md5=Po,bh=ts.Integer=_n;const Jm="@firebase/firestore";class Fr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");let Kl="9.22.0";const ko=new lu.Yd("@firebase/firestore");function Fp(){return ko.logLevel}function Pe(n,...e){if(ko.logLevel<=lu.in.DEBUG){const t=e.map(Cc);ko.debug(`Firestore (${Kl}): ${n}`,...t)}}function fr(n,...e){if(ko.logLevel<=lu.in.ERROR){const t=e.map(Cc);ko.error(`Firestore (${Kl}): ${n}`,...t)}}function Is(n,...e){if(ko.logLevel<=lu.in.WARN){const t=e.map(Cc);ko.warn(`Firestore (${Kl}): ${n}`,...t)}}function Cc(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Kl}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function gt(n,e){n||it()}function Qe(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends cn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Lr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class yI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fr.UNAUTHENTICATED))}shutdown(){}}class vI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _I{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=b=>this.i!==s?(s=this.i,t(b)):Promise.resolve();let l=new Lr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Lr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,ye.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Lr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt("string"==typeof r.accessToken),new yI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return gt(null===e||"string"==typeof e),new Fr(e)}}class $b{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class wI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new $b(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Z_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Hb{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.T;return this.T=u.token,Pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?s(u):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(gt("string"==typeof t.token),this.T=t.token,new Z_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function EI(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class II{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=EI(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Bt(n,e){return n<e?-1:n>e?1:0}function Yl(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}function K_(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Bt(this.nanoseconds,e.nanoseconds):Bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new On(0,0))}static max(){return new yt(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Lp{constructor(e,t,r){void 0===t?t=0:t>e.length&&it(),void 0===r?r=e.length-t:r>e.length-t&&it(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Lp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ln extends Lp{construct(e,t,r){return new ln(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(oe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new ln(t)}static emptyPath(){return new ln([])}}const DI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pr extends Lp{construct(e,t,r){return new pr(e,t,r)}static isValidIdentifier(e){return DI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new pr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new De(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const m=e[s];if("\\"===m){if(s+1===e.length)throw new De(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new De(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===m?(l=!l,s++):"."!==m||l?(r+=m,s++):(u(),s++)}if(u(),l)throw new De(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pr(t)}static emptyPath(){return new pr([])}}class Ke{constructor(e){this.path=e}static fromPath(e){return new Ke(ln.fromString(e))}static fromName(e){return new Ke(ln.fromString(e).popFirst(5))}static empty(){return new Ke(ln.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ln.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ln.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ke(new ln(e.slice()))}}class Y_{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function CI(n){return n.fields.find(e=>2===e.kind)}function Th(n){return n.fields.filter(e=>2!==e.kind)}Y_.UNKNOWN_ID=-1;class Q_{constructor(e,t){this.fieldPath=e,this.kind=t}}class bc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new bc(0,Ai.min())}}function Gb(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=yt.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new Ai(s,Ke.empty(),e)}function J_(n){return new Ai(n.readTime,n.key,-1)}class Ai{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ai(yt.min(),Ke.empty(),-1)}static max(){return new Ai(yt.max(),Ke.empty(),-1)}}function Xm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ke.comparator(n.documentKey,e.documentKey),0!==t?t:Bt(n.largestBatchId,e.largestBatchId))}const X_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ya(n){return ey.apply(this,arguments)}function ey(){return ey=(0,ye.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==X_)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),ey.apply(this,arguments)}class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ee((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ee?t:ee.resolve(t)}catch(t){return ee.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ee.reject(t)}static resolve(e){return new ee((t,r)=>{t(e)})}static reject(e){return new ee((t,r)=>{r(e)})}static waitFor(e){return new ee((t,r)=>{let s=0,u=0,l=!1;e.forEach(m=>{++s,m.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=ee.resolve(!1);for(const r of e)t=t.next(s=>s?ee.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ee((r,s)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(S=>{l[b]=S,++m,m===u&&r(l)},S=>s(S))}})}static doWhile(e,t){return new ee((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}class e0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Lr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Vp(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const s=bI(r.target.error);this.v.reject(new Vp(e,s))}}static open(e,t,r,s){try{return new e0(t,e.transaction(s,r))}catch(u){throw new Vp(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Wb(t)}}class va{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===va.S((0,cn.z$)())&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),Sh(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,cn.hl)())return!1;if(va.C())return!0;const e=(0,cn.z$)(),t=va.S(e),r=0<t&&t<10,s=va.N(e),u=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,s)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{s(new Vp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;s("VersionError"===m.name?new De(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new De(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Vp(e,m))},u.onupgradeneeded=l=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,s){var u=this;return(0,ye.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.$(e);const w=e0.open(u.db,e,l?"readonly":"readwrite",r),b=s(w).next(S=>(w.P(),S)).catch(S=>(w.abort(S),ee.reject(S))).toPromise();return b.catch(()=>{}),yield w.R,b}catch(w){const b=w,S="FirebaseError"!==b.name&&m<3;if(Pe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",S),u.close(),!S)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class qb{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Sh(this.L.delete())}}class Vp extends De{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fo(n){return"IndexedDbTransactionError"===n.name}class Wb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Sh(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),Sh(this.store.add(e))}get(e){return Sh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),Sh(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),Sh(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const s=this.cursor(r),u=[];return this.W(s,(l,m)=>{u.push(m)}).next(()=>u)}{const s=this.store.getAll(r.range);return new ee((u,l)=>{s.onerror=m=>{l(m.target.error)},s.onsuccess=m=>{u(m.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ee((s,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{s(l.target.result)}})}J(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.W(s,(u,l,m)=>m.delete())}X(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.W(s,t)}Z(e){const t=this.cursor({});return new ee((r,s)=>{t.onerror=u=>{const l=bI(u.target.error);s(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}W(e,t){const r=[];return new ee((s,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void s();const w=new qb(m),b=t(m.primaryKey,m.value,w);if(b instanceof ee){const S=b.catch(N=>(w.done(),ee.reject(N)));r.push(S)}w.isDone?s():null===w.K?m.continue():m.continue(w.K)}}).next(()=>ee.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Sh(n){return new ee((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const s=bI(r.target.error);t(s)}})}let Zb=!1;function bI(n){const e=va.S((0,cn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Zb||(Zb=!0,setTimeout(()=>{throw r},0)),r}}return n}class Kb{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ye.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Fo(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ya(r)}yield t.et(6e4)}))}}class Yb{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,ye.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let s=t,u=!0;return ee.doWhile(()=>!0===u&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Pe("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,s).next(m=>{s-=m,r.add(l)});u=!1})).next(()=>t-s)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(s,u)).next(m=>(Pe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((s,u)=>{const l=J_(u);Xm(l,r)>0&&(r=l)}),new Ai(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ds=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function ty(n){return null==n}function Up(n){return 0===n&&1/n==-1/0}function t0(n){return"number"==typeof n&&Number.isInteger(n)&&!Up(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function ui(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zs(e)),e=EM(n.get(t),e);return zs(e)}function EM(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const u=n.charAt(s);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function zs(n){return n+"\x01\x01"}function _a(n){const e=n.length;if(gt(e>=2),2===e)return gt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),ln.emptyPath();const t=e-2,r=[];let s="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&it(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===s.length?w=m:(s+=m,w=s,s=""),r.push(w);break;case"\x10":s+=n.substring(u,l),s+="\0";break;case"\x11":s+=n.substring(u,l+1);break;default:it()}u=l+2}return new ln(r)}const ny=["userId","batchId"];function ry(n,e){return[n,ui(e)]}function Qb(n,e,t){return[n,ui(e),t]}const qs={},Jb=["prefixPath","collectionGroup","readTime","documentId"],n0=["prefixPath","collectionGroup","documentId"],Xb=["collectionGroup","readTime","prefixPath","documentId"],eT=["canonicalId","targetId"],r0=["targetId","path"],TI=["path","targetId"],SI=["collectionId","parent"],tT=["indexId","uid"],AI=["uid","sequenceNumber"],MI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nT=["indexId","uid","orderedDocumentKey"],xI=["userId","collectionPath","documentId"],rT=["userId","collectionPath","largestBatchId"],s0=["userId","collectionGroup","largestBatchId"],wa=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Tc=[...wa,"documentOverlays"],o0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iy=o0,RI=[...iy,"indexConfiguration","indexState","indexEntries"];class a0 extends zb{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function ci(n,e){const t=Qe(n);return va.M(t.ht,e)}function NI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Sc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class xn{constructor(e,t){this.comparator=e,this.root=t||Mi.EMPTY}insert(e,t){return new xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mi.BLACK,null,null))}remove(e){return new xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Bp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Bp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Bp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Bp(this.root,e,this.comparator,!0)}}class Bp{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mi{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Mi.RED,this.left=s??Mi.EMPTY,this.right=u??Mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Mi(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Mi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Mi.EMPTY=null,Mi.RED=!0,Mi.BLACK=!1,Mi.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Mi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Rn{constructor(e){this.comparator=e,this.data=new xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OI(this.data.getIterator())}getIteratorFrom(e){return new OI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Rn(this.comparator);return t.data=e,t}}class OI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ql(n){return n.hasNext()?n.getNext():void 0}class Cs{constructor(e){this.fields=e,e.sort(pr.comparator)}static empty(){return new Cs([])}unionWith(e){let t=new Rn(pr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class sy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Er{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new sy("Invalid base64 string: "+s):s}}(e);return new Er(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Er(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Er.EMPTY_BYTE_STRING=new Er("");const FI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fu(n){if(gt(!!n),"string"==typeof n){let e=0;const t=FI.exec(n);if(gt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ws(n){return"string"==typeof n?Er.fromBase64String(n):Er.fromUint8Array(n)}function Jl(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function jp(n){const e=n.mapValue.fields.__previous_value__;return Jl(e)?jp(e):e}function $p(n){const e=fu(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class iT{constructor(e,t,r,s,u,l,m,w,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.longPollingOptions=w,this.useFetchStreams=b}}class Xl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Xl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Xl&&e.projectId===this.projectId&&e.database===this.database}}const ed={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},u0={nullValue:"NULL_VALUE"};function pu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jl(n)?4:d0(n)?9007199254740991:10:it()}function Ea(n,e){if(n===e)return!0;const t=pu(n);if(t!==pu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $p(n).isEqual($p(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=fu(r.timestampValue),l=fu(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ws(n.bytesValue).isEqual(Ws(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Yn(r.geoPointValue.latitude)===Yn(s.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Yn(r.integerValue)===Yn(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=Yn(r.doubleValue),l=Yn(s.doubleValue);return u===l?Up(u)===Up(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Yl(n.arrayValue.values||[],e.arrayValue.values||[],Ea);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(NI(u)!==NI(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!Ea(u[m],l[m])))return!1;return!0}(n,e);default:return it()}var s}function Hp(n,e){return void 0!==(n.values||[]).find(t=>Ea(t,e))}function Ac(n,e){if(n===e)return 0;const t=pu(n),r=pu(e);if(t!==r)return Bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Bt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=Yn(s.integerValue||s.doubleValue),m=Yn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return sT(n.timestampValue,e.timestampValue);case 4:return sT($p(n),$p(e));case 5:return Bt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=Ws(s),m=Ws(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Bt(l[w],m[w]);if(0!==b)return b}return Bt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Bt(Yn(s.latitude),Yn(u.latitude));return 0!==l?l:Bt(Yn(s.longitude),Yn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=Ac(l[w],m[w]);if(b)return b}return Bt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===ed.mapValue&&u===ed.mapValue)return 0;if(s===ed.mapValue)return 1;if(u===ed.mapValue)return-1;const l=s.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let S=0;S<m.length&&S<b.length;++S){const N=Bt(m[S],b[S]);if(0!==N)return N;const H=Ac(l[m[S]],w[b[S]]);if(0!==H)return H}return Bt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw it()}}function sT(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Bt(n,e);const t=fu(n),r=fu(e),s=Bt(t.seconds,r.seconds);return 0!==s?s:Bt(t.nanos,r.nanos)}function Gp(n){return LI(n)}function LI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=fu(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ws(n.bytesValue).toBase64():"referenceValue"in n?Ke.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=LI(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of s)l?l=!1:u+=",",u+=`${m}:${LI(r.fields[m])}`;return u+"}"}(n.mapValue):it();var e}function Ah(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function l0(n){return!!n&&"integerValue"in n}function Mc(n){return!!n&&"arrayValue"in n}function VI(n){return!!n&&"nullValue"in n}function UI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zp(n){return!!n&&"mapValue"in n}function Lo(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Sc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Lo(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Lo(n.arrayValue.values[t]);return e}return Object.assign({},n)}function d0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function h0(n){return"nullValue"in n?u0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ah(Xl.empty(),Ke.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function f0(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ah(Xl.empty(),Ke.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ed:it()}function BI(n,e){const t=Ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function oy(n,e){const t=Ac(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!zp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lo(t)}setAll(e){let t=pr.emptyPath(),r={},s=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=m.popLast()}l?r[m.lastSegment()]=Lo(l):s.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());zp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];zp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Sc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Vr(Lo(this.value))}}function qp(n){const e=[];return Sc(n.fields,(t,r)=>{const s=new pr([t]);if(zp(r)){const u=qp(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Cs(e)}class Hn{constructor(e,t,r,s,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Hn(e,0,yt.min(),yt.min(),yt.min(),Vr.empty(),0)}static newFoundDocument(e,t,r,s){return new Hn(e,1,t,yt.min(),r,s,0)}static newNoDocument(e,t){return new Hn(e,2,t,yt.min(),yt.min(),Vr.empty(),0)}static newUnknownDocument(e,t){return new Hn(e,3,t,yt.min(),yt.min(),Vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(yt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=yt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class td{constructor(e,t){this.position=e,this.inclusive=t}}function oT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?Ke.comparator(Ke.fromName(l.referenceValue),t.key):Ac(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function aT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ea(n.position[t],e.position[t]))return!1;return!0}class nd{constructor(e,t="asc"){this.field=e,this.dir=t}}function uT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class jI{}class tn extends jI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new HI(e,t,r):"array-contains"===t?new IM(e,r):"in"===t?new dT(e,r):"not-in"===t?new hT(e,r):"array-contains-any"===t?new fT(e,r):new tn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new m0(e,r):new lT(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ac(t,this.value)):null!==t&&pu(this.value)===pu(t)&&this.matchesComparison(Ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wn extends jI{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new wn(e,t)}matches(e){return rd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rd(n){return"and"===n.op}function ay(n){return"or"===n.op}function uy(n){return $I(n)&&rd(n)}function $I(n){for(const e of n.filters)if(e instanceof wn)return!1;return!0}function p0(n){if(n instanceof tn)return n.field.canonicalString()+n.op.toString()+Gp(n.value);if(uy(n))return n.filters.map(e=>p0(e)).join(",");{const e=n.filters.map(t=>p0(t)).join(",");return`${n.op}(${e})`}}function g0(n,e){return n instanceof tn?(t=n,(r=e)instanceof tn&&t.op===r.op&&t.field.isEqual(r.field)&&Ea(t.value,r.value)):n instanceof wn?function(t,r){return r instanceof wn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&g0(u,r.filters[l]),!0)}(n,e):void it();var t,r}function cy(n,e){const t=n.filters.concat(e);return wn.create(t,n.op)}function cT(n){return n instanceof tn?`${(e=n).field.canonicalString()} ${e.op} ${Gp(e.value)}`:n instanceof wn?function(e){return e.op.toString()+" {"+e.getFilters().map(cT).join(" ,")+"}"}(n):"Filter";var e}class HI extends tn{constructor(e,t,r){super(e,t,r),this.key=Ke.fromName(r.referenceValue)}matches(e){const t=Ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class m0 extends tn{constructor(e,t){super(e,"in",t),this.keys=GI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class lT extends tn{constructor(e,t){super(e,"not-in",t),this.keys=GI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function GI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ke.fromName(r.referenceValue))}class IM extends tn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mc(t)&&Hp(t.arrayValue,this.value)}}class dT extends tn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Hp(this.value.arrayValue,t)}}class hT extends tn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Hp(this.value.arrayValue,t)}}class fT extends tn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Hp(this.value.arrayValue,r))}}class pT{constructor(e,t=null,r=[],s=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=m,this.dt=null}}function zI(n,e=null,t=[],r=[],s=null,u=null,l=null){return new pT(n,e,t,r,s,u,l)}function Mh(n){const e=Qe(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>p0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ty(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gp(r)).join(",")),e.dt=t}return e.dt}function ly(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!uT(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!g0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!aT(n.startAt,e.startAt)&&aT(n.endAt,e.endAt)}function y0(n){return Ke.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function dy(n,e){return n.filters.filter(t=>t instanceof tn&&t.field.isEqual(e))}function gT(n,e,t){let r=u0,s=!0;for(const u of dy(n,e)){let l=u0,m=!0;switch(u.op){case"<":case"<=":l=h0(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=u0}BI({value:r,inclusive:s},{value:l,inclusive:m})<0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];BI({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}function mT(n,e,t){let r=ed,s=!0;for(const u of dy(n,e)){let l=ed,m=!0;switch(u.op){case">=":case">":l=f0(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=ed}oy({value:r,inclusive:s},{value:l,inclusive:m})>0&&(r=l,s=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];oy({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}return{value:r,inclusive:s}}class xc{constructor(e,t=null,r=[],s=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.wt=null,this._t=null}}function yT(n,e,t,r,s,u,l,m){return new xc(n,e,t,r,s,u,l,m)}function Wp(n){return new xc(n)}function vT(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function i(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function o(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function a(n){return null!==n.collectionGroup}function c(n){const e=Qe(n);if(null===e.wt){e.wt=[];const t=o(e),r=i(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new nd(t)),e.wt.push(new nd(pr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new nd(pr.keyField(),u))}}}return e.wt}function d(n){const e=Qe(n);if(!e._t)if("F"===e.limitType)e._t=zI(e.path,e.collectionGroup,c(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of c(e))t.push(new nd(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new td(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new td(e.startAt.position,e.startAt.inclusive):null;e._t=zI(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function g(n,e){e.getFirstInequalityField(),o(n);const t=n.filters.concat([e]);return new xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function v(n,e,t){return new xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function I(n,e){return ly(d(n),d(e))&&n.limitType===e.limitType}function C(n){return`${Mh(d(n))}|lt:${n.limitType}`}function M(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>cT(r)).join(", ")}]`),ty(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Gp(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Gp(r)).join(",")),`Target(${t})`}(d(n))}; limitType=${n.limitType})`}function R(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):Ke.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of c(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const m=oT(s,u,l);return s.inclusive?m<=0:m<0}(t.startAt,c(t),r)||t.endAt&&!function(s,u,l){const m=oT(s,u,l);return s.inclusive?m>=0:m>0}(t.endAt,c(t),r)));var t,r}function F(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function G(n){return(e,t)=>{let r=!1;for(const s of c(n)){const u=J(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function J(n,e,t){const r=n.field.isKeyField()?Ke.comparator(e.key,t.key):function(s,u,l){const m=u.data.field(s),w=l.data.field(s);return null!==m&&null!==w?Ac(m,w):it()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return it()}}class de{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Sc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return PI(this.inner)}size(){return this.innerSize}}const Le=new xn(Ke.comparator);function Ve(){return Le}const ct=new xn(Ke.comparator);function It(...n){let e=ct;for(const t of n)e=e.insert(t.key,t);return e}function Se(n){let e=ct;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function bt(){return Fn()}function kn(){return Fn()}function Fn(){return new de(n=>n.toString(),(n,e)=>n.isEqual(e))}const DM=new xn(Ke.comparator),WN=new Rn(Ke.comparator);function Zt(...n){let e=WN;for(const t of n)e=e.add(t);return e}const ZN=new Rn(Bt);function _T(){return ZN}function CM(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Up(e)?"-0":e}}function bM(n){return{integerValue:""+n}}function TM(n,e){return t0(e)?bM(e):CM(n,e)}class qI{constructor(){this._=void 0}}function KN(n,e,t){return n instanceof hy?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Jl(s)&&(s=jp(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Zp?AM(n,e):n instanceof Kp?MM(n,e):function(r,s){const u=SM(r,s),l=xM(u)+xM(r.gt);return l0(u)&&l0(r.gt)?bM(l):CM(r.serializer,l)}(n,e)}function YN(n,e,t){return n instanceof Zp?AM(n,e):n instanceof Kp?MM(n,e):t}function SM(n,e){return n instanceof fy?l0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class hy extends qI{}class Zp extends qI{constructor(e){super(),this.elements=e}}function AM(n,e){const t=RM(e);for(const r of n.elements)t.some(s=>Ea(s,r))||t.push(r);return{arrayValue:{values:t}}}class Kp extends qI{constructor(e){super(),this.elements=e}}function MM(n,e){let t=RM(e);for(const r of n.elements)t=t.filter(s=>!Ea(s,r));return{arrayValue:{values:t}}}class fy extends qI{constructor(e,t){super(),this.serializer=e,this.gt=t}}function xM(n){return Yn(n.integerValue||n.doubleValue)}function RM(n){return Mc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class v0{constructor(e,t){this.field=e,this.transform=t}}class JN{constructor(e,t){this.version=e,this.transformResults=t}}class ir{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function WI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ZI{}function NM(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new gy(n.key,ir.none()):new py(n.key,n.data,ir.none());{const t=n.data,r=Vr.empty();let s=new Rn(pr.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new id(n.key,r,new Cs(s.toArray()),ir.none())}}function XN(n,e,t){n instanceof py?function(r,s,u){const l=r.value.clone(),m=kM(r.fieldTransforms,s,u.transformResults);l.setAll(m),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof id?function(r,s,u){if(!WI(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=kM(r.fieldTransforms,s,u.transformResults),m=s.data;m.setAll(OM(r)),m.setAll(l),s.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _0(n,e,t,r){return n instanceof py?function(s,u,l,m){if(!WI(s.precondition,u))return l;const w=s.value.clone(),b=FM(s.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof id?function(s,u,l,m){if(!WI(s.precondition,u))return l;const w=FM(s.fieldTransforms,m,u),b=u.data;return b.setAll(OM(s)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,WI(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function e1(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=SM(r.transform,s||null);null!=u&&(null===t&&(t=Vr.empty()),t.set(r.field,u))}return t||null}function PM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Yl(t,r,(s,u)=>function QN(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Zp&&r instanceof Zp||t instanceof Kp&&r instanceof Kp?Yl(t.elements,r.elements,Ea):t instanceof fy&&r instanceof fy?Ea(t.gt,r.gt):t instanceof hy&&r instanceof hy);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class py extends ZI{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class id extends ZI{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function OM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kM(n,e,t){const r=new Map;gt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,m=e.data.field(u.field);r.set(u.field,YN(l,m,t[s]))}return r}function FM(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,KN(u,l,e))}return r}class gy extends ZI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wT extends ZI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ET{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&XN(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_0(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_0(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=kn();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(s.key)?null:m;const w=NM(l,m);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(yt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Zt())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,(t,r)=>PM(t,r))&&Yl(this.baseMutations,e.baseMutations,(t,r)=>PM(t,r))}}class IT{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){gt(e.mutations.length===r.length);let s=DM;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new IT(e,t,r,s)}}class DT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class n1{constructor(e,t){this.count=e,this.unchangedNames=t}}var Jr,fn;function LM(n){switch(n){default:return it();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function VM(n){if(void 0===n)return fr("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Jr.OK:return oe.OK;case Jr.CANCELLED:return oe.CANCELLED;case Jr.UNKNOWN:return oe.UNKNOWN;case Jr.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Jr.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Jr.INTERNAL:return oe.INTERNAL;case Jr.UNAVAILABLE:return oe.UNAVAILABLE;case Jr.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Jr.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Jr.NOT_FOUND:return oe.NOT_FOUND;case Jr.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Jr.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Jr.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Jr.ABORTED:return oe.ABORTED;case Jr.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Jr.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Jr.DATA_LOSS:return oe.DATA_LOSS;default:return it()}}(fn=Jr||(Jr={}))[fn.OK=0]="OK",fn[fn.CANCELLED=1]="CANCELLED",fn[fn.UNKNOWN=2]="UNKNOWN",fn[fn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fn[fn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fn[fn.NOT_FOUND=5]="NOT_FOUND",fn[fn.ALREADY_EXISTS=6]="ALREADY_EXISTS",fn[fn.PERMISSION_DENIED=7]="PERMISSION_DENIED",fn[fn.UNAUTHENTICATED=16]="UNAUTHENTICATED",fn[fn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fn[fn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fn[fn.ABORTED=10]="ABORTED",fn[fn.OUT_OF_RANGE=11]="OUT_OF_RANGE",fn[fn.UNIMPLEMENTED=12]="UNIMPLEMENTED",fn[fn.INTERNAL=13]="INTERNAL",fn[fn.UNAVAILABLE=14]="UNAVAILABLE",fn[fn.DATA_LOSS=15]="DATA_LOSS";class CT{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return KI}static getOrCreateInstance(){return null===KI&&(KI=new CT),KI}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let KI=null;function UM(){return new TextEncoder}const r1=new bh([4294967295,4294967295],0);function BM(n){const e=UM().encode(n),t=new Bb;return t.update(e),new Uint8Array(t.digest())}function jM(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new bh([t,r],0),new bh([s,u],0)]}class bT{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new w0(`Invalid padding: ${t}`);if(r<0)throw new w0(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new w0(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new w0(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=bh.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(bh.fromNumber(r)));return 1===s.compare(r1)&&(s=new bh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=BM(e),[r,s]=jM(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new bT(u,s,t);return r.forEach(m=>l.insert(m)),l}insert(e){if(0===this.It)return;const t=BM(e),[r,s]=jM(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class w0 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class E0{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,I0.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new E0(yt.min(),s,new xn(Bt),Ve(),Zt())}}class I0{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new I0(r,t,Zt(),Zt(),Zt())}}class YI{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class $M{constructor(e,t){this.targetId=e,this.Vt=t}}class HM{constructor(e,t,r=Er.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class GM{constructor(){this.St=0,this.Dt=qM(),this.Ct=Er.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Zt(),t=Zt(),r=Zt();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:it()}}),new I0(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=qM()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class i1{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ve(),this.zt=zM(),this.Wt=new xn(Bt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(y0(l))if(0===s){const m=new Ke(l.path);this.Yt(r,m,Hn.newNoDocument(m,yt.min()))}else gt(1===s);else{const m=this.ie(r);if(m!==s){const w=this.re(e,m);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=CT.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,S,N){var H,K,me,Fe,ke,Dt;const At={localCacheCount:S,existenceFilterCount:N.count},wt=N.unchangedNames;return wt&&(At.bloomFilter={applied:0===b,hashCount:null!==(H=wt?.hashCount)&&void 0!==H?H:0,bitmapLength:null!==(Fe=null===(me=null===(K=wt?.bits)||void 0===K?void 0:K.bitmap)||void 0===me?void 0:me.length)&&void 0!==Fe?Fe:0,padding:null!==(Dt=null===(ke=wt?.bits)||void 0===ke?void 0:ke.padding)&&void 0!==Dt?Dt:0}),At}(w,m,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:m=0}=r;let w,b;try{w=Ws(u).toUint8Array()}catch(S){if(S instanceof sy)return Is("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw S}try{b=new bT(w,l,m)}catch(S){return Is(S instanceof w0?"BloomFilter error: ":"Applying bloom filter failed: ",S),1}return 0===b.It?1:s!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),m=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(m)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const m=this.se(l);if(m){if(u.current&&y0(m.target)){const w=new Ke(m.target.path);null!==this.jt.get(w)||this.ae(l,w)||this.Yt(l,w,Hn.newNoDocument(w,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=Zt();this.zt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.se(w);return!b||"TargetPurposeLimboResolution"===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new E0(e,t,this.Wt,this.jt,r);return this.jt=Ve(),this.zt=zM(),this.Wt=new xn(Bt),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new GM,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Rn(Bt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new GM),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function zM(){return new xn(Ke.comparator)}function qM(){return new xn(Ke.comparator)}const s1={asc:"ASCENDING",desc:"DESCENDING"},o1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},a1={and:"AND",or:"OR"};class u1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function TT(n,e){return n.useProto3Json||ty(e)?e:{value:e}}function my(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function c1(n,e){return my(n,e.toTimestamp())}function Ur(n){return gt(!!n),yt.fromTimestamp(function(e){const t=fu(e);return new On(t.seconds,t.nanos)}(n))}function ST(n,e){return(t=n,new ln(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function ZM(n){const e=ln.fromString(n);return gt(rx(e)),e}function D0(n,e){return ST(n.databaseId,e.path)}function Rc(n,e){const t=ZM(e);if(t.get(1)!==n.databaseId.projectId)throw new De(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ke(YM(t))}function AT(n,e){return ST(n.databaseId,e)}function KM(n){const e=ZM(n);return 4===e.length?ln.emptyPath():YM(e)}function C0(n){return new ln(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function YM(n){return gt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function QM(n,e,t){return{name:D0(n,e),fields:t.value.mapValue.fields}}function JM(n,e,t){const r=Rc(n,e.name),s=Ur(e.updateTime),u=e.createTime?Ur(e.createTime):yt.min(),l=new Vr({mapValue:{fields:e.fields}}),m=Hn.newFoundDocument(r,s,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function b0(n,e){let t;if(e instanceof py)t={update:QM(n,e.key,e.value)};else if(e instanceof gy)t={delete:D0(n,e.key)};else if(e instanceof id)t={update:QM(n,e.key,e.data),updateMask:y1(e.fieldMask)};else{if(!(e instanceof wT))return it();t={verify:D0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof hy)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zp)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Kp)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fy)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw it()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:c1(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:it()),t;var s}function MT(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?ir.updateTime(Ur(s.updateTime)):void 0!==s.exists?ir.exists(s.exists):ir.none():ir.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(u,l){let m=null;"setToServerValue"in l?(gt("REQUEST_TIME"===l.setToServerValue),m=new hy):"appendMissingElements"in l?m=new Zp(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new Kp(l.removeAllFromArray.values||[]):"increment"in l?m=new fy(u,l.increment):it();const w=pr.fromServerFormat(l.fieldPath);return new v0(w,m)}(n,s)):[];var s;if(e.update){const s=Rc(n,e.update.name),u=new Vr({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Cs((e.updateMask.fieldPaths||[]).map(b=>pr.fromServerFormat(b)));return new id(s,u,l,t,r)}return new py(s,u,t,r)}if(e.delete){const s=Rc(n,e.delete);return new gy(s,t)}if(e.verify){const s=Rc(n,e.verify);return new wT(s,t)}return it()}function XM(n,e){return{documents:[AT(n,e.path)]}}function xT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=AT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=AT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return nx(wn.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:xh((S=b).field),direction:p1(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=TT(n,e.limit);var m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function ex(n){let e=KM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){gt(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const N=tx(S);return N instanceof wn&&uy(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new nd(yy((N=S).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(S){let N;return N="object"==typeof S?S.value:S,ty(N)?null:N}(t.limit));let w=null;var S;t.startAt&&(w=new td((S=t.startAt).values||[],!!S.before));let b=null;return t.endAt&&(b=function(S){return new td(S.values||[],!S.before)}(t.endAt)),yT(e,s,l,u,m,"F",w,b)}function tx(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yy(e.unaryFilter.field);return tn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=yy(e.unaryFilter.field);return tn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=yy(e.unaryFilter.field);return tn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=yy(e.unaryFilter.field);return tn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(n):void 0!==n.fieldFilter?tn.create(yy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return wn.create(e.compositeFilter.filters.map(t=>tx(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(n):it();var e}function p1(n){return s1[n]}function g1(n){return o1[n]}function m1(n){return a1[n]}function xh(n){return{fieldPath:n.canonicalString()}}function yy(n){return pr.fromServerFormat(n.fieldPath)}function nx(n){return n instanceof tn?function(e){if("=="===e.op){if(UI(e.value))return{unaryFilter:{field:xh(e.field),op:"IS_NAN"}};if(VI(e.value))return{unaryFilter:{field:xh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(UI(e.value))return{unaryFilter:{field:xh(e.field),op:"IS_NOT_NAN"}};if(VI(e.value))return{unaryFilter:{field:xh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xh(e.field),op:g1(e.op),value:e.value}}}(n):n instanceof wn?function(e){const t=e.getFilters().map(r=>nx(r));return 1===t.length?t[0]:{compositeFilter:{op:m1(e.op),filters:t}}}(n):it()}function y1(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function rx(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class sd{constructor(e,t,r,s,u=yt.min(),l=yt.min(),m=Er.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m,this.expectedCount=w}withSequenceNumber(e){return new sd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ix{constructor(e){this.fe=e}}function sx(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:QI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:D0(s=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:my(s,u.version.toTimestamp()),createTime:my(s,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yp(e.version)};else{if(!e.isUnknownDocument())return it();r.unknownDocument={path:t.path.toArray(),version:Yp(e.version)}}var s,u;return r}function QI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Qp(n){const e=new On(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function Jp(n,e){const t=(e.baseMutations||[]).map(u=>MT(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>MT(n.fe,u)),s=On.fromMillis(e.localWriteTimeMs);return new ET(e.batchId,s,t,r)}function T0(n){const e=Qp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Qp(n.lastLimboFreeSnapshotVersion):yt.min();let r;var s;return void 0!==n.query.documents?(gt(1===(s=n.query).documents.length),r=d(Wp(KM(s.documents[0])))):r=d(ex(n.query)),new sd(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Er.fromBase64String(n.resumeToken))}function ox(n,e){const t=Yp(e.snapshotVersion),r=Yp(e.lastLimboFreeSnapshotVersion);let s;s=y0(e.target)?XM(n.fe,e.target):xT(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mh(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function RT(n){const e=ex({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?v(e,e.limit,"L"):e}function NT(n,e){return new DT(e.largestBatchId,MT(n.fe,e.overlayMutation))}function ax(n,e){const t=e.path.lastSegment();return[n,ui(e.path.popLast()),t]}function ux(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Yp(r.readTime),documentKey:ui(r.documentKey.path),largestBatchId:r.largestBatchId}}class _1{getBundleMetadata(e,t){return cx(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Qp(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return cx(e).put({bundleId:(r=t).id,createTime:Yp(Ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return lx(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:RT(s.bundledQuery),readTime:Qp(s.readTime)};var s})}saveNamedQuery(e,t){return lx(e).put({name:(r=t).name,readTime:Yp(Ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function cx(n){return ci(n,"bundles")}function lx(n){return ci(n,"namedQueries")}class JI{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new JI(e,t.uid||"")}getOverlay(e,t){return S0(e).get(ax(this.userId,t)).next(r=>r?NT(this.serializer,r):null)}getOverlays(e,t){const r=bt();return ee.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){const s=[];return r.forEach((u,l)=>{const m=new DT(t,l);s.push(this.we(e,m))}),ee.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach(l=>s.add(ui(l.getCollectionPath())));const u=[];return s.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(S0(e).J("collectionPathOverlayIndex",m))}),ee.waitFor(u)}getOverlaysForCollection(e,t,r){const s=bt(),u=ui(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return S0(e).j("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=NT(this.serializer,w);s.set(b.getKey(),b)}return s})}getOverlaysForCollectionGroup(e,t,r,s){const u=bt();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return S0(e).X({index:"collectionGroupOverlayIndex",range:m},(w,b,S)=>{const N=NT(this.serializer,b);u.size()<s||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):S.done()}).next(()=>u)}we(e,t){return S0(e).put(function(r,s,u){const[l,m,w]=ax(s,u.mutation.key);return{userId:s,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:b0(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function S0(n){return ci(n,"documentOverlays")}class Xp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Up(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ws(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?d0(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):it()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),Ke.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function w1(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function dx(n){const e=64-function(t){let r=0;for(let s=0;s<8;++s){const u=w1(255&t[s]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Xp.Ve=new Xp;class E1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const s=t.codePointAt(0);this.De(240|s>>>18),this.De(128|63&s>>>12),this.De(128|63&s>>>6),this.De(128|63&s)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const s=t.codePointAt(0);this.Ne(240|s>>>18),this.Ne(128|63&s>>>12),this.Ne(128|63&s>>>6),this.Ne(128|63&s)}}this.ke()}Oe(e){const t=this.Fe(e),r=dx(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Le(e){const t=this.Fe(e),r=dx(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(s){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,s,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class I1{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class D1{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class A0{constructor(){this.je=new E1,this.ze=new I1(this.je),this.We=new D1(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class eg{constructor(e,t,r,s){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=s}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new eg(this.indexId,this.documentKey,this.arrayValue,r)}}function Rh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=hx(n.arrayValue,e.arrayValue),0!==t?t:(t=hx(n.directionalValue,e.directionalValue),0!==t?t:Ke.comparator(n.documentKey,e.documentKey)))}function hx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class C1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){gt(e.collectionGroup===this.collectionId);const t=CI(e);if(void 0!==t&&!this.en(t))return!1;const r=Th(e);let s=0,u=0;for(;s<r.length&&this.en(r[s]);++s);if(s===r.length)return!0;if(void 0!==this.Ze){const l=r[s];if(!this.nn(this.Ze,l)||!this.sn(this.Ye[u++],l))return!1;++s}for(;s<r.length;++s)if(u>=this.Ye.length||!this.sn(this.Ye[u++],r[s]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function fx(n){var e,t;if(gt(n instanceof tn||n instanceof wn),n instanceof tn){if(n instanceof dT){const s=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>tn.create(n.field,"==",u)))||[];return wn.create(s,"or")}return n}const r=n.filters.map(s=>fx(s));return wn.create(r,n.op)}function b1(n){if(0===n.getFilters().length)return[];const e=kT(fx(n));return gt(px(e)),PT(e)||OT(e)?[e]:e.getFilters()}function PT(n){return n instanceof tn}function OT(n){return n instanceof wn&&uy(n)}function px(n){return PT(n)||OT(n)||function(e){if(e instanceof wn&&ay(e)){for(const t of e.getFilters())if(!PT(t)&&!OT(t))return!1;return!0}return!1}(n)}function kT(n){if(gt(n instanceof tn||n instanceof wn),n instanceof tn)return n;if(1===n.filters.length)return kT(n.filters[0]);const e=n.filters.map(r=>kT(r));let t=wn.create(e,n.op);return t=XI(t),px(t)?t:(gt(t instanceof wn),gt(rd(t)),gt(t.filters.length>1),t.filters.reduce((r,s)=>FT(r,s)))}function FT(n,e){let t;return gt(n instanceof tn||n instanceof wn),gt(e instanceof tn||e instanceof wn),t=n instanceof tn?e instanceof tn?wn.create([n,e],"and"):gx(n,e):e instanceof tn?gx(e,n):function(r,s){if(gt(r.filters.length>0&&s.filters.length>0),rd(r)&&rd(s))return cy(r,s.getFilters());const u=ay(r)?r:s,l=ay(r)?s:r,m=u.filters.map(w=>FT(w,l));return wn.create(m,"or")}(n,e),XI(t)}function gx(n,e){if(rd(e))return cy(e,n.getFilters());{const t=e.filters.map(r=>FT(n,r));return wn.create(t,"or")}}function XI(n){if(gt(n instanceof tn||n instanceof wn),n instanceof tn)return n;const e=n.getFilters();if(1===e.length)return XI(e[0]);if($I(n))return n;const t=e.map(s=>XI(s)),r=[];return t.forEach(s=>{s instanceof tn?r.push(s):s instanceof wn&&(s.op===n.op?r.push(...s.filters):r.push(s))}),1===r.length?r[0]:wn.create(r,n.op)}class T1{constructor(){this.rn=new LT}addToCollectionParentIndex(e,t){return this.rn.add(t),ee.resolve()}getCollectionParents(e,t){return ee.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ee.resolve()}deleteFieldIndex(e,t){return ee.resolve()}getDocumentsMatchingTarget(e,t){return ee.resolve(null)}getIndexType(e,t){return ee.resolve(0)}getFieldIndexes(e,t){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,t){return ee.resolve(Ai.min())}getMinOffsetFromCollectionGroup(e,t){return ee.resolve(Ai.min())}updateCollectionGroup(e,t,r){return ee.resolve()}updateIndexEntries(e,t){return ee.resolve()}}class LT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Rn(ln.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Rn(ln.comparator)).toArray()}}const eD=new Uint8Array(0);class S1{constructor(e,t){this.user=e,this.databaseId=t,this.on=new LT,this.un=new de(r=>Mh(r),(r,s)=>ly(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:ui(s)};return mx(e).put(u)}return ee.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[K_(t),""],!1,!0);return mx(e).j(s).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(_a(l.parent))}return r})}addFieldIndex(e,t){const r=tD(e),s={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete s.indexId;const u=r.add(s);if(t.indexState){const l=x0(e);return u.next(m=>{l.put(ux(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=tD(e),s=x0(e),u=M0(e);return r.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=M0(e);let s=!0;const u=new Map;return ee.forEach(this.cn(t),l=>this.an(e,l).next(m=>{s&&(s=!!m),u.set(l,m)})).next(()=>{if(s){let l=Zt();const m=[];return ee.forEach(u,(w,b)=>{var S;Pe("IndexedDbIndexManager",`Using index ${S=w,`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map(wt=>`${wt.fieldPath}:${wt.kind}`).join(",")}`} to execute ${Mh(t)}`);const N=function(wt,Ft){const Wt=CI(Ft);if(void 0===Wt)return null;for(const dn of dy(wt,Wt.fieldPath))switch(dn.op){case"array-contains-any":return dn.value.arrayValue.values||[];case"array-contains":return[dn.value]}return null}(b,w),H=function(wt,Ft){const Wt=new Map;for(const dn of Th(Ft))for(const is of dy(wt,dn.fieldPath))switch(is.op){case"==":case"in":Wt.set(dn.fieldPath.canonicalString(),is.value);break;case"not-in":case"!=":return Wt.set(dn.fieldPath.canonicalString(),is.value),Array.from(Wt.values())}return null}(b,w),K=function(wt,Ft){const Wt=[];let dn=!0;for(const is of Th(Ft)){const lg=0===is.kind?gT(wt,is.fieldPath,wt.startAt):mT(wt,is.fieldPath,wt.startAt);Wt.push(lg.value),dn&&(dn=lg.inclusive)}return new td(Wt,dn)}(b,w),me=function(wt,Ft){const Wt=[];let dn=!0;for(const is of Th(Ft)){const lg=0===is.kind?mT(wt,is.fieldPath,wt.endAt):gT(wt,is.fieldPath,wt.endAt);Wt.push(lg.value),dn&&(dn=lg.inclusive)}return new td(Wt,dn)}(b,w),Fe=this.hn(w,b,K),ke=this.hn(w,b,me),Dt=this.ln(w,b,H),At=this.fn(w.indexId,N,Fe,K.inclusive,ke,me.inclusive,Dt);return ee.forEach(At,wt=>r.H(wt,t.limit).next(Ft=>{Ft.forEach(Wt=>{const dn=Ke.fromSegments(Wt.documentKey);l.has(dn)||(l=l.add(dn),m.push(dn))})}))}).next(()=>m)}return ee.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:b1(wn.create(e.filters,"and")).map(r=>zI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,s,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),S=[];for(let N=0;N<w;++N){const H=t?this.dn(t[N/b]):eD,K=this.wn(e,H,r[N%b],s),me=this._n(e,H,u[N%b],l),Fe=m.map(ke=>this.wn(e,H,ke,!0));S.push(...this.createRange(K,me,Fe))}return S}wn(e,t,r,s){const u=new eg(e,Ke.empty(),t,r);return s?u:u.Je()}_n(e,t,r,s){const u=new eg(e,Ke.empty(),t,r);return s?u.Je():u}an(e,t){const r=new C1(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(u=>{let l=null;for(const m of u)r.tn(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const s=this.cn(t);return ee.forEach(s,u=>this.an(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new Rn(pr.comparator),b=!1;for(const S of m.filters)for(const N of S.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:w=w.add(N.field));for(const S of m.orderBy)S.field.isKeyField()||(w=w.add(S.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&s.length>1&&2===r?1:r)}mn(e,t){const r=new A0;for(const s of Th(e)){const u=t.data.field(s.fieldPath);if(null==u)return null;const l=r.He(s.kind);Xp.Ve._e(u,l)}return r.Qe()}dn(e){const t=new A0;return Xp.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new A0;return Xp.Ve._e(Ah(this.databaseId,t),r.He(function(s){const u=Th(s);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let s=[];s.push(new A0);let u=0;for(const l of Th(e)){const m=r[u++];for(const w of s)if(this.yn(t,l.fieldPath)&&Mc(m))s=this.pn(s,l,m);else{const b=w.He(l.kind);Xp.Ve._e(m,b)}}return this.In(s)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const s=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of s){const w=new A0;w.seed(m.Qe()),Xp.Ve._e(l,w.He(t.kind)),u.push(w)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof tn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=tD(e),s=x0(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const l=[];return ee.forEach(u,m=>s.get([m.indexId,this.uid]).next(w=>{l.push(function(b,S){const N=S?new bc(S.sequenceNumber,new Ai(Qp(S.readTime),new Ke(_a(S.documentKey)),S.largestBatchId)):bc.empty(),H=b.fields.map(([K,me])=>new Q_(pr.fromServerFormat(K),me));return new Y_(b.indexId,b.collectionGroup,H,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,s)=>{const u=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==u?u:Bt(r.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const s=tD(e),u=x0(e);return this.Tn(e).next(l=>s.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ee.forEach(m,w=>u.put(ux(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ee.forEach(t,(s,u)=>{const l=r.get(s.collectionGroup);return(l?ee.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next(m=>(r.set(s.collectionGroup,m),ee.forEach(m,w=>this.En(e,s,w).next(b=>{const S=this.An(u,w);return b.isEqual(S)?ee.resolve():this.vn(e,u,w,b,S)}))))})}Rn(e,t,r,s){return M0(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,s){return M0(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const s=M0(e);let u=new Rn(Rh);return s.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,m)=>{u=u.add(new eg(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}An(e,t){let r=new Rn(Rh);const s=this.mn(t,e);if(null==s)return r;const u=CI(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Mc(l))for(const m of l.arrayValue.values||[])r=r.add(new eg(t.indexId,e.key,this.dn(m),s))}else r=r.add(new eg(t.indexId,e.key,eD,s));return r}vn(e,t,r,s,u){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,S,N){const H=m.getIterator(),K=w.getIterator();let me=Ql(H),Fe=Ql(K);for(;me||Fe;){let ke=!1,Dt=!1;if(me&&Fe){const At=b(me,Fe);At<0?Dt=!0:At>0&&(ke=!0)}else null!=me?Dt=!0:ke=!0;ke?(S(Fe),Fe=Ql(K)):Dt?(N(me),me=Ql(H)):(me=Ql(H),Fe=Ql(K))}}(s,u,Rh,m=>{l.push(this.Rn(e,t,r,m))},m=>{l.push(this.Pn(e,t,r,m))}),ee.waitFor(l)}Tn(e){let t=1;return x0(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,u)=>{u.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>Rh(l,m)).filter((l,m,w)=>!m||0!==Rh(l,w[m-1]));const s=[];s.push(e);for(const l of r){const m=Rh(l,e),w=Rh(l,t);if(0===m)s[0]=e.Je();else if(m>0&&w<0)s.push(l),s.push(l.Je());else if(w>0)break}s.push(t);const u=[];for(let l=0;l<s.length;l+=2){if(this.bn(s[l],s[l+1]))return[];u.push(IDBKeyRange.bound([s[l].indexId,this.uid,s[l].arrayValue,s[l].directionalValue,eD,[]],[s[l+1].indexId,this.uid,s[l+1].arrayValue,s[l+1].directionalValue,eD,[]]))}return u}bn(e,t){return Rh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yx)}getMinOffset(e,t){return ee.mapArray(this.cn(t),r=>this.an(e,r).next(s=>s||it())).next(yx)}}function mx(n){return ci(n,"collectionParents")}function M0(n){return ci(n,"indexEntries")}function tD(n){return ci(n,"indexConfiguration")}function x0(n){return ci(n,"indexState")}function yx(n){gt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Xm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ai(e.readTime,e.documentKey,t)}const vx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function _x(n,e,t){const r=n.store("mutations"),s=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.X({range:l},(S,N,H)=>(m++,H.delete()));u.push(w.next(()=>{gt(1===m)}));const b=[];for(const S of t.mutations){const N=Qb(e,S.key.path,t.batchId);u.push(s.delete(N)),b.push(S.key)}return ee.waitFor(u).next(()=>b)}function nD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(41943040,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class rD{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Vn={}}static de(e,t,r,s){gt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new rD(u,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nh(e).X({index:"userMutationsIndex",range:r},(s,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,s){const u=vy(e),l=Nh(e);return l.add({}).next(m=>{gt("number"==typeof m);const w=new ET(m,t,r,s),b=function(H,K,me){const Fe=me.baseMutations.map(Dt=>b0(H.fe,Dt)),ke=me.mutations.map(Dt=>b0(H.fe,Dt));return{userId:K,batchId:me.batchId,localWriteTimeMs:me.localWriteTime.toMillis(),baseMutations:Fe,mutations:ke}}(this.serializer,this.userId,w),S=[];let N=new Rn((H,K)=>Bt(H.canonicalString(),K.canonicalString()));for(const H of s){const K=Qb(this.userId,H.key.path,m);N=N.add(H.key.path.popLast()),S.push(l.put(b)),S.push(u.put(K,qs))}return N.forEach(H=>{S.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.Vn[m]=w.keys()}),ee.waitFor(S).next(()=>w)})}lookupMutationBatch(e,t){return Nh(e).get(t).next(r=>r?(gt(r.userId===this.userId),Jp(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ee.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const s=r.keys();return this.Vn[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Nh(e).X({index:"userMutationsIndex",range:s},(l,m,w)=>{m.userId===this.userId&&(gt(m.batchId>=r),u=Jp(this.serializer,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Nh(e).X({index:"userMutationsIndex",range:t,reverse:!0},(s,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nh(e).j("userMutationsIndex",t).next(r=>r.map(s=>Jp(this.serializer,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ry(this.userId,t.path),s=IDBKeyRange.lowerBound(r),u=[];return vy(e).X({range:s},(l,m,w)=>{const[b,S,N]=l,H=_a(S);if(b===this.userId&&t.path.isEqual(H))return Nh(e).get(N).next(K=>{if(!K)throw it();gt(K.userId===this.userId),u.push(Jp(this.serializer,K))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(Bt);const s=[];return t.forEach(u=>{const l=ry(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=vy(e).X({range:m},(b,S,N)=>{const[H,K,me]=b,Fe=_a(K);H===this.userId&&u.path.isEqual(Fe)?r=r.add(me):N.done()});s.push(w)}),ee.waitFor(s).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,u=ry(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new Rn(Bt);return vy(e).X({range:l},(w,b,S)=>{const[N,H,K]=w,me=_a(H);N===this.userId&&r.isPrefixOf(me)?me.length===s&&(m=m.add(K)):S.done()}).next(()=>this.Dn(e,m))}Dn(e,t){const r=[],s=[];return t.forEach(u=>{s.push(Nh(e).get(u).next(l=>{if(null===l)throw it();gt(l.userId===this.userId),r.push(Jp(this.serializer,l))}))}),ee.waitFor(s).next(()=>r)}removeMutationBatch(e,t){return _x(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ee.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ee.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return vy(e).X({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=_a(u[1]);s.push(w)}else m.done()}).next(()=>{gt(0===s.length)})})}containsKey(e,t){return wx(e,this.userId,t)}xn(e){return Ex(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function wx(n,e,t){const r=ry(e,t.path),s=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return vy(n).X({range:u,Y:!0},(m,w,b)=>{const[S,N,H]=m;S===e&&N===s&&(l=!0),b.done()}).next(()=>l)}function Nh(n){return ci(n,"mutations")}function vy(n){return ci(n,"documentMutations")}function Ex(n){return ci(n,"mutationQueues")}class tg{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new tg(0)}static Mn(){return new tg(-1)}}class A1{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new tg(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>yt.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.On(e,s)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_y(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(gt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let s=0;const u=[];return _y(e).X((l,m)=>{const w=T0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(s++,u.push(this.removeTargetData(e,w)))}).next(()=>ee.waitFor(u)).next(()=>s)}forEachTarget(e,t){return _y(e).X((r,s)=>{const u=T0(s);t(u)})}$n(e){return Ix(e).get("targetGlobalKey").next(t=>(gt(null!==t),t))}On(e,t){return Ix(e).put("targetGlobalKey",t)}Fn(e,t){return _y(e).put(ox(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Mh(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return _y(e).X({range:s,index:"queryTargetsIndex"},(l,m,w)=>{const b=T0(m);ly(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const s=[],u=Ph(e);return t.forEach(l=>{const m=ui(l.path);s.push(u.put({targetId:r,path:m})),s.push(this.referenceDelegate.addReference(e,r,l))}),ee.waitFor(s)}removeMatchingKeys(e,t,r){const s=Ph(e);return ee.forEach(t,u=>{const l=ui(u.path);return ee.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ph(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=Ph(e);let u=Zt();return s.X({range:r,Y:!0},(l,m,w)=>{const b=_a(l[1]),S=new Ke(b);u=u.add(S)}).next(()=>u)}containsKey(e,t){const r=ui(t.path),s=IDBKeyRange.bound([r],[K_(r)],!1,!0);let u=0;return Ph(e).X({index:"documentTargetsIndex",Y:!0,range:s},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}le(e,t){return _y(e).get(t).next(r=>r?T0(r):null)}}function _y(n){return ci(n,"targets")}function Ix(n){return ci(n,"targetGlobal")}function Ph(n){return ci(n,"targetDocuments")}function Dx([n,e],[t,r]){const s=Bt(n,t);return 0===s?Bt(e,r):s}class M1{constructor(e){this.Ln=e,this.buffer=new Rn(Dx),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Dx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ye.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Fo(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ya(r)}yield t.Qn(3e5)}))}}class x1{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ee.resolve(Ds.ct);const r=new M1(t);return this.jn.forEachTarget(e,s=>r.Kn(s.sequenceNumber)).next(()=>this.jn.Wn(e,s=>r.Kn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(vx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),vx):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,s,u,l,m,w,b;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),s=this.params.maximumSequenceNumbersToCollect):s=N,l=Date.now(),this.nthSequenceNumber(e,s))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),Fp()<=lu.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-S}ms\n\tDetermined least recently used ${s} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-S}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:u,documentsRemoved:N})))}}class R1{constructor(e,t){this.db=e,this.garbageCollector=function bx(n,e){return new x1(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,s)=>t(s))}addReference(e,t,r){return iD(e,r)}removeReference(e,t,r){return iD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iD(e,t)}Xn(e,t){return function(r,s){let u=!1;return Ex(r).Z(l=>wx(r,l,s).next(m=>(m&&(u=!0),ee.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let u=0;return this.Yn(e,(l,m)=>{if(m<=t){const w=this.Xn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,yt.min()),Ph(e).delete([0,ui(l.path)])))});s.push(w)}}).next(()=>ee.waitFor(s)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iD(e,t)}Yn(e,t){const r=Ph(e);let s,u=Ds.ct;return r.X({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==Ds.ct&&t(new Ke(_a(s)),u),u=b,s=w):u=Ds.ct}).next(()=>{u!==Ds.ct&&t(new Ke(_a(s)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iD(n,e){return Ph(n).put((r=n.currentSequenceNumber,{targetId:0,path:ui(e.path),sequenceNumber:r}));var r}class Tx{constructor(){this.changes=new de(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ee.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class N1{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ng(e).put(r)}removeEntry(e,t,r){return ng(e).delete(function(s,u){const l=s.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],QI(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Hn.newInvalidDocument(t);return ng(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(R0(t))},(s,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Hn.newInvalidDocument(t)};return ng(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(R0(t))},(s,u)=>{r={document:this.ts(t,u),size:nD(u)}}).next(()=>r)}getEntries(e,t){let r=Ve();return this.ns(e,t,(s,u)=>{const l=this.ts(s,u);r=r.insert(s,l)}).next(()=>r)}ss(e,t){let r=Ve(),s=new xn(Ke.comparator);return this.ns(e,t,(u,l)=>{const m=this.ts(u,l);r=r.insert(u,m),s=s.insert(u,nD(l))}).next(()=>({documents:r,rs:s}))}ns(e,t,r){if(t.isEmpty())return ee.resolve();let s=new Rn(xx);t.forEach(w=>s=s.add(w));const u=IDBKeyRange.bound(R0(s.first()),R0(s.last())),l=s.getIterator();let m=l.getNext();return ng(e).X({index:"documentKeyIndex",range:u},(w,b,S)=>{const N=Ke.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&xx(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?S.G(R0(m)):S.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,s){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),QI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ng(e).j(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=Ve();for(const S of w){const N=this.ts(Ke.fromSegments(S.prefixPath.concat(S.collectionGroup,S.documentId)),S);N.isFoundDocument()&&(R(t,N)||s.has(N.key))&&(b=b.insert(N.key,N))}return b})}getAllFromCollectionGroup(e,t,r,s){let u=Ve();const l=Mx(t,r),m=Mx(t,Ai.max());return ng(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,S)=>{const N=this.ts(Ke.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===s&&S.done()}).next(()=>u)}newChangeBuffer(e){return new P1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ax(e).get("remoteDocumentGlobalKey").next(t=>(gt(!!t),t))}Zn(e,t){return Ax(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function v1(n,e){let t;if(e.document)t=JM(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ke.fromSegments(e.noDocument.path),s=Qp(e.noDocument.readTime);t=Hn.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const r=Ke.fromSegments(e.unknownDocument.path),s=Qp(e.unknownDocument.version);t=Hn.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime(function(r){const s=new On(r[0],r[1]);return yt.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(yt.min()))return r}return Hn.newInvalidDocument(e)}}function Sx(n){return new N1(n)}class P1 extends Tx{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new de(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const t=[];let r=0,s=new Rn((u,l)=>Bt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.us.get(u);if(t.push(this.os.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=sx(this.os.serializer,l);s=s.add(u.path.popLast());const b=nD(w);r+=b-m.size,t.push(this.os.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=sx(this.os.serializer,l.convertToNoDocument(yt.min()));t.push(this.os.addEntry(e,u,w))}}),s.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ee.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:s})=>(s.forEach((u,l)=>{this.us.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function Ax(n){return ci(n,"remoteDocumentGlobal")}function ng(n){return ci(n,"remoteDocumentsV14")}function R0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Mx(n,e){const t=e.documentKey.path.toArray();return[n,QI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function xx(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(s=Bt(t[u],r[u]),s)return s;return s=Bt(t.length,r.length),s||(s=Bt(t[t.length-2],r[r.length-2]),s||Bt(t[t.length-1],r[r.length-1]))}class O1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Rx{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&_0(r.mutation,s,Cs.empty(),On.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Zt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Zt()){const s=bt();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=It();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=bt();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Zt()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,s){let u=Ve();const l=Fn(),m=Fn();return t.forEach((w,b)=>{const S=r.get(b.key);s.has(b.key)&&(void 0===S||S.mutation instanceof id)?u=u.insert(b.key,b):void 0!==S?(l.set(b.key,S.mutation.getFieldMask()),_0(S.mutation,b,S.mutation.getFieldMask(),On.now())):l.set(b.key,Cs.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,S)=>l.set(b,S)),t.forEach((b,S)=>{var N;return m.set(b,new O1(S,null!==(N=l.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Fn();let s=new xn((l,m)=>l-m),u=Zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let S=r.get(w)||Cs.empty();S=m.applyToLocalView(b,S),r.set(w,S);const N=(s.get(m.batchId)||Zt()).add(w);s=s.insert(m.batchId,N)})}).next(()=>{const l=[],m=s.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,S=w.value,N=kn();S.forEach(H=>{if(!u.has(H)){const K=NM(t.get(H),r.get(H));null!==K&&N.set(H,K),u=u.add(H)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ee.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ke.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):a(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ee.resolve(bt());let m=-1,w=u;return l.next(b=>ee.forEach(b,(S,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(S)?ee.resolve():this.remoteDocumentCache.getEntry(e,S).next(H=>{w=w.insert(S,H)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,Zt())).next(S=>({batchId:m,changes:Se(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ke(t)).next(r=>{let s=It();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=It();return this.indexManager.getCollectionParents(e,s).next(l=>ee.forEach(l,m=>{const w=(b=t,S=m.child(s),new xc(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((S,N)=>{u=u.insert(S,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Hn.newInvalidDocument(b)))});let l=It();return u.forEach((m,w)=>{const b=s.get(m);void 0!==b&&_0(b.mutation,w,Cs.empty(),On.now()),R(t,w)&&(l=l.insert(m,w))}),l})}}class k1{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ee.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Ur(r.createTime)}),ee.resolve()}getNamedQuery(e,t){return ee.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:RT(r.bundledQuery),readTime:Ur(r.readTime)}),ee.resolve();var r}}class F1{constructor(){this.overlays=new xn(Ke.comparator),this.ls=new Map}getOverlay(e,t){return ee.resolve(this.overlays.get(t))}getOverlays(e,t){const r=bt();return ee.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),ee.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ee.resolve()}getOverlaysForCollection(e,t,r){const s=bt(),u=t.length+1,l=new Ke(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new xn((b,S)=>b-S);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let S=u.get(b.largestBatchId);null===S&&(S=bt(),u=u.insert(b.largestBatchId,S)),S.set(b.getKey(),b)}}const m=bt(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,S)=>m.set(b,S)),!(m.size()>=s)););return ee.resolve(m)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new DT(t,r));let u=this.ls.get(t);void 0===u&&(u=Zt(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class VT{constructor(){this.fs=new Rn(xi.ds),this.ws=new Rn(xi._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new xi(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new xi(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ke(new ln([])),r=new xi(t,e),s=new xi(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ke(new ln([])),r=new xi(t,e),s=new xi(t,e+1);let u=Zt();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new xi(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class xi{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ke.comparator(e.key,t.key)||Bt(e.As,t.As)}static _s(e,t){return Bt(e.As,t.As)||Ke.comparator(e.key,t.key)}}class L1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Rn(xi.ds)}checkEmpty(e){return ee.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new ET(u,t,r,s);this.mutationQueue.push(l);for(const m of s)this.Rs=this.Rs.add(new xi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ee.resolve(l)}lookupMutationBatch(e,t){return ee.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return ee.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new xi(t,0),s=new xi(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const m=this.Ps(l.As);u.push(m)}),ee.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Rn(Bt);return t.forEach(s=>{const u=new xi(s,0),l=new xi(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],m=>{r=r.add(m.As)})}),ee.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Ke.isDocumentKey(u)||(u=u.child(""));const l=new xi(new Ke(u),0);let m=new Rn(Bt);return this.Rs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===s&&(m=m.add(w.As)),!0)},l),ee.resolve(this.Vs(m))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){gt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ee.forEach(t.mutations,s=>{const u=new xi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new xi(t,0),s=this.Rs.firstAfterOrEqual(r);return ee.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ee.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class V1{constructor(e){this.Ds=e,this.docs=new xn(Ke.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ee.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(t))}getEntries(e,t){let r=Ve();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Hn.newInvalidDocument(s))}),ee.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Ve();const l=t.path,m=new Ke(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:S}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||Xm(J_(S),r)<=0||(s.has(S.key)||R(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return ee.resolve(u)}getAllFromCollectionGroup(e,t,r,s){it()}Cs(e,t){return ee.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new U1(this)}getSize(e){return ee.resolve(this.size)}}class U1 extends Tx{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),ee.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class B1{constructor(e){this.persistence=e,this.xs=new de(t=>Mh(t),ly),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new VT,this.targetCount=0,this.Ms=tg.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ee.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new tg(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ee.resolve()}updateTargetData(e,t){return this.Fn(t),ee.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),s++)}),ee.waitFor(u).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ee.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ee.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),ee.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ee.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ee.resolve(r)}containsKey(e,t){return ee.resolve(this.ks.containsKey(t))}}class UT{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ds(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new B1(this),this.indexManager=new T1,this.remoteDocumentCache=new V1(r=>this.referenceDelegate.Ls(r)),this.serializer=new ix(t),this.qs=new k1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new F1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new L1(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const s=new j1(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return ee.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class j1 extends zb{constructor(e){super(),this.currentSequenceNumber=e}}class sD{constructor(e){this.persistence=e,this.Qs=new VT,this.js=null}static zs(e){return new sD(e)}get Ws(){if(this.js)return this.js;throw it()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ee.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ee.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ee.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.Ws,r=>{const s=Ke.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,yt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ee.or([()=>ee.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class $1{constructor(e){this.serializer=e}O(e,t,r,s){const u=new e0("createOrUpgrade",t);var m;r<1&&s>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ny,{unique:!0}),m.createObjectStore("documentMutations"),Nx(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ee.resolve();return r<3&&s>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),Nx(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&s>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").j().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ny,{unique:!0});const S=w.store("mutations"),N=b.map(H=>S.put(H));return ee.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&s>=5&&(l=l.next(()=>this.Ys(u))),r<6&&s>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&s>=7&&(l=l.next(()=>this.Zs(u))),r<8&&s>=8&&(l=l.next(()=>this.ti(e,u))),r<9&&s>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&s>=10&&(l=l.next(()=>this.ei(u))),r<11&&s>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:xI});w.createIndex("collectionPathOverlayIndex",rT,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",s0,{unique:!1})}(e)})),r<13&&s>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:Jb});w.createIndex("documentKeyIndex",n0),w.createIndex("collectionGroupIndex",Xb)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(l=l.next(()=>this.si(e,u))),r<15&&s>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:tT}).createIndex("sequenceNumberIndex",AI,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:MI}).createIndex("documentKeyIndex",nT,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,s)=>{t+=nD(s)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(s=>ee.forEach(s,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(m=>ee.forEach(m,w=>{gt(w.userId===u.userId);const b=Jp(this.serializer,w);return _x(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const u=[];return r.X((l,m)=>{const w=new ln(l),b=[0,ui(w)];u.push(t.get(b).next(S=>S?ee.resolve():t.put({targetId:0,path:ui(w),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>ee.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:SI});const r=t.store("collectionParents"),s=new LT,u=l=>{if(s.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:ui(w)})}};return t.store("remoteDocuments").X({Y:!0},(l,m)=>{const w=new ln(l);return u(w.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,m,w],b)=>{const S=_a(m);return u(S.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,s)=>{const u=T0(s),l=ox(this.serializer,u);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),s=[];return r.X((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new Ke(ln.fromString(b.document.name).popFirst(5)):b.noDocument?Ke.fromSegments(b.noDocument.path):b.unknownDocument?Ke.fromSegments(b.unknownDocument.path):it()).path.toArray();var b;const S={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(m.put(S))}).next(()=>ee.waitFor(s))}si(e,t){const r=t.store("mutations"),s=Sx(this.serializer),u=new UT(sD.zs,this.serializer.fe);return r.j().next(l=>{const m=new Map;return l.forEach(w=>{var b;let S=null!==(b=m.get(w.userId))&&void 0!==b?b:Zt();Jp(this.serializer,w).keys().forEach(N=>S=S.add(N)),m.set(w.userId,S)}),ee.forEach(m,(w,b)=>{const S=new Fr(b),N=JI.de(this.serializer,S),H=u.getIndexManager(S),K=rD.de(S,this.serializer,H,u.referenceDelegate);return new Rx(s,K,N,H).recalculateAndSaveOverlaysForDocumentKeys(new a0(t,Ds.ct),w).next()})})}}function Nx(n){n.createObjectStore("targetDocuments",{keyPath:r0}).createIndex("documentTargetsIndex",TI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",eT,{unique:!0}),n.createObjectStore("targetGlobal")}const BT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class jT{constructor(e,t,r,s,u,l,m,w,b,S,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=l,this.document=m,this.ri=b,this.oi=S,this.ui=N,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=H=>Promise.resolve(),!jT.D())throw new De(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new R1(this,s),this.di=t+"main",this.serializer=new ix(w),this.wi=new va(this.di,this.ui,new $1(this.serializer)),this.Bs=new A1(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Sx(this.serializer),this.qs=new _1,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===S&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(oe.FAILED_PRECONDITION,BT);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ds(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,ye.Z)(function*(s){if(t.started)return e(s)});return function(s){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>aD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Fo(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return N0(e).get("owner").next(t=>ee.resolve(this.Ri(t)))}Pi(e){return aD(e).delete(this.clientId)}bi(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const s=ci(r,"clientMetadata");return s.j().next(u=>{const l=e.Si(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ee.forEach(m,w=>s.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ee.resolve(!0):N0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new De(oe.FAILED_PRECONDITION,BT);return!1}}return!(!this.networkEnabled||!this.inForeground)||aD(e).j().next(r=>void 0===this.Si(r,5e3).find(s=>!(this.clientId===s.clientId||!(!this.networkEnabled&&s.networkEnabled||!this.inForeground&&s.inForeground&&this.networkEnabled===s.networkEnabled))))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new a0(t,Ds.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>aD(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return rD.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new S1(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return JI.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",u=15===(l=this.ui)?RI:14===l?iy:13===l?o0:12===l?Tc:11===l?wa:void it();var l;let m;return this.wi.runTransaction(e,s,u,w=>(m=new a0(w,this.Os?this.Os.next():Ds.ct),"readwrite-primary"===t?this.Ti(m).next(b=>!!b||this.Ei(m)).next(b=>{if(!b)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new De(oe.FAILED_PRECONDITION,X_);return r(m)}).next(b=>this.vi(m).next(()=>b)):this.Oi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Oi(e){return N0(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(oe.FAILED_PRECONDITION,BT)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return N0(e).put("owner",t)}static D(){return va.D()}Ai(e){const t=N0(e);return t.get("owner").next(r=>this.Ri(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ee.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,cn.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function N0(n){return ci(n,"owner")}function aD(n){return ci(n,"clientMetadata")}function $T(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HT{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=Zt(),s=Zt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new HT(e,t.fromCache,r,s)}}class Px{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(vT(t))return ee.resolve(null);let r=d(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=v(t,null,"F"),r=d(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Zt(...u);return this.Ui.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.ji(t,m);return this.zi(t,b,l,w.readTime)?this.Ki(e,v(t,null,"F")):this.Wi(e,b,t,w)}))})))}Gi(e,t,r,s){return vT(t)||s.isEqual(yt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(Fp()<=lu.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),M(t)),this.Wi(e,l,t,Gb(s,-1)))})}ji(e,t){let r=new Rn(G(e));return t.forEach((s,u)=>{R(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return Fp()<=lu.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",M(t)),this.Ui.getDocumentsMatchingQuery(e,t,Ai.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class H1{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new xn(Bt),this.Yi=new de(u=>Mh(u),ly),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Rx(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Ox(n,e,t,r){return new H1(n,e,t,r)}function kx(n,e){return GT.apply(this,arguments)}function GT(){return GT=(0,ye.Z)(function*(n,e){const t=Qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=Zt();for(const b of s){l.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}for(const b of u){m.push(b.batchId);for(const S of b.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(b=>({er:b,removedBatchIds:l,addedBatchIds:m}))})})}),GT.apply(this,arguments)}function Fx(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function Lx(n,e,t){let r=Zt(),s=Zt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ve();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(s=s.add(m)),w.isNoDocument()&&w.version.isEqual(yt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):Pe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{nr:l,sr:s}})}function q1(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wy(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,ee.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new sd(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Ey(n,e,t){return zT.apply(this,arguments)}function zT(){return zT=(0,ye.Z)(function*(n,e,t){const r=Qe(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Fo(l))throw l;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),zT.apply(this,arguments)}function uD(n,e,t){const r=Qe(n);let s=yt.min(),u=Zt();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const S=Qe(m),N=S.Yi.get(b);return void 0!==N?ee.resolve(S.Ji.get(N)):S.Bs.getTargetData(w,b)}(r,l,d(e)).next(m=>{if(m)return s=m.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:yt.min(),t?u:Zt())).next(m=>(Bx(r,F(e),m),{documents:m,ir:u})))}function Vx(n,e){const t=Qe(n),r=Qe(t.Bs),s=t.Ji.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(l=>l?l.target:null))}function Ux(n,e){const t=Qe(n),r=t.Xi.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Zi.getAllFromCollectionGroup(s,e,Gb(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(Bx(t,e,s),s))}function Bx(n,e,t){let r=n.Xi.get(e)||yt.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function qT(){return qT=(0,ye.Z)(function*(n,e,t,r){const s=Qe(n);let u=Zt(),l=Ve();for(const b of t){const S=e.rr(b.metadata.name);b.document&&(u=u.add(S));const N=e.ur(b);N.setReadTime(e.cr(b.metadata.readTime)),l=l.insert(S,N)}const m=s.Zi.newChangeBuffer({trackRemovals:!0}),w=yield wy(s,(b=r,d(Wp(ln.fromString(`__bundle__/docs/${b}`)))));var b;return s.persistence.runTransaction("Apply bundle documents","readwrite",b=>Lx(b,m,l).next(S=>(m.apply(b),S)).next(S=>s.Bs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>s.Bs.addMatchingKeys(b,u,w.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(b,S.nr,S.sr)).next(()=>S.nr)))}),qT.apply(this,arguments)}function Z1(n,e){return WT.apply(this,arguments)}function WT(){return WT=(0,ye.Z)(function*(n,e,t=Zt()){const r=yield wy(n,d(RT(e.bundledQuery))),s=Qe(n);return s.persistence.runTransaction("Save named query","readwrite",u=>{const l=Ur(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return s.qs.saveNamedQuery(u,e);const m=r.withResumeToken(Er.EMPTY_BYTE_STRING,l);return s.Ji=s.Ji.insert(m.targetId,m),s.Bs.updateTargetData(u,m).next(()=>s.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>s.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>s.qs.saveNamedQuery(u,e))})}),WT.apply(this,arguments)}function jx(n,e){return`firestore_clients_${n}_${e}`}function $x(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function ZT(n,e){return`firestore_targets_${n}_${e}`}class cD{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static ar(e,t,r){const s=JSON.parse(r);let u,l="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return l&&s.error&&(l="string"==typeof s.error.message&&"string"==typeof s.error.code,l&&(u=new De(s.error.code,s.error.message))),l?new cD(e,t,s.state,u):(fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class P0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let s,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(s=new De(r.error.code,r.error.message))),u?new P0(e,r.state,s):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let s="object"==typeof r&&r.activeTargetIds instanceof Array,u=_T();for(let l=0;s&&l<r.activeTargetIds.length;++l)s=t0(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return s?new lD(e,u):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class KT{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new KT(t.clientId,t.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class YT{constructor(){this.activeTargetIds=_T()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QT{constructor(e,t,r,s,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new xn(Bt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=jx(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new YT),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.$i();for(const s of t){if(s===e.wr)continue;const u=e.getItem(jx(e.persistenceKey,s));if(u){const l=lD.ar(s,u);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const s=e.br(r);s&&e.Vr(s)}for(const s of e.yr)e.mr(s);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(ZT(this.persistenceKey,e));if(r){const s=P0.ar(e,r);s&&(t=s.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ZT(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(s=>{this.Cr(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const s=t.Or(r.key);return t.Fr(s,null)}{const s=t.Br(r.key,r.newValue);if(s)return t.Fr(s.clientId,s)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const s=t.Lr(r.key,r.newValue);if(s)return t.qr(s)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const s=t.Ur(r.key,r.newValue);if(s)return t.Kr(s)}}else if(r.key===t.vr){if(null!==r.newValue){const s=t.br(r.newValue);if(s)return t.Vr(s)}}else if(r.key===t.Ir){const s=function(u){let l=Ds.ct;if(null!=u)try{const m=JSON.parse(u);gt("number"==typeof m),l=m}catch(m){fr("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);s!==Ds.ct&&t.sequenceNumberHandler(s)}else if(r.key===t.Rr){const s=t.Gr(r.newValue);yield Promise.all(s.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const s=new cD(this.currentUser,e,t,r),u=$x(this.persistenceKey,this.currentUser,e);this.setItem(u,s.hr())}Cr(e){const t=$x(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const s=ZT(this.persistenceKey,e),u=new P0(e,t,r);this.setItem(s,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return lD.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),s=Number(r[1]);return cD.ar(new Fr(void 0!==r[2]?r[2]:null),s,t)}Ur(e,t){const r=this.Ar.exec(e),s=Number(r[1]);return P0.ar(s,t)}br(e){return KT.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),s=this.Sr(this.gr),u=this.Sr(r),l=[],m=[];return u.forEach(w=>{s.has(w)||l.push(w)}),s.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Wr(l,m).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=_T();return e.forEach((r,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class Hx{constructor(){this.Hr=new YT,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new YT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class K1{Yr(e){}shutdown(){}}class Gx{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dD=null;function JT(){return null===dD?dD=268435456+Math.round(2147483648*Math.random()):dD++,"0x"+dD.toString(16)}const Y1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Q1{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const rs="WebChannelConnection";class J1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=JT(),m=this.To(e,t);Pe("RestConnection",`Sending RPC '${e}' ${l}:`,m,r);const w={};return this.Eo(w,s,u),this.Ao(e,m,w,r).then(b=>(Pe("RestConnection",`Received RPC '${e}' ${l}: `,b),b),b=>{throw Is("RestConnection",`RPC '${e}' ${l} failed with error: `,b,"url: ",m,"request:",r),b})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Kl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${Y1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=JT();return new Promise((l,m)=>{const w=new Ub;w.setWithCredentials(!0),w.listenOnce(Op.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case Pp.NO_ERROR:const S=w.getResponseJson();Pe(rs,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),l(S);break;case Pp.TIMEOUT:Pe(rs,`RPC '${e}' ${u} timed out`),m(new De(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Pp.HTTP_ERROR:const N=w.getStatus();if(Pe(rs,`RPC '${e}' ${u} failed with status:`,N,"response text:",w.getResponseText()),N>0){let H=w.getResponseJson();Array.isArray(H)&&(H=H[0]);const K=H?.error;if(K&&K.status&&K.message){const me=function(Fe){const ke=Fe.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ke)>=0?ke:oe.UNKNOWN}(K.status);m(new De(me,K.message))}else m(new De(oe.UNKNOWN,"Server responded with status "+w.getStatus()))}else m(new De(oe.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Pe(rs,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(s);Pe(rs,`RPC '${e}' ${u} sending request:`,s),w.send(t,"POST",b,r,15)})}Ro(e,t,r){const s=JT(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=mM(),m=mI(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(w.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(w.xmlHttpFactory=new Vb({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const S=u.join("");Pe(rs,`Creating RPC '${e}' stream ${s}: ${S}`,w);const N=l.createWebChannel(S,w);let H=!1,K=!1;const me=new Q1({ro:ke=>{K?Pe(rs,`Not sending because RPC '${e}' stream ${s} is closed:`,ke):(H||(Pe(rs,`Opening RPC '${e}' stream ${s} transport.`),N.open(),H=!0),Pe(rs,`RPC '${e}' stream ${s} sending:`,ke),N.send(ke))},oo:()=>N.close()}),Fe=(ke,Dt,At)=>{ke.listen(Dt,wt=>{try{At(wt)}catch(Ft){setTimeout(()=>{throw Ft},0)}})};return Fe(N,kp.EventType.OPEN,()=>{K||Pe(rs,`RPC '${e}' stream ${s} transport opened.`)}),Fe(N,kp.EventType.CLOSE,()=>{K||(K=!0,Pe(rs,`RPC '${e}' stream ${s} transport closed`),me.wo())}),Fe(N,kp.EventType.ERROR,ke=>{K||(K=!0,Is(rs,`RPC '${e}' stream ${s} transport errored:`,ke),me.wo(new De(oe.UNAVAILABLE,"The operation could not be completed")))}),Fe(N,kp.EventType.MESSAGE,ke=>{var Dt;if(!K){const At=ke.data[0];gt(!!At);const Ft=At.error||(null===(Dt=At[0])||void 0===Dt?void 0:Dt.error);if(Ft){Pe(rs,`RPC '${e}' stream ${s} received error:`,Ft);const Wt=Ft.status;let dn=function(lg){const zN=Jr[lg];if(void 0!==zN)return VM(zN)}(Wt),is=Ft.message;void 0===dn&&(dn=oe.INTERNAL,is="Unknown error status: "+Wt+" with message "+Ft.message),K=!0,me.wo(new De(dn,is)),N.close()}else Pe(rs,`RPC '${e}' stream ${s} received:`,At),me._o(At)}}),Fe(m,Lb.STAT_EVENT,ke=>{ke.stat===Qm.PROXY?Pe(rs,`RPC '${e}' stream ${s} detected buffering proxy`):ke.stat===Qm.NOPROXY&&Pe(rs,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{me.fo()},0),me}}function zx(){return typeof window<"u"?window:null}function hD(){return typeof document<"u"?document:null}function O0(n){return new u1(n,!0)}class XT{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&Pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class qx{constructor(e,t,r,s,u,l,m,w){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new XT(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ye.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ye.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===oe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new De(oe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,ye.Z)(function*(){e.state=0,e.start()}))}tu(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class X1 extends qx{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function d1(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:it(),s=e.targetChange.targetIds||[],u=function(w,b){return w.useProto3Json?(gt(void 0===b||"string"==typeof b),Er.fromBase64String(b||"")):(gt(void 0===b||b instanceof Uint8Array),Er.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?oe.UNKNOWN:VM(w.code);return new De(b,w.message||"")}(l);t=new HM(r,s,u,m||null)}else if("documentChange"in e){const r=e.documentChange,s=Rc(n,r.document.name),u=Ur(r.document.updateTime),l=r.document.createTime?Ur(r.document.createTime):yt.min(),m=new Vr({mapValue:{fields:r.document.fields}}),w=Hn.newFoundDocument(s,u,l,m);t=new YI(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=Rc(n,r.document),u=r.readTime?Ur(r.readTime):yt.min(),l=Hn.newNoDocument(s,u);t=new YI([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=Rc(n,r.document);t=new YI([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return it();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new n1(s,u);t=new $M(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return yt.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?yt.min():u.readTime?Ur(u.readTime):yt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=C0(this.serializer),t.addTarget=function(s,u){let l;const m=u.target;if(l=y0(m)?{documents:XM(s,m)}:{query:xT(s,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=WM(s,u.resumeToken);const w=TT(s,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(yt.min())>0){l.readTime=my(s,u.snapshotVersion.toTimestamp());const w=TT(s,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function f1(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=C0(this.serializer),t.removeTarget=e,this.Wo(t)}}class eP extends qx{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function h1(n,e){return n&&n.length>0?(gt(void 0!==e),n.map(t=>function(r,s){let u=Ur(r.updateTime?r.updateTime:s);return u.isEqual(yt.min())&&(u=Ur(s)),new JN(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.cu(r,t)}return gt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=C0(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>b0(this.serializer,r))};this.Wo(t)}}class tP extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new De(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new De(oe.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new De(oe.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class rP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(fr(t),this.mu=!1):Pe("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class iP{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;Oh(l)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(b){const S=Qe(b);S.vu.add(4),yield Iy(S),S.bu.set("Unknown"),S.vu.delete(4),yield k0(S)}),function(b){return w.apply(this,arguments)})(l))}))}),this.bu=new rP(r,s)}}function k0(n){return tS.apply(this,arguments)}function tS(){return tS=(0,ye.Z)(function*(n){if(Oh(n))for(const e of n.Ru)yield e(!0)}),tS.apply(this,arguments)}function Iy(n){return nS.apply(this,arguments)}function nS(){return nS=(0,ye.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),nS.apply(this,arguments)}function fD(n,e){const t=Qe(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),sS(t)?iS(t):Cy(t).Ko()&&rS(t,e))}function F0(n,e){const t=Qe(n),r=Cy(t);t.Au.delete(e),r.Ko()&&Wx(t,e),0===t.Au.size&&(r.Ko()?r.jo():Oh(t)&&t.bu.set("Unknown"))}function rS(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(yt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cy(n).su(e)}function Wx(n,e){n.Vu.qt(e),Cy(n).iu(e)}function iS(n){n.Vu=new i1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Cy(n).start(),n.bu.gu()}function sS(n){return Oh(n)&&!Cy(n).Uo()&&n.Au.size>0}function Oh(n){return 0===Qe(n).vu.size}function Zx(n){n.Vu=void 0}function sP(n){return oS.apply(this,arguments)}function oS(){return oS=(0,ye.Z)(function*(n){n.Au.forEach((e,t)=>{rS(n,e)})}),oS.apply(this,arguments)}function oP(n,e){return aS.apply(this,arguments)}function aS(){return aS=(0,ye.Z)(function*(n,e){Zx(n),sS(n)?(n.bu.Iu(e),iS(n)):n.bu.set("Unknown")}),aS.apply(this,arguments)}function aP(n,e,t){return uS.apply(this,arguments)}function uS(){return uS=(0,ye.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof HM&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(s,u){const l=u.cause;for(const m of u.targetIds)s.Au.has(m)&&(yield s.remoteSyncer.rejectListen(m,l),s.Au.delete(m),s.Vu.removeTarget(m))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pD(n,r)}else if(e instanceof YI?n.Vu.Ht(e):e instanceof $M?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(yt.min()))try{const r=yield Fx(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=s.Au.get(w);b&&s.Au.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach((m,w)=>{const b=s.Au.get(m);if(!b)return;s.Au.set(m,b.withResumeToken(Er.EMPTY_BYTE_STRING,b.snapshotVersion)),Wx(s,m);const S=new sd(b.target,m,w,b.sequenceNumber);rS(s,S)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield pD(n,r)}var r}),uS.apply(this,arguments)}function pD(n,e,t){return cS.apply(this,arguments)}function cS(){return cS=(0,ye.Z)(function*(n,e,t){if(!Fo(e))throw e;n.vu.add(1),yield Iy(n),n.bu.set("Offline"),t||(t=()=>Fx(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield k0(n)}))}),cS.apply(this,arguments)}function Kx(n,e){return e().catch(t=>pD(n,t,e))}function Dy(n){return lS.apply(this,arguments)}function lS(){return lS=(0,ye.Z)(function*(n){const e=Qe(n),t=kh(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;uP(e);)try{const s=yield q1(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,cP(e,s)}catch(s){yield pD(e,s)}Yx(e)&&Qx(e)}),lS.apply(this,arguments)}function uP(n){return Oh(n)&&n.Eu.length<10}function cP(n,e){n.Eu.push(e);const t=kh(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Yx(n){return Oh(n)&&!kh(n).Uo()&&n.Eu.length>0}function Qx(n){kh(n).start()}function lP(n){return dS.apply(this,arguments)}function dS(){return dS=(0,ye.Z)(function*(n){kh(n).hu()}),dS.apply(this,arguments)}function dP(n){return hS.apply(this,arguments)}function hS(){return hS=(0,ye.Z)(function*(n){const e=kh(n);for(const t of n.Eu)e.uu(t.mutations)}),hS.apply(this,arguments)}function hP(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,ye.Z)(function*(n,e,t){const r=n.Eu.shift(),s=IT.from(r,e,t);yield Kx(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Dy(n)}),fS.apply(this,arguments)}function fP(n,e){return pS.apply(this,arguments)}function pS(){return pS=(0,ye.Z)(function*(n,e){var t;e&&kh(n).ou&&(yield(t=(0,ye.Z)(function*(r,s){if(LM(u=s.code)&&u!==oe.ABORTED){const l=r.Eu.shift();kh(r).Qo(),yield Kx(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Dy(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),Yx(n)&&Qx(n)}),pS.apply(this,arguments)}function Jx(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,ye.Z)(function*(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Oh(t);t.vu.add(3),yield Iy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield k0(t)}),gS.apply(this,arguments)}function mS(n,e){return yS.apply(this,arguments)}function yS(){return yS=(0,ye.Z)(function*(n,e){const t=Qe(n);e?(t.vu.delete(2),yield k0(t)):e||(t.vu.add(2),yield Iy(t),t.bu.set("Unknown"))}),yS.apply(this,arguments)}function Cy(n){return n.Su||(n.Su=function(e,t,r){const s=Qe(e);return s.fu(),new X1(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:sP.bind(null,n),ao:oP.bind(null,n),nu:aP.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Su.Qo(),sS(n)?iS(n):n.bu.set("Unknown")):(yield n.Su.stop(),Zx(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function kh(n){return n.Du||(n.Du=function(e,t,r){const s=Qe(e);return s.fu(),new eP(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:lP.bind(null,n),ao:fP.bind(null,n),au:dP.bind(null,n),cu:hP.bind(null,n)}),n.Ru.push(function(){var e=(0,ye.Z)(function*(t){t?(n.Du.Qo(),yield Dy(n)):(yield n.Du.stop(),n.Eu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class vS{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,m=new vS(e,t,l,s,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function by(n,e){if(fr("AsyncQueue",`${e}: ${n}`),Fo(n))return new De(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ty{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ke.comparator(t.key,r.key):(t,r)=>Ke.comparator(t.key,r.key),this.keyedMap=It(),this.sortedSet=new xn(this.comparator)}static emptySet(e){return new Ty(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ty)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ty;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Xx{constructor(){this.Cu=new xn(Ke.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):it():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Sy{constructor(e,t,r,s,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new Sy(e,t,Ty.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&I(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class pP{constructor(){this.Nu=void 0,this.listeners=[]}}class gP{constructor(){this.queries=new de(e=>C(e),I),this.onlineState="Unknown",this.ku=new Set}}function _S(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,ye.Z)(function*(n,e){const t=Qe(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new pP),s)try{u.Nu=yield t.onListen(r)}catch(l){const m=by(l,`Initialization of query '${M(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&DS(t)}),wS.apply(this,arguments)}function ES(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,ye.Z)(function*(n,e){const t=Qe(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),IS.apply(this,arguments)}function mP(n,e){const t=Qe(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const m of l.listeners)m.$u(s)&&(r=!0);l.Nu=s}}r&&DS(t)}function yP(n,e,t){const r=Qe(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function DS(n){n.ku.forEach(e=>{e.next()})}class CS{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Sy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Sy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class vP{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class eR{constructor(e){this.serializer=e}rr(e){return Rc(this.serializer,e)}ur(e){return e.metadata.exists?JM(this.serializer,e.document,!1):Hn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Ur(e)}}class _P{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tR(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=ln.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new eR(this.serializer);for(const s of e)if(s.metadata.queries){const u=r.rr(s.metadata.name);for(const l of s.metadata.queries){const m=(t.get(l)||Zt()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function W1(n,e,t,r){return qT.apply(this,arguments)}(e.localStore,new eR(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const s of e.queries)yield Z1(e.localStore,s,r.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function tR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class nR{constructor(e){this.key=e}}class rR{constructor(e){this.key=e}}class iR{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Zt(),this.mutatedKeys=Zt(),this.tc=G(e),this.ec=new Ty(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new Xx,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,m=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,b="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,N)=>{const H=s.get(S),K=R(this.query,N)?N:null,me=!!H&&this.mutatedKeys.has(H.key),Fe=!!K&&(K.hasLocalMutations||this.mutatedKeys.has(K.key)&&K.hasCommittedMutations);let ke=!1;H&&K?H.data.isEqual(K.data)?me!==Fe&&(r.track({type:3,doc:K}),ke=!0):this.rc(H,K)||(r.track({type:2,doc:K}),ke=!0,(w&&this.tc(K,w)>0||b&&this.tc(K,b)<0)&&(m=!0)):!H&&K?(r.track({type:0,doc:K}),ke=!0):H&&!K&&(r.track({type:1,doc:H}),ke=!0,(w||b)&&(m=!0)),ke&&(K?(l=l.add(K),u=Fe?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{ec:l,ic:r,zi:m,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,S)=>function(N,H){const K=me=>{switch(me){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return K(N)-K(H)}(b.type,S.type)||this.tc(b.doc,S.doc)),this.oc(r);const l=t?this.uc():[],m=0===this.Zu.size&&this.current?1:0,w=m!==this.Xu;return this.Xu=m,0!==u.length||w?{snapshot:new Sy(this.query,e.ec,s,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Xx,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Zt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new rR(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new nR(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Zt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Sy.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class wP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class EP{constructor(e){this.key=e,this.fc=!1}}class IP{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new de(m=>C(m),I),this._c=new Map,this.mc=new Set,this.gc=new xn(Ke.comparator),this.yc=new Map,this.Ic=new VT,this.Tc={},this.Ec=new Map,this.Ac=tg.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function DP(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,ye.Z)(function*(n,e){const t=ZS(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield wy(t.localStore,d(e)),m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield TS(t,e,r,"current"===m,l.resumeToken),t.isPrimaryClient&&fD(t.remoteStore,l)}return s}),bS.apply(this,arguments)}function TS(n,e,t,r,s){return SS.apply(this,arguments)}function SS(){return SS=(0,ye.Z)(function*(n,e,t,r,s){n.Rc=(N,H,K)=>{return(me=(0,ye.Z)(function*(Fe,ke,Dt,At){let wt=ke.view.sc(Dt);wt.zi&&(wt=yield uD(Fe.localStore,ke.query,!1).then(({documents:dn})=>ke.view.sc(dn,wt)));const Ft=At&&At.targetChanges.get(ke.targetId),Wt=ke.view.applyChanges(wt,Fe.isPrimaryClient,Ft);return LS(Fe,ke.targetId,Wt.cc),Wt.snapshot}),function(Fe,ke,Dt,At){return me.apply(this,arguments)})(n,N,H,K);var me};const u=yield uD(n.localStore,e,!0),l=new iR(e,u.ir),m=l.sc(u.documents),w=I0.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),b=l.applyChanges(m,n.isPrimaryClient,w);LS(n,t,b.cc);const S=new wP(e,t,l);return n.wc.set(e,S),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),SS.apply(this,arguments)}function CP(n,e){return AS.apply(this,arguments)}function AS(){return AS=(0,ye.Z)(function*(n,e){const t=Qe(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!I(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ey(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),F0(t.remoteStore,r.targetId),Ay(t,r.targetId)}).catch(ya))):(Ay(t,r.targetId),yield Ey(t.localStore,r.targetId,!0))}),AS.apply(this,arguments)}function MS(){return MS=(0,ye.Z)(function*(n,e,t){const r=KS(n);try{const s=yield function(u,l){const m=Qe(u),w=On.now(),b=l.reduce((H,K)=>H.add(K.key),Zt());let S,N;return m.persistence.runTransaction("Locally write mutations","readwrite",H=>{let K=Ve(),me=Zt();return m.Zi.getEntries(H,b).next(Fe=>{K=Fe,K.forEach((ke,Dt)=>{Dt.isValidDocument()||(me=me.add(ke))})}).next(()=>m.localDocuments.getOverlayedDocuments(H,K)).next(Fe=>{S=Fe;const ke=[];for(const Dt of l){const At=e1(Dt,S.get(Dt.key).overlayedDocument);null!=At&&ke.push(new id(Dt.key,At,qp(At.value.mapValue),ir.exists(!0)))}return m.mutationQueue.addMutationBatch(H,w,ke,l)}).next(Fe=>{N=Fe;const ke=Fe.applyToLocalDocumentSet(S,me);return m.documentOverlayCache.saveOverlays(H,Fe.batchId,ke)})}).then(()=>({batchId:N.batchId,changes:Se(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,m){let w=u.Tc[u.currentUser.toKey()];w||(w=new xn(Bt)),w=w.insert(l,m),u.Tc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield od(r,s.changes),yield Dy(r.remoteStore)}catch(s){const u=by(s,"Failed to persist write");t.reject(u)}}),MS.apply(this,arguments)}function sR(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,ye.Z)(function*(n,e){const t=Qe(n);try{const r=yield function z1(n,e){const t=Qe(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const m=[];e.targetChanges.forEach((S,N)=>{const H=s.get(N);if(!H)return;m.push(t.Bs.removeMatchingKeys(u,S.removedDocuments,N).next(()=>t.Bs.addMatchingKeys(u,S.addedDocuments,N)));let K=H.withSequenceNumber(u.currentSequenceNumber);var me,Fe,ke;null!==e.targetMismatches.get(N)?K=K.withResumeToken(Er.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):S.resumeToken.approximateByteSize()>0&&(K=K.withResumeToken(S.resumeToken,r)),s=s.insert(N,K),Fe=K,ke=S,(0===(me=H).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-me.snapshotVersion.toMicroseconds()>=3e8||ke.addedDocuments.size+ke.modifiedDocuments.size+ke.removedDocuments.size>0)&&m.push(t.Bs.updateTargetData(u,K))});let w=Ve(),b=Zt();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),m.push(Lx(u,l,e.documentUpdates).next(S=>{w=S.nr,b=S.sr})),!r.isEqual(yt.min())){const S=t.Bs.getLastRemoteSnapshotVersion(u).next(N=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(S)}return ee.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?gt(l.fc):s.removedDocuments.size>0&&(gt(l.fc),l.fc=!1))}),yield od(t,r,e)}catch(r){yield ya(r)}}),xS.apply(this,arguments)}function oR(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const m=l.view.Mu(e);m.snapshot&&s.push(m.snapshot)}),function(u,l){const m=Qe(u);m.onlineState=l;let w=!1;m.queries.forEach((b,S)=>{for(const N of S.listeners)N.Mu(l)&&(w=!0)}),w&&DS(m)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function TP(n,e,t){return RS.apply(this,arguments)}function RS(){return RS=(0,ye.Z)(function*(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new xn(Ke.comparator);l=l.insert(u,Hn.newNoDocument(u,yt.min()));const m=Zt().add(u),w=new E0(yt.min(),new Map,new xn(Bt),l,m);yield sR(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),VS(r)}else yield Ey(r.localStore,e,!1).then(()=>Ay(r,e,t)).catch(ya)}),RS.apply(this,arguments)}function SP(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,ye.Z)(function*(n,e){const t=Qe(n),r=e.batch.batchId;try{const s=yield function G1(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const S=w.batch,N=S.keys();let H=ee.resolve();return N.forEach(K=>{H=H.next(()=>b.getEntry(m,K)).next(me=>{const Fe=w.docVersions.get(K);gt(null!==Fe),me.version.compareTo(Fe)<0&&(S.applyToRemoteDocument(me,w),me.isValidDocument()&&(me.setReadTime(w.commitVersion),b.addEntry(me)))})}),H.next(()=>l.mutationQueue.removeMutationBatch(m,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=Zt();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);FS(t,r,null),kS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield od(t,s)}catch(s){yield ya(s)}}),NS.apply(this,arguments)}function AP(n,e,t){return PS.apply(this,arguments)}function PS(){return PS=(0,ye.Z)(function*(n,e,t){const r=Qe(n);try{const s=yield function(u,l){const m=Qe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(S=>(gt(null!==S),b=S.keys(),m.mutationQueue.removeMutationBatch(w,S))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);FS(r,e,t),kS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield od(r,s)}catch(s){yield ya(s)}}),PS.apply(this,arguments)}function OS(){return OS=(0,ye.Z)(function*(n,e){const t=Qe(n);Oh(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Qe(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Ec.get(r)||[];s.push(e),t.Ec.set(r,s)}catch(r){const s=by(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),OS.apply(this,arguments)}function kS(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function FS(n,e,t){const r=Qe(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Ay(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||aR(n,r)})}function aR(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(F0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),VS(n))}function LS(n,e,t){for(const r of t)r instanceof nR?(n.Ic.addReference(r.key,e),xP(n,r)):r instanceof rR?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||aR(n,r.key)):it()}function xP(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.mc.add(r),VS(n))}function VS(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ke(ln.fromString(e)),r=n.Ac.next();n.yc.set(r,new EP(t)),n.gc=n.gc.insert(t,r),fD(n.remoteStore,new sd(d(Wp(t.path)),r,"TargetPurposeLimboResolution",Ds.ct))}}function od(n,e,t){return US.apply(this,arguments)}function US(){return US=(0,ye.Z)(function*(n,e,t){const r=Qe(n),s=[],u=[],l=[];var m;r.wc.isEmpty()||(r.wc.forEach((m,w)=>{l.push(r.Rc(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){s.push(b);const S=HT.Li(w.targetId,b);u.push(S)}}))}),yield Promise.all(l),r.dc.nu(s),yield(m=(0,ye.Z)(function*(w,b){const S=Qe(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ee.forEach(b,H=>ee.forEach(H.Fi,K=>S.persistence.referenceDelegate.addReference(N,H.targetId,K)).next(()=>ee.forEach(H.Bi,K=>S.persistence.referenceDelegate.removeReference(N,H.targetId,K)))))}catch(N){if(!Fo(N))throw N;Pe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const H=N.targetId;if(!N.fromCache){const K=S.Ji.get(H),Fe=K.withLastLimboFreeSnapshotVersion(K.snapshotVersion);S.Ji=S.Ji.insert(H,Fe)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),US.apply(this,arguments)}function RP(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,ye.Z)(function*(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield kx(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(m=>{m.reject(new De(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield od(t,r.er)}var s}),BS.apply(this,arguments)}function NP(n,e){const t=Qe(n),r=t.yc.get(e);if(r&&r.fc)return Zt().add(r.key);{let s=Zt();const u=t._c.get(e);if(!u)return s;for(const l of u){const m=t.wc.get(l);s=s.unionWith(m.view.nc)}return s}}function PP(n,e){return jS.apply(this,arguments)}function jS(){return jS=(0,ye.Z)(function*(n,e){const t=Qe(n),r=yield uD(t.localStore,e.query,!0),s=e.view.hc(r);return t.isPrimaryClient&&LS(t,e.targetId,s.cc),s}),jS.apply(this,arguments)}function OP(n,e){return $S.apply(this,arguments)}function $S(){return $S=(0,ye.Z)(function*(n,e){const t=Qe(n);return Ux(t.localStore,e).then(r=>od(t,r))}),$S.apply(this,arguments)}function kP(n,e,t,r){return HS.apply(this,arguments)}function HS(){return HS=(0,ye.Z)(function*(n,e,t,r){const s=Qe(n),u=yield function(l,m){const w=Qe(l),b=Qe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",S=>b.Sn(S,m).next(N=>N?w.localDocuments.getDocuments(S,N):ee.resolve(null)))}(s.localStore,e);var m;null!==u?("pending"===t?yield Dy(s.remoteStore):"acknowledged"===t||"rejected"===t?(FS(s,e,r||null),kS(s,e),m=e,Qe(Qe(s.localStore).mutationQueue).Cn(m)):it(),yield od(s,u)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),HS.apply(this,arguments)}function GS(){return GS=(0,ye.Z)(function*(n,e){const t=Qe(n);if(ZS(t),KS(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),s=yield uR(t,r.toArray());t.vc=!0,yield mS(t.remoteStore,!0);for(const u of s)fD(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let s=Promise.resolve();t._c.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):s=s.then(()=>(Ay(t,l),Ey(t.localStore,l,!0))),F0(t.remoteStore,l)}),yield s,yield uR(t,r),function(u){const l=Qe(u);l.yc.forEach((m,w)=>{F0(l.remoteStore,w)}),l.Ic.Ts(),l.yc=new Map,l.gc=new xn(Ke.comparator)}(t),t.vc=!1,yield mS(t.remoteStore,!1)}}),GS.apply(this,arguments)}function uR(n,e,t){return zS.apply(this,arguments)}function zS(){return zS=(0,ye.Z)(function*(n,e,t){const r=Qe(n),s=[],u=[];for(const l of e){let m;const w=r._c.get(l);if(w&&0!==w.length){m=yield wy(r.localStore,d(w[0]));for(const b of w){const S=r.wc.get(b),N=yield PP(r,S);N.snapshot&&u.push(N.snapshot)}}else{const b=yield Vx(r.localStore,l);m=yield wy(r.localStore,b),yield TS(r,cR(b),l,!1,m.resumeToken)}s.push(m)}return r.dc.nu(u),s}),zS.apply(this,arguments)}function cR(n){return yT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function LP(n){const e=Qe(n);return Qe(Qe(e.localStore).persistence).$i()}function VP(n,e,t,r){return qS.apply(this,arguments)}function qS(){return qS=(0,ye.Z)(function*(n,e,t,r){const s=Qe(n);if(s.vc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const u=s._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield Ux(s.localStore,F(u[0])),m=E0.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Er.EMPTY_BYTE_STRING);yield od(s,l,m);break}case"rejected":yield Ey(s.localStore,e,!0),Ay(s,e,r);break;default:it()}}),qS.apply(this,arguments)}function UP(n,e,t){return WS.apply(this,arguments)}function WS(){return WS=(0,ye.Z)(function*(n,e,t){const r=ZS(n);if(r.vc){for(const s of e){if(r._c.has(s)){Pe("SyncEngine","Adding an already active target "+s);continue}const u=yield Vx(r.localStore,s),l=yield wy(r.localStore,u);yield TS(r,cR(u),l.targetId,!1,l.resumeToken),fD(r.remoteStore,l)}for(const s of t)r._c.has(s)&&(yield Ey(r.localStore,s,!1).then(()=>{F0(r.remoteStore,s),Ay(r,s)}).catch(ya))}}),WS.apply(this,arguments)}function ZS(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=sR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TP.bind(null,e),e.dc.nu=mP.bind(null,e.eventManager),e.dc.Pc=yP.bind(null,e.eventManager),e}function KS(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=SP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AP.bind(null,e),e}class L0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.serializer=O0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Ox(this.persistence,new Px,e.initialUser,this.serializer)}createPersistence(e){return new UT(sD.zs,this.serializer)}createSharedClientState(e){return new Hx}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class YS extends L0{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield KS(r.Vc.syncEngine),yield Dy(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Ox(this.persistence,new Px,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Cx(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Yb(t,this.persistence);return new Kb(e.asyncQueue,r)}createPersistence(e){const t=$T(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new jT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,zx(),hD(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Hx}}class lR extends YS{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const s=r.Vc.syncEngine;r.sharedClientState instanceof QT&&(r.sharedClientState.syncEngine={jr:kP.bind(null,s),zr:VP.bind(null,s),Wr:UP.bind(null,s),$i:LP.bind(null,s),Qr:OP.bind(null,s)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,ye.Z)(function*(l){yield function FP(n,e){return GS.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=zx();if(!QT.D(t))throw new De(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=$T(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new QT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class My{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>oR(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=RP.bind(null,r.syncEngine),yield mS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gP}createDatastore(e){const t=O0(e.databaseInfo.databaseId),r=new J1(e.databaseInfo);return new tP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=m=>oR(this.syncEngine,m,0),l=Gx.D()?new Gx:new K1,new iP(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,m,w,b){const S=new IP(r,s,u,l,m,w);return b&&(S.vc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Qe(t);Pe("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Iy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function dR(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class gD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class $P{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Lr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),s=Number(r);isNaN(s)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(s);return new vP(JSON.parse(u),t.length+s)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ye.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class HP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(s=(0,ye.Z)(function*(u,l){const m=Qe(u),w=C0(m.serializer)+"/documents",b={documents:l.map(K=>D0(m.serializer,K))},S=yield m.vo("BatchGetDocuments",w,b,l.length),N=new Map;S.forEach(K=>{const me=function l1(n,e){return"found"in e?function(t,r){gt(!!r.found);const s=Rc(t,r.found.name),u=Ur(r.found.updateTime),l=r.found.createTime?Ur(r.found.createTime):yt.min(),m=new Vr({mapValue:{fields:r.found.fields}});return Hn.newFoundDocument(s,u,l,m)}(n,e):"missing"in e?function(t,r){gt(!!r.missing),gt(!!r.readTime);const s=Rc(t,r.missing),u=Ur(r.readTime);return Hn.newNoDocument(s,u)}(n,e):it()}(m.serializer,K);N.set(me.key.toString(),me)});const H=[];return l.forEach(K=>{const me=N.get(K.toString());gt(!!me),H.push(me)}),H}),function(u,l){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new gy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Ke.fromPath(s);e.mutations.push(new wT(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(s,u){const l=Qe(s),m=C0(l.serializer)+"/documents",w={writes:u.map(b=>b0(l.serializer,b))};yield l.Io("Commit",m,w)}),function(s,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(yt.min())?ir.exists(!1):ir.updateTime(t):ir.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new De(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ir.updateTime(t)}return ir.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class GP{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new XT(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ye.Z)(function*(){const t=new HP(e.datastore),r=e.qc(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.Uc(u)}))}).catch(s=>{e.Uc(s)})}))}qc(e){try{const t=this.updateFunction(e);return!ty(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!LM(t)}return!1}}class zP{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Fr.UNAUTHENTICATED,this.clientId=II.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,ye.Z)(function*(m){Pe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Pe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=by(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function mD(n,e){return QS.apply(this,arguments)}function QS(){return QS=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,ye.Z)(function*(u){r.isEqual(u)||(yield kx(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),QS.apply(this,arguments)}function JS(n,e){return XS.apply(this,arguments)}function XS(){return XS=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield eA(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>Jx(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>Jx(e.remoteStore,u)),n._onlineComponents=e}),XS.apply(this,arguments)}function hR(n){return"FirebaseError"===n.name?n.code===oe.FAILED_PRECONDITION||n.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function eA(n){return tA.apply(this,arguments)}function tA(){return tA=(0,ye.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Pe("FirestoreClient","Using user provided OfflineComponentProvider");try{yield mD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!hR(t))throw t;Is("Error using user provided cache. Falling back to memory cache: "+t),yield mD(n,new L0)}}else Pe("FirestoreClient","Using default OfflineComponentProvider"),yield mD(n,new L0);return n._offlineComponents}),tA.apply(this,arguments)}function yD(n){return nA.apply(this,arguments)}function nA(){return nA=(0,ye.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Pe("FirestoreClient","Using user provided OnlineComponentProvider"),yield JS(n,n._uninitializedComponentsProvider._online)):(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield JS(n,new My))),n._onlineComponents}),nA.apply(this,arguments)}function fR(n){return eA(n).then(e=>e.persistence)}function vD(n){return eA(n).then(e=>e.localStore)}function pR(n){return yD(n).then(e=>e.remoteStore)}function rA(n){return yD(n).then(e=>e.syncEngine)}function xy(n){return iA.apply(this,arguments)}function iA(){return iA=(0,ye.Z)(function*(n){const e=yield yD(n),t=e.eventManager;return t.onListen=DP.bind(null,e.syncEngine),t.onUnlisten=CP.bind(null,e.syncEngine),t}),iA.apply(this,arguments)}function mR(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,l,m,w){const b=new gD({next:N=>{u.enqueueAndForget(()=>ES(s,S));const H=N.docs.has(l);!H&&N.fromCache?w.reject(new De(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&N.fromCache&&m&&"server"===m.source?w.reject(new De(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new CS(Wp(l.path),b,{includeMetadataChanges:!0,Ku:!0});return _S(s,S)}(yield xy(n),n.asyncQueue,e,t,r)})),r.promise}function yR(n,e,t={}){const r=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(s,u,l,m,w){const b=new gD({next:N=>{u.enqueueAndForget(()=>ES(s,S)),N.fromCache&&"server"===m.source?w.reject(new De(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),S=new CS(l,b,{includeMetadataChanges:!0,Ku:!0});return _S(s,S)}(yield xy(n),n.asyncQueue,e,t,r)})),r.promise}function vR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const _R=new Map;function sA(n,e,t){if(!t)throw new De(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wR(n,e,t,r){if(!0===e&&!0===r)throw new De(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ER(n){if(!Ke.isDocumentKey(n))throw new De(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function IR(n){if(Ke.isDocumentKey(n))throw new De(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _D(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function on(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_D(n);throw new De(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function DR(n,e){if(e<=0)throw new De(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CR{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new De(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=vR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new De(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new De(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new De(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class V0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CR({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CR(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jb;switch(t.type){case"firstParty":return new wI(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_R.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),_R.delete(e),t.terminate())}(this),Promise.resolve()}}class Qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qn(this.firestore,e,this._key)}}class zi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class Nc extends zi{constructor(e,t,r){super(e,t,Wp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qn(this.firestore,null,new Ke(e))}withConverter(e){return new Nc(this.firestore,e,this._path)}}function TR(n,e,...t){if(n=(0,cn.m9)(n),sA("collection","path",e),n instanceof V0){const r=ln.fromString(e,...t);return IR(r),new Nc(n,null,r)}{if(!(n instanceof Qn||n instanceof Nc))throw new De(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return IR(r),new Nc(n.firestore,null,r)}}function wD(n,e,...t){if(n=(0,cn.m9)(n),1===arguments.length&&(e=II.A()),sA("doc","path",e),n instanceof V0){const r=ln.fromString(e,...t);return ER(r),new Qn(n,null,new Ke(r))}{if(!(n instanceof Qn||n instanceof Nc))throw new De(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ln.fromString(e,...t));return ER(r),new Qn(n.firestore,n instanceof Nc?n.converter:null,new Ke(r))}}function SR(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),(n instanceof Qn||n instanceof Nc)&&(e instanceof Qn||e instanceof Nc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function oA(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),n instanceof zi&&e instanceof zi&&n.firestore===e.firestore&&I(n._query,e._query)&&n.converter===e.converter}class tO{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new XT(this,"async_queue_retry"),this.Xc=()=>{const t=hD();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=hD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=hD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Lr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Fo(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,fr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=vS.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&it()}verifyOperationInProgress(){}sa(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function aA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class nO{constructor(){this._progressObserver={},this._taskCompletionResolver=new Lr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jn extends V0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new tO,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||AR(this),this._firestoreClient.terminate()}}function Br(n){return n._firestoreClient||AR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function AR(n){var e,t,r;const s=n._freezeSettings(),u=(m=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new iT(n._databaseId,m,n._persistenceKey,(b=s).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,vR(b.experimentalLongPollingOptions),b.useFetchStreams));var m,b;n._firestoreClient=new zP(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}function MR(n,e,t){const r=new Lr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield mD(n,t),yield JS(n,e),r.resolve()}catch(s){const u=s;if(!hR(u))throw u;Is("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function xR(n){if(n._initialized||n._terminated)throw new De(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pc(Er.fromBase64String(e))}catch(t){throw new De(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pc(Er.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ad{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class rg{constructor(e){this._methodName=e}}class ED{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Bt(this._lat,e._lat)||Bt(this._long,e._long)}}const fO=/^__.*__$/;class pO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new id(e,this.data,this.fieldMask,t,this.fieldTransforms):new py(e,this.data,t,this.fieldTransforms)}}class RR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new id(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class ID{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new ID(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return bD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(NR(this.ca)&&fO.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class gO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||O0(e)}ya(e,t,r,s=!1){return new ID({ca:e,methodName:t,ga:r,path:pr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ig(n){const e=n._freezeSettings(),t=O0(n._databaseId);return new gO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function DD(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);dA("Data must be an object, but it was:",l,r);const m=kR(r,l);let w,b;if(u.merge)w=new Cs(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const N of u.mergeFields){const H=j0(e,N,t);if(!l.contains(H))throw new De(oe.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);LR(S,H)||S.push(H)}w=new Cs(S),b=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=l.fieldTransforms;return new pO(new Vr(m),w,b)}class B0 extends rg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof B0}}function PR(n,e,t){return new ID({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class uA extends rg{_toFieldTransform(e){return new v0(e.path,new hy)}isEqual(e){return e instanceof uA}}class mO extends rg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=PR(this,e,!0),r=this.pa.map(u=>sg(u,t)),s=new Zp(r);return new v0(e.path,s)}isEqual(e){return this===e}}class yO extends rg{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=PR(this,e,!0),r=this.pa.map(u=>sg(u,t)),s=new Kp(r);return new v0(e.path,s)}isEqual(e){return this===e}}class vO extends rg{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new fy(e.serializer,TM(e.serializer,this.Ia));return new v0(e.path,t)}isEqual(e){return this===e}}function cA(n,e,t,r){const s=n.ya(1,e,t);dA("Data must be an object, but it was:",s,r);const u=[],l=Vr.empty();Sc(r,(w,b)=>{const S=CD(e,w,t);b=(0,cn.m9)(b);const N=s.da(S);if(b instanceof B0)u.push(S);else{const H=sg(b,N);null!=H&&(u.push(S),l.set(S,H))}});const m=new Cs(u);return new RR(l,m,s.fieldTransforms)}function lA(n,e,t,r,s,u){const l=n.ya(1,e,t),m=[j0(e,r,t)],w=[s];if(u.length%2!=0)throw new De(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(j0(e,u[H])),w.push(u[H+1]);const b=[],S=Vr.empty();for(let H=m.length-1;H>=0;--H)if(!LR(b,m[H])){const K=m[H];let me=w[H];me=(0,cn.m9)(me);const Fe=l.da(K);if(me instanceof B0)b.push(K);else{const ke=sg(me,Fe);null!=ke&&(b.push(K),S.set(K,ke))}}const N=new Cs(b);return new RR(S,N,l.fieldTransforms)}function OR(n,e,t,r=!1){return sg(t,n.ya(r?4:3,e))}function sg(n,e){if(FR(n=(0,cn.m9)(n)))return dA("Unsupported field value:",e,n),kR(n,e);if(n instanceof rg)return function(t,r){if(!NR(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let m=sg(l,r.wa(u));null==m&&(m={nullValue:"NULL_VALUE"}),s.push(m),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,cn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return TM(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=On.fromDate(t);return{timestampValue:my(r.serializer,s)}}if(t instanceof On){const s=new On(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:my(r.serializer,s)}}if(t instanceof ED)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pc)return{bytesValue:WM(r.serializer,t._byteString)};if(t instanceof Qn){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ST(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${_D(t)}`)}(n,e)}function kR(n,e){const t={};return PI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Sc(n,(r,s)=>{const u=sg(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function FR(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof ED||n instanceof Pc||n instanceof Qn||n instanceof rg)}function dA(n,e,t){if(!FR(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=_D(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function j0(n,e,t){if((e=(0,cn.m9)(e))instanceof ad)return e._internalPath;if("string"==typeof e)return CD(n,e);throw bD("Field path arguments must be of type string or ",n,!1,void 0,t)}const _O=new RegExp("[~\\*/\\[\\]]");function CD(n,e,t){if(e.search(_O)>=0)throw bD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ad(...e.split("."))._internalPath}catch{throw bD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function bD(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new De(oe.INVALID_ARGUMENT,m+n+w)}function LR(n,e){return n.some(t=>t.isEqual(e))}class $0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new wO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(TD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class wO extends $0{data(){return super.data()}}function TD(n,e){return"string"==typeof e?CD(n,e):e instanceof ad?e._internalPath:e._delegate._internalPath}function VR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hA{}class H0 extends hA{}function Fh(n,e,...t){let r=[];e instanceof hA&&r.push(e),r=r.concat(t),function(s){const u=s.filter(m=>m instanceof Ry).length,l=s.filter(m=>m instanceof G0).length;if(u>1||u>0&&l>0)throw new De(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class G0 extends H0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new G0(e,t,r)}_apply(e){const t=this._parse(e);return $R(e._query,t),new zi(e.firestore,e.converter,g(e._query,t))}_parse(e){const t=ig(e.firestore);return function(s,u,l,m,w,b,S){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new De(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){jR(S,b);const H=[];for(const K of S)H.push(BR(m,s,K));N={arrayValue:{values:H}}}else N=BR(m,s,S)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||jR(S,b),N=OR(l,"where",S,"in"===b||"not-in"===b);return tn.create(w,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ry extends hA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ry(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const m of l)$R(u,m),u=g(u,m)}(e._query,t),new zi(e.firestore,e.converter,g(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fA extends H0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fA(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new De(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new nd(s,u);return function(m,w){if(null===i(m)){const b=o(m);null!==b&&HR(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new xc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class SD extends H0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new SD(e,t,r)}_apply(e){return new zi(e.firestore,e.converter,v(e._query,this._limit,this._limitType))}}class AD extends H0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new AD(e,t,r)}_apply(e){const t=UR(e,this.type,this._docOrFields,this._inclusive);return new zi(e.firestore,e.converter,(s=t,new xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class MD extends H0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new MD(e,t,r)}_apply(e){const t=UR(e,this.type,this._docOrFields,this._inclusive);return new zi(e.firestore,e.converter,(s=t,new xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function UR(n,e,t,r){if(t[0]=(0,cn.m9)(t[0]),t[0]instanceof $0)return function(s,u,l,m,w){if(!m)throw new De(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const S of c(s))if(S.field.isKeyField())b.push(Ah(u,m.key));else{const N=m.data.field(S.field);if(Jl(N))throw new De(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const H=S.field.canonicalString();throw new De(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}b.push(N)}return new td(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=ig(n.firestore);return function(u,l,m,w,b,S){const N=u.explicitOrderBy;if(b.length>N.length)throw new De(oe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let K=0;K<b.length;K++){const me=b[K];if(N[K].field.isKeyField()){if("string"!=typeof me)throw new De(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof me}`);if(!a(u)&&-1!==me.indexOf("/"))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${me}' contains a slash.`);const Fe=u.path.child(ln.fromString(me));if(!Ke.isDocumentKey(Fe))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const ke=new Ke(Fe);H.push(Ah(l,ke))}else{const Fe=OR(m,w,me);H.push(Fe)}}return new td(H,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function BR(n,e,t){if("string"==typeof(t=(0,cn.m9)(t))){if(""===t)throw new De(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a(e)&&-1!==t.indexOf("/"))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ln.fromString(t));if(!Ke.isDocumentKey(r))throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ah(n,new Ke(r))}if(t instanceof Qn)return Ah(n,t._key);throw new De(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_D(t)}.`)}function jR(n,e){if(!Array.isArray(n)||0===n.length)throw new De(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $R(n,e){if(e.isInequality()){const r=o(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new De(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=i(n);null!==u&&HR(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new De(oe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function HR(n,e,t){if(!t.isEqual(e))throw new De(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class pA{convertValue(e,t="none"){switch(pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ws(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Sc(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ED(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=jp(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($p(e));default:return null}}convertTimestamp(e){const t=fu(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ln.fromString(e);gt(rx(r));const s=new Xl(r.get(1),r.get(3)),u=new Ke(r.popFirst(5));return s.isEqual(t)||fr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function xD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class MO extends pA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}class og{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ud extends $0{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new z0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(TD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class z0 extends ud{data(e={}){return super.data(e)}}class Lh{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new og(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new z0(this._firestore,this._userDataWriter,r.key,r,new og(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new z0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new og(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const m=new z0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new og(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:RO(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function RO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function zR(n,e){return n instanceof ud&&e instanceof ud?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Lh&&e instanceof Lh&&n._firestore===e._firestore&&oA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Vh extends pA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qn(this.firestore,null,t)}}function qR(n,e,t){n=on(n,Qn);const r=on(n.firestore,Jn),s=xD(n.converter,e,t);return Ny(r,[DD(ig(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,ir.none())])}function WR(n,e,t,...r){n=on(n,Qn);const s=on(n.firestore,Jn),u=ig(s);let l;return l="string"==typeof(e=(0,cn.m9)(e))||e instanceof ad?lA(u,"updateDoc",n._key,e,t,r):cA(u,"updateDoc",n._key,e),Ny(s,[l.toMutation(n._key,ir.exists(!0))])}function ZR(n,...e){var t,r,s;n=(0,cn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||aA(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(aA(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(s=N.complete)||void 0===s?void 0:s.bind(N)}let w,b,S;if(n instanceof Qn)b=on(n.firestore,Jn),S=Wp(n._key.path),w={next:N=>{e[l]&&e[l](gA(b,n,N))},error:e[l+1],complete:e[l+2]};else{const N=on(n,zi);b=on(N.firestore,Jn),S=N._query;const H=new Vh(b);w={next:K=>{e[l]&&e[l](new Lh(b,H,N,K))},error:e[l+1],complete:e[l+2]},VR(n._query)}return function(N,H,K,me){const Fe=new gD(me),ke=new CS(H,Fe,K);return N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return _S(yield xy(N),ke)})),()=>{Fe.Dc(),N.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return ES(yield xy(N),ke)}))}}(Br(b),S,m,w)}function Ny(n,e){return function(t,r){const s=new Lr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function bP(n,e,t){return MS.apply(this,arguments)}(yield rA(t),r,s)})),s.promise}(Br(n),e)}function gA(n,e,t){const r=t.docs.get(e._key),s=new Vh(n);return new ud(n,s,e._key,r,new og(t.hasPendingWrites,t.fromCache),e.converter)}const KO={maxAttempts:5};class KR{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ig(e)}set(e,t,r){this._verifyNotCommitted();const s=Uh(e,this._firestore),u=xD(s.converter,t,r),l=DD(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(l.toMutation(s._key,ir.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Uh(e,this._firestore);let l;return l="string"==typeof(t=(0,cn.m9)(t))||t instanceof ad?lA(this._dataReader,"WriteBatch.update",u._key,t,r,s):cA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,ir.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Uh(e,this._firestore);return this._mutations=this._mutations.concat(new gy(t._key,ir.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Uh(n,e){if((n=(0,cn.m9)(n)).firestore!==e)throw new De(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class YO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ig(e)}get(e){const t=Uh(e,this._firestore),r=new MO(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return it();const u=s[0];if(u.isFoundDocument())return new $0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new $0(this._firestore,r,t._key,null,t.converter);throw it()})}set(e,t,r){const s=Uh(e,this._firestore),u=xD(s.converter,t,r),l=DD(this._dataReader,"Transaction.set",s._key,u,null!==s.converter,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const u=Uh(e,this._firestore);let l;return l="string"==typeof(t=(0,cn.m9)(t))||t instanceof ad?lA(this._dataReader,"Transaction.update",u._key,t,r,s):cA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Uh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Uh(e,this._firestore),r=new Vh(this._firestore);return super.get(e).then(s=>new ud(this._firestore,r,t._key,s._document,new og(!1,!1),t.converter))}}!function(n,e=!0){Kl=ha.SDK_VERSION,(0,ha._registerComponent)(new fm.wA("firestore",(t,{instanceIdentifier:r,options:s})=>{const u=t.getProvider("app").getImmediate(),l=new Jn(new _I(t.getProvider("auth-internal")),new Hb(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new De(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xl(m.options.projectId,w)}(u,r),u);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),(0,ha.registerVersion)(Jm,"3.12.0",n),(0,ha.registerVersion)(Jm,"3.12.0","esm2017")}();function mA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function QR(){if(typeof Uint8Array>"u")throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function JR(){if(!function kI(){return typeof atob<"u"}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}class q0{constructor(e){this._delegate=e}static fromBase64String(e){return JR(),new q0(Pc.fromBase64String(e))}static fromUint8Array(e){return QR(),new q0(Pc.fromUint8Array(e))}toBase64(){return JR(),this._delegate.toBase64()}toUint8Array(){return QR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yA(n){return function sk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ok{enableIndexedDbPersistence(e,t){return function iO(n,e){xR(n=on(n,Jn));const t=Br(n);if(t._uninitializedComponentsProvider)throw new De(oe.FAILED_PRECONDITION,"SDK cache is already specified.");Is("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),s=new My;return MR(t,s,new YS(s,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function sO(n){xR(n=on(n,Jn));const e=Br(n);if(e._uninitializedComponentsProvider)throw new De(oe.FAILED_PRECONDITION,"SDK cache is already specified.");Is("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new My;return MR(e,r,new lR(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function oO(n){if(n._initialized&&!n._terminated)throw new De(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Lr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!va.D())return Promise.resolve();const s=r+"main";yield va.delete(s)}),function(r){return t.apply(this,arguments)})($T(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class XR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Xl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Is("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function bR(n,e,t,r={}){var s;const u=(n=on(n,V0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Is("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=Fr.MOCK_USER;else{l=(0,cn.Sg)(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new De(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Fr(w)}n._authCredentials=new vI(new yI(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function uO(n){return function qP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield fR(n),t=yield pR(n);return e.setNetworkEnabled(!0),function(r){const s=Qe(r);return s.vu.delete(0),k0(s)}(t)}))}(Br(n=on(n,Jn)))}(this._delegate)}disableNetwork(){return function cO(n){return function WP(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield fR(n),t=yield pR(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(s){const u=Qe(s);u.vu.add(0),yield Iy(u),u.bu.set("Offline")}),function(s){return r.apply(this,arguments)})(t);var r}))}(Br(n=on(n,Jn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function aO(n){return function(e){const t=new Lr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function MP(n,e){return OS.apply(this,arguments)}(yield rA(e),t)})),t.promise}(Br(n=on(n,Jn)))}(this._delegate)}onSnapshotsInSync(e){return function BO(n,e){return function YP(n,e){const t=new gD(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield xy(n),s=t,Qe(r).ku.add(s),void s.next();var r,s})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield xy(n),s=t,void Qe(r).ku.delete(s);var r,s}))}}(Br(n=on(n,Jn)),aA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Py(this,TR(this._delegate,e))}catch(t){throw bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ia(this,wD(this._delegate,e))}catch(t){throw bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ts(this,function eO(n,e){if(n=on(n,V0),sA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zi(n,null,(t=e,new xc(ln.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function QO(n,e,t){n=on(n,Jn);const r=Object.assign(Object.assign({},KO),t);return function(s){if(s.maxAttempts<1)throw new De(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,u,l){const m=new Lr;return s.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const w=yield function gR(n){return yD(n).then(e=>e.datastore)}(s);new GP(s.asyncQueue,w,l,u,m).run()})),m.promise}(Br(n),s=>e(new YO(n,s)),r)}(this._delegate,t=>e(new eN(this,t)))}batch(){return Br(this._delegate),new tN(new KR(this._delegate,e=>Ny(this._delegate,e)))}loadBundle(e){return function lO(n,e){const t=Br(n=on(n,Jn)),r=new nO;return function QP(n,e,t,r){const s=function(u,l){let m;return m="string"==typeof u?UM().encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return dR(w,b);if(w instanceof ArrayBuffer)return dR(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new $P(w,l);var w}(t,O0(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function BP(n,e,t){const r=Qe(n);var s;(s=(0,ye.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function(H,K){const me=Qe(H),Fe=Ur(K.createTime);return me.persistence.runTransaction("hasNewerBundle","readonly",ke=>me.qs.getBundleMetadata(ke,K.id)).then(ke=>!!ke&&ke.createTime.compareTo(Fe)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(tR(w));const b=new _P(w,u.localStore,l.serializer);let S=yield l.bc();for(;S;){const H=yield b.zu(S);H&&m._updateProgress(H),S=yield l.bc()}const N=yield b.complete();return yield od(u,N.Ju,void 0),yield function(H,K){const me=Qe(H);return me.persistence.runTransaction("Save bundle","readwrite",Fe=>me.qs.saveBundleMetadata(Fe,K))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Hu)}catch(w){return Is("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(u,l,m){return s.apply(this,arguments)})(r,e,t).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield rA(n),s,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function dO(n,e){return function JP(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const s=Qe(t);return s.persistence.runTransaction("Get named query","readonly",u=>s.qs.getNamedQuery(u,r))}(yield vD(n),e)}))}(Br(n=on(n,Jn)),e).then(t=>t?new zi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ts(this,t):null)}}class RD extends pA{constructor(e){super(),this.firestore=e}convertBytes(e){return new q0(new Pc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ia.forKey(t,this.firestore,null)}}class eN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}get(e){const t=ug(e);return this._delegate.get(t).then(r=>new W0(this._firestore,new ud(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const s=ug(e);return r?(mA("Transaction.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=ug(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=ug(e);return this._delegate.delete(t),this}}class tN{constructor(e){this._delegate=e}set(e,t,r){const s=ug(e);return r?(mA("WriteBatch.set",r),this._delegate.set(s,t,r)):this._delegate.set(s,t),this}update(e,t,r,...s){const u=ug(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...s),this}delete(e){const t=ug(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ag{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new z0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Z0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ag.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new ag(e,new RD(e),t),s.set(t,u)),u}}ag.INSTANCES=new WeakMap;class Ia{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ia(t,new Qn(t._delegate,r,new Ke(e)))}static forKey(e,t,r){return new Ia(t,new Qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Py(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Py(this.firestore,TR(this._delegate,e))}catch(t){throw bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,cn.m9)(e))instanceof Qn&&SR(this._delegate,e)}set(e,t){t=mA("DocumentReference.set",t);try{return t?qR(this._delegate,e,t):qR(this._delegate,e)}catch(r){throw bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WR(this._delegate,e):WR(this._delegate,e,t,...r)}catch(s){throw bs(s,"updateDoc()","DocumentReference.update()")}}delete(){return function VO(n){return Ny(on(n.firestore,Jn),[new gy(n._key,ir.none())])}(this._delegate)}onSnapshot(...e){const t=nN(e),r=rN(e,s=>new W0(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return ZR(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function PO(n){n=on(n,Qn);const e=on(n.firestore,Jn),t=Br(e),r=new Vh(e);return function ZP(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,l){try{const m=yield function(w,b){const S=Qe(w);return S.persistence.runTransaction("read document","readonly",N=>S.localDocuments.getDocument(N,b))}(s,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new De(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=by(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield vD(n),e,t);var r})),t.promise}(t,n._key).then(s=>new ud(e,r,n._key,s,new og(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function OO(n){n=on(n,Qn);const e=on(n.firestore,Jn);return mR(Br(e),n._key,{source:"server"}).then(t=>gA(e,n,t))}(this._delegate):function NO(n){n=on(n,Qn);const e=on(n.firestore,Jn);return mR(Br(e),n._key).then(t=>gA(e,n,t))}(this._delegate),t.then(r=>new W0(this.firestore,new ud(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ia(this.firestore,this._delegate.withConverter(e?ag.getInstance(this.firestore,e):null))}}function bs(n,e,t){return n.message=n.message.replace(e,t),n}function nN(n){for(const e of n)if("object"==typeof e&&!yA(e))return e;return{}}function rN(n,e){var t,r;let s;return s=yA(n[0])?n[0]:yA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class W0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ia(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zR(this._delegate,e._delegate)}}class Z0 extends W0{data(e){const t=this._delegate.data(e);return function W_(n,e){n||it()}(void 0!==t),t}}class Ts{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new RD(e)}where(e,t,r){try{return new Ts(this.firestore,Fh(this._delegate,function EO(n,e,t){const r=e,s=TD("where",n);return G0._create(s,r,t)}(e,t,r)))}catch(s){throw bs(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ts(this.firestore,Fh(this._delegate,function IO(n,e="asc"){const t=e,r=TD("orderBy",n);return fA._create(r,t)}(e,t)))}catch(r){throw bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ts(this.firestore,Fh(this._delegate,function DO(n){return DR("limit",n),SD._create("limit",n,"F")}(e)))}catch(t){throw bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ts(this.firestore,Fh(this._delegate,function CO(n){return DR("limitToLast",n),SD._create("limitToLast",n,"L")}(e)))}catch(t){throw bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ts(this.firestore,Fh(this._delegate,function bO(...n){return AD._create("startAt",n,!0)}(...e)))}catch(t){throw bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ts(this.firestore,Fh(this._delegate,function TO(...n){return AD._create("startAfter",n,!1)}(...e)))}catch(t){throw bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ts(this.firestore,Fh(this._delegate,function SO(...n){return MD._create("endBefore",n,!1)}(...e)))}catch(t){throw bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ts(this.firestore,Fh(this._delegate,function AO(...n){return MD._create("endAt",n,!0)}(...e)))}catch(t){throw bs(t,"endAt()","Query.endAt()")}}isEqual(e){return oA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function FO(n){n=on(n,zi);const e=on(n.firestore,Jn),t=Br(e),r=new Vh(e);return function KP(n,e){const t=new Lr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(s,u,l){try{const m=yield uD(s,u,!0),w=new iR(u,m.ir),b=w.sc(m.documents),S=w.applyChanges(b,!1);l.resolve(S.snapshot)}catch(m){const w=by(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield vD(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Lh(e,r,n,s))}(this._delegate):"server"===e?.source?function LO(n){n=on(n,zi);const e=on(n.firestore,Jn),t=Br(e),r=new Vh(e);return yR(t,n._query,{source:"server"}).then(s=>new Lh(e,r,n,s))}(this._delegate):function kO(n){n=on(n,zi);const e=on(n.firestore,Jn),t=Br(e),r=new Vh(e);return VR(n._query),yR(t,n._query).then(s=>new Lh(e,r,n,s))}(this._delegate),t.then(r=>new vA(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=nN(e),r=rN(e,s=>new vA(this.firestore,new Lh(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return ZR(this._delegate,t,r)}withConverter(e){return new Ts(this.firestore,this._delegate.withConverter(e?ag.getInstance(this.firestore,e):null))}}class uk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Z0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ts(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Z0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Z0(this._firestore,r))})}isEqual(e){return zR(this._delegate,e._delegate)}}class Py extends Ts{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ia(this.firestore,e):null}doc(e){try{return new Ia(this.firestore,void 0===e?wD(this._delegate):wD(this._delegate,e))}catch(t){throw bs(t,"doc()","CollectionReference.doc()")}}add(e){return function UO(n,e){const t=on(n.firestore,Jn),r=wD(n),s=xD(n.converter,e);return Ny(t,[DD(ig(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,ir.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ia(this.firestore,t))}isEqual(e){return SR(this._delegate,e._delegate)}withConverter(e){return new Py(this.firestore,this._delegate.withConverter(e?ag.getInstance(this.firestore,e):null))}}function ug(n){return on(n,Qn)}class _A{constructor(...e){this._delegate=new ad(...e)}static documentId(){return new _A(pr.keyField().canonicalString())}isEqual(e){return(e=(0,cn.m9)(e))instanceof ad&&this._delegate._internalPath.isEqual(e._internalPath)}}class cg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function XO(){return new uA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new cg(e)}static delete(){const e=function JO(){return new B0("deleteField")}();return e._methodName="FieldValue.delete",new cg(e)}static arrayUnion(...e){const t=function ek(...n){return new mO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new cg(t)}static arrayRemove(...e){const t=function tk(...n){return new yO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new cg(t)}static increment(e){const t=function nk(n){return new vO("increment",n)}(e);return t._methodName="FieldValue.increment",new cg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const ck={Firestore:XR,GeoPoint:ED,Timestamp:On,Blob:q0,Transaction:eN,WriteBatch:tN,DocumentReference:Ia,DocumentSnapshot:W0,Query:Ts,QueryDocumentSnapshot:Z0,QuerySnapshot:vA,CollectionReference:Py,FieldPath:_A,FieldValue:cg,setLogLevel:function ak(n){!function yM(n){ko.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function dk(n){(function lk(n,e){n.INTERNAL.registerComponent(new fm.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},ck)))})(n,(e,t)=>new XR(e,t,new ok)),n.registerVersion("@firebase/firestore-compat","0.3.9")}(DE.Z);var hk=k(6451),ND=k(5363),fk=k(6063);class pk extends Mr.x{constructor(e=1/0,t=1/0,r=fk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var gk=k(3099);function iN(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,gk.B)({connector:()=>new pk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function sN(n,e){return(0,Wa.m)(e)?Kn(()=>n,e):Kn(()=>n)}var wA=k(9468);k(259);const IA=new Map,aN={activated:!1,tokenObservers:[]},wk={initialized:!1,enabled:!1};function Ir(n){return IA.get(n)||Object.assign({},aN)}function OD(){return wk}const DA="https://content-firebaseappcheck.googleapis.com/v1",Ck="exchangeDebugToken",uN={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Tk{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new cn.BH,yield function Sk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new cn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const qi=new cn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function TA(){return TA=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const N=yield s.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw qi.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw qi.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw qi.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),S=Date.now();return{token:m.token,expireTimeMillis:S+b,issuedAtTimeMillis:S}}),TA.apply(this,arguments)}const Rk="firebase-app-check-database",Nk=1,K0="firebase-app-check-store";let VD=null;function SA(){return SA=(0,ye.Z)(function*(n,e){const r=(yield function dN(){return VD||(VD=new Promise((n,e)=>{try{const t=indexedDB.open(Rk,Nk);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(qi.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(K0,{keyPath:"compositeKey"})}}catch(t){e(qi.create("storage-open",{originalErrorMessage:t?.message}))}}),VD)}()).transaction(K0,"readwrite"),u=r.objectStore(K0).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(qi.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),SA.apply(this,arguments)}const Y0=new lu.Yd("@firebase/app-check");function xA(n,e){return(0,cn.hl)()?function Ok(n,e){return function hN(n,e){return SA.apply(this,arguments)}(function pN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Y0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function OA(){return OA=(0,ye.Z)(function*(){const n=OD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),OA.apply(this,arguments)}const Bk={error:"UNKNOWN_ERROR"};function jk(n){return cn.US.encodeString(JSON.stringify(n),!1)}function UD(n){return kA.apply(this,arguments)}function kA(){return kA=(0,ye.Z)(function*(n,e=!1){const t=n.app;!function CA(n){if(!Ir(n).activated)throw qi.create("use-before-activation",{appName:n.name})}(t);const r=Ir(t);let u,s=r.token;if(s&&!Oy(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(Oy(w)?s=w:yield xA(t,void 0))}if(!e&&s&&Oy(s))return{token:s.token};let m,l=!1;if(function NA(){return OD().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function LD(n,e){return TA.apply(this,arguments)}(function cN(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${DA}/projects/${t}/apps/${r}:${Ck}?key=${s}`,body:{debug_token:e}}}(t,yield function PA(){return OA.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield xA(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield Ir(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?Y0.warn(w.message):Y0.error(w),u=w}return s?u?m=Oy(s)?{token:s.token,internalError:u}:yN(u):(m={token:s.token},r.token=s,yield xA(t,s)):m=yN(u),l&&function mN(n,e){const t=Ir(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),kA.apply(this,arguments)}function VA(n,e){const t=Ir(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function gN(n){const{app:e}=n,t=Ir(e);let r=t.tokenRefresher;r||(r=function Hk(n){const{app:e}=n;return new Tk((0,ye.Z)(function*(){let r;if(r=Ir(e).token?yield UD(n,!0):yield UD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ir(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},uN.RETRIAL_MIN_WAIT,uN.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Oy(n){return n.expireTimeMillis-Date.now()>0}function yN(n){return{token:jk(Bk),error:n}}class Gk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ir(this.app);for(const t of e)VA(this.app,t.next);return Promise.resolve()}}const bN="app-check-internal";!function iF(){(0,ha._registerComponent)(new fm.wA("app-check",n=>function zk(n,e){return new Gk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(bN).initialize()})),(0,ha._registerComponent)(new fm.wA(bN,n=>function qk(n){return{getToken:e=>UD(n,e),addTokenListener:e=>function LA(n,e,t,r){const{app:s}=n,u=Ir(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Oy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),gN(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>gN(n))}(n,"INTERNAL",e),removeTokenListener:e=>VA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ha.registerVersion)("@firebase/app-check","0.7.0")}();class $A{constructor(){return(0,kr.vb)("app-check")}}typeof window<"u"&&window;var cF=k(9260);const SN=new f.OlP("angularfire2.auth.use-emulator"),AN=new f.OlP("angularfire2.auth.settings"),MN=new f.OlP("angularfire2.auth.tenant-id"),xN=new f.OlP("angularfire2.auth.langugage-code"),RN=new f.OlP("angularfire2.auth.use-device-language"),NN=new f.OlP("angularfire.auth.persistence"),PN=(n,e,t,r,s,u,l,m)=>(0,xo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[b,S]of Object.entries(l))w.settings[b]=S;return m&&w.setPersistence(m),w},[t,r,s,u,l,m]);let ON=(()=>{class n{constructor(t,r,s,u,l,m,w,b,S,N,H,K){const me=new Mr.x,Fe=ut(void 0).pipe((0,ND.Q)(l.outsideAngular),Kn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2644)))),(0,_t.U)(()=>(0,xo.on)(t,u,r)),(0,_t.U)(ke=>PN(ke,u,m,b,S,N,w,H)),iN({bufferSize:1,refCount:!1}));if(cs(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{Fe.pipe(Vi()).subscribe();const Dt=Fe.pipe(Kn(Ft=>Ft.getRedirectResult().then(Wt=>Wt,()=>null)),kr.iC,iN({bufferSize:1,refCount:!1})),At=Fe.pipe(Kn(Ft=>new _i.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ft.onAuthStateChanged(dn=>Wt.next(dn),dn=>Wt.error(dn),()=>Wt.complete()))})))),wt=Fe.pipe(Kn(Ft=>new _i.y(Wt=>({unsubscribe:u.runOutsideAngular(()=>Ft.onIdTokenChanged(dn=>Wt.next(dn),dn=>Wt.error(dn),()=>Wt.complete()))}))));this.authState=Dt.pipe(sN(At),(0,wA.R)(l.outsideAngular),(0,ND.Q)(l.insideAngular)),this.user=Dt.pipe(sN(wt),(0,wA.R)(l.outsideAngular),(0,ND.Q)(l.insideAngular)),this.idToken=this.user.pipe(Kn(Ft=>Ft?(0,un.D)(Ft.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(Kn(Ft=>Ft?(0,un.D)(Ft.getIdTokenResult()):ut(null))),this.credential=(0,hk.T)(Dt,me,this.authState.pipe(oi(Ft=>!Ft))).pipe((0,_t.U)(Ft=>Ft?.user?Ft:null),(0,wA.R)(l.outsideAngular),(0,ND.Q)(l.insideAngular))}return(0,xo.pX)(this,Fe,u,{spy:{apply:(ke,Dt,At)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&At.then(wt=>me.next(wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xo.Dh),f.LFG(xo.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(kr.HU),f.LFG(SN,8),f.LFG(AN,8),f.LFG(MN,8),f.LFG(xN,8),f.LFG(RN,8),f.LFG(NN,8),f.LFG($A,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function kN(n,e){return function dF(n,e=sb.z){return new _i.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function GA(n,e){return kN(n,e).pipe((0,_t.U)(t=>({payload:t,type:"query"})))}function jD(n,e){return GA(n,e).pipe(wo(void 0),Fl(),(0,_t.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=s.find(S=>S.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function FN(n,e,t){return jD(n,t).pipe(ec((r,s)=>function fF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function pF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function ob(n,e=ks.y){return n=n??IE,(0,xr.e)((t,r)=>{let s,u=!0;t.subscribe((0,vr.x)(r,l=>{const m=e(l);(u||!n(s,m))&&(u=!1,s=m,r.next(l))}))})}(),(0,_t.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function zA(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function LN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class VN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=jD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,_t.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(wo(void 0),Fl(),oi(([r,s])=>s.length>0||!r),(0,_t.U)(([r,s])=>s),kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ec((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=LN(e);return FN(this.query,t,this.afs.schedulers.outsideAngular).pipe(kr.iC)}valueChanges(e={}){return GA(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),kr.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(kr.iC)}add(e){return this.ref.add(e)}doc(e){return new UN(this.ref.doc(e),this.afs)}}class UN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=$N(r,t);return new VN(s,u,this.afs)}snapshotChanges(){return function hF(n,e){return kN(n,e).pipe(wo(void 0),Fl(),(0,_t.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(kr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,_t.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(kr.iC)}}class gF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?jD(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),oi(t=>t.length>0),kr.iC):jD(this.query,this.afs.schedulers.outsideAngular).pipe(kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(ec((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=LN(e);return FN(this.query,t,this.afs.schedulers.outsideAngular).pipe(kr.iC)}valueChanges(e={}){return GA(this.query,this.afs.schedulers.outsideAngular).pipe((0,_t.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),kr.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(kr.iC)}}const BN=new f.OlP("angularfire2.enableFirestorePersistence"),jN=new f.OlP("angularfire2.firestore.persistenceSettings"),mF=new f.OlP("angularfire2.firestore.settings"),yF=new f.OlP("angularfire2.firestore.use-emulator");function $N(n,e=(t=>t)){return{query:e(n),ref:n}}let HN=(()=>{class n{constructor(t,r,s,u,l,m,w,b,S,N,H,K,me,Fe,ke,Dt,At){this.schedulers=w;const wt=(0,xo.on)(t,m,r),Ft=S;N&&PN(wt,m,H,me,Fe,ke,K,Dt),[this.firestore,this.persistenceEnabled$]=(0,xo.cc)(`${wt.name}.firestore`,"AngularFirestore",wt.name,()=>{const Wt=m.runOutsideAngular(()=>wt.firestore());if(u&&Wt.settings(u),Ft&&Wt.useEmulator(...Ft),s&&!cs(l)){const dn=()=>{try{return(0,un.D)(Wt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(is){return typeof console<"u"&&console.warn(is),ut(!1)}};return[Wt,m.runOutsideAngular(dn)]}return[Wt,ut(!1)]},[u,Ft,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=$N(s,r),m=this.schedulers.ngZone.run(()=>u);return new VN(m,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new gF(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new UN(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(xo.Dh),f.LFG(xo.xv,8),f.LFG(BN,8),f.LFG(mF,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(kr.HU),f.LFG(jN,8),f.LFG(yF,8),f.LFG(ON,8),f.LFG(SN,8),f.LFG(AN,8),f.LFG(MN,8),f.LFG(xN,8),f.LFG(RN,8),f.LFG(NN,8),f.LFG($A,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vF=(()=>{class n{constructor(){cF.Z.registerVersion("angularfire",kr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:BN,useValue:!0},{provide:jN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[HN]}),n})(),GN=(()=>{class n{constructor(t){this._db=t,this.dbPath="/WishList",this.wishesRef=t.collection(this.dbPath)}getAllWishes(){return this.wishesRef}addWish(t){return this.wishesRef.add({...t})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(HN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function _F(n,e){if(1&n&&(f.TgZ(0,"tr")(1,"td",7)(2,"div"),f._uU(3),f.qZA()()()),2&n){const t=e.$implicit;f.xp6(3),f.Oqu(t.title)}}let wF=(()=>{class n{constructor(t){this._wishService=t}ngOnInit(){this.retrieveWishes()}retrieveWishes(){this._wishService.getAllWishes().snapshotChanges().pipe((0,_t.U)(t=>t.map(r=>({id:r.payload.doc.id,...r.payload.doc.data()})))).subscribe(t=>{this.wishes=t})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(GN))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-wish-list"]],decls:13,vars:1,consts:[[1,"card"],[1,"card-header","bg-info","text-white"],[1,"card-body"],[1,"table-responsive-md"],[1,"table","table-striped","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h5"),f._uU(3,"Wish List"),f.qZA()(),f.TgZ(4,"div",2)(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),f._uU(10,"Title"),f.qZA()()(),f.TgZ(11,"tbody"),f.YNc(12,_F,4,1,"tr",6),f.qZA()()()()()),2&t&&(f.xp6(12),f.Q6J("ngForOf",r.wishes))},dependencies:[Ks]}),n})();function EF(n,e){1&n&&(f.TgZ(0,"div",16),f._uU(1,"ths title is required"),f.qZA())}const IF=[{path:"",redirectTo:"products",pathMatch:"full"},{path:"products",component:$g},{path:"products/:id",component:bv},{path:"promotions",component:xw},{path:"addProduct",component:ib},{path:"wishes",component:wF},{path:"addWish",component:(()=>{class n{constructor(t,r,s){this._wishService=t,this._formBuider=r,this._routerService=s,this.wishForm=this._formBuider.group({title:["",Bf.required],marque:[""],lien:[""],image:[""]})}ngOnInit(){}addWish(){this._wishService.addWish({title:this.wishForm.value.title,marque:this.wishForm.value.marque,lien:this.wishForm.value.lien,image:this.wishForm.value.image}),this._routerService.navigate(["/wishes"])}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(GN),f.Y36(_E),f.Y36(Ci))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-add-wish"]],decls:26,vars:2,consts:[[1,"card"],[1,"card-header","bg-info","text-white"],[1,"card-body"],[1,"row"],[1,"col-md-6",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","wishTitle",1,"form-label"],["type","text","formControlName","title","id","wishTitle",1,"form-control"],["class","text-danger",4,"ngIf"],["for","wishMarque",1,"form-label"],["type","string","formControlName","marque","id","wishMarque",1,"form-control"],["for","wishLien",1,"form-label"],["type","string","formControlName","lien","id","wishLien",1,"form-control"],["for","wishImage",1,"form-label"],["type","string","formControlName","image","id","wishImage",1,"form-control"],["type","submit",1,"btn","btn-primary"],[1,"text-danger"]],template:function(t,r){if(1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h5"),f._uU(3,"Wish Form (Reactive)"),f.qZA()(),f.TgZ(4,"div",2)(5,"div",3)(6,"form",4),f.NdJ("ngSubmit",function(){return r.addWish()}),f.TgZ(7,"div",5)(8,"label",6),f._uU(9,"Title"),f.qZA(),f._UZ(10,"input",7),f.YNc(11,EF,2,0,"div",8),f.qZA(),f.TgZ(12,"div",5)(13,"label",9),f._uU(14,"Marque"),f.qZA(),f._UZ(15,"input",10),f.qZA(),f.TgZ(16,"div",5)(17,"label",11),f._uU(18,"Lien"),f.qZA(),f._UZ(19,"input",12),f.qZA(),f.TgZ(20,"div",5)(21,"label",13),f._uU(22,"Image"),f.qZA(),f._UZ(23,"input",14),f.qZA(),f.TgZ(24,"button",15),f._uU(25,"Add To Wish"),f.qZA()()()()()),2&t){let s;f.xp6(6),f.Q6J("formGroup",r.wishForm),f.xp6(5),f.Q6J("ngIf",(null==(s=r.wishForm.get("title"))?null:s.touched)&&(null==(s=r.wishForm.get("title"))?null:s.invalid))}},dependencies:[ss,ep,Uf,Zg,Hf,tp,np]}),n})()}];let DF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[EC.forRoot(IF),EC]}),n})();const CF=function(){return["/wishes"]},bF=function(){return["/addProduct"]},TF=function(){return["/addWish"]};let SF=(()=>{class n{constructor(t){this._cartService=t,this.length=0}ngOnInit(){this._cartService.countObservable.subscribe({next:t=>this.length=t,error:t=>console.log("ATTENTION, erreur : "+t)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Hg))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-nabvar"]],decls:27,vars:7,consts:[[1,"navbar","navbar-expand-md","navbar-light","bg-light"],[1,"container"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#collapsibleNavId","aria-controls","collapsibleNavId","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler","d-lg-none"],[1,"navbar-toggler-icon"],["id","collapsibleNavId",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mt-2","mt-lg-0"],[1,"nav-item"],["href","#","aria-current","page",1,"nav-link","active"],[1,"visually-hidden"],["active","","routerLinkActive","router-link-active",1,"nav-link",3,"routerLink"],[1,"navbar-nav","me-2","mt-2","mt-lg-0"],[1,"bi","bi-cart"],[1,"badge","bg-success"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"ProductsApp"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"Catalogue "),f.TgZ(11,"span",9),f._uU(12,"(current)"),f.qZA()()(),f.TgZ(13,"li",7)(14,"a",10),f._uU(15,"Wishes"),f.qZA()(),f.TgZ(16,"li",7)(17,"a",10),f._uU(18,"Add Product"),f.qZA()(),f.TgZ(19,"li",7)(20,"a",10),f._uU(21,"Add Wish"),f.qZA()()(),f.TgZ(22,"ul",11)(23,"li",7),f._UZ(24,"i",12),f.TgZ(25,"span",13),f._uU(26),f.qZA()()()()()()),2&t&&(f.xp6(14),f.Q6J("routerLink",f.DdM(4,CF)),f.xp6(3),f.Q6J("routerLink",f.DdM(5,bF)),f.xp6(3),f.Q6J("routerLink",f.DdM(6,TF)),f.xp6(6),f.Oqu(r.length))},dependencies:[Nf,Ew]}),n})(),AF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-footer"]],decls:3,vars:0,template:function(t,r){1&t&&(f._UZ(0,"hr"),f.TgZ(1,"p"),f._uU(2,"ETNIC 2023, Tous droits r\xe9serv\xe9s"),f.qZA())}}),n})(),MF=(()=>{class n{constructor(){this.title="products-app"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container-fluid"]],template:function(t,r){1&t&&(f._UZ(0,"app-nabvar"),f.TgZ(1,"div",0),f._UZ(2,"router-outlet")(3,"app-footer"),f.qZA())},dependencies:[Z,SF,AF]}),n})();const xF_firebase={apiKey:"AIzaSyCDSGOYNr0UAv_v2fTdKucAOAwkIrkNBsc",authDomain:"products-app-545a0.firebaseapp.com",projectId:"products-app-545a0",storageBucket:"products-app-545a0.appspot.com",messagingSenderId:"621916163474",appId:"1:621916163474:web:d931953162e0fa28f1854b"};let RF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[MF]}),n.\u0275inj=f.cJS({imports:[ea,DF,wE,EE,xo.hO.initializeApp(xF_firebase),vF]}),n})();Yc().bootstrapModule(RF).catch(n=>console.error(n))},9751:(mt,Ce,k)=>{k.d(Ce,{y:()=>ve});var f=k(2961),Y=k(727),O=k(8822),re=k(9635),ie=k(2416),se=k(576),pe=k(2806);let ve=(()=>{class q{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const Ze=new q;return Ze.source=this,Ze.operator=Ie,Ze}subscribe(Ie,Ze,lt){const he=function B(q){return q&&q instanceof f.Lv||function j(q){return q&&(0,se.m)(q.next)&&(0,se.m)(q.error)&&(0,se.m)(q.complete)}(q)&&(0,Y.Nn)(q)}(Ie)?Ie:new f.Hp(Ie,Ze,lt);return(0,pe.x)(()=>{const{operator:Me,source:xe}=this;he.add(Me?Me.call(he,xe):xe?this._subscribe(he):this._trySubscribe(he))}),he}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(Ze){Ie.error(Ze)}}forEach(Ie,Ze){return new(Ze=ce(Ze))((lt,he)=>{const Me=new f.Hp({next:xe=>{try{Ie(xe)}catch(Ue){he(Ue),Me.unsubscribe()}},error:he,complete:lt});this.subscribe(Me)})}_subscribe(Ie){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(Ie)}[O.L](){return this}pipe(...Ie){return(0,re.U)(Ie)(this)}toPromise(Ie){return new(Ie=ce(Ie))((Ze,lt)=>{let he;this.subscribe(Me=>he=Me,Me=>lt(Me),()=>Ze(he))})}}return q.create=He=>new q(He),q})();function ce(q){var He;return null!==(He=q??ie.v.Promise)&&void 0!==He?He:Promise}},7579:(mt,Ce,k)=>{k.d(Ce,{x:()=>pe});var f=k(9751),Y=k(727);const re=(0,k(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=k(8737),se=k(2806);let pe=(()=>{class ce extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const q=new ve(this,this);return q.operator=B,q}_throwIfClosed(){if(this.closed)throw new re}next(B){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const q of this.currentObservers)q.next(B)}})}error(B){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:q}=this;for(;q.length;)q.shift().error(B)}})}complete(){(0,se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:q,isStopped:He,observers:Ie}=this;return q||He?Y.Lc:(this.currentObservers=null,Ie.push(B),new Y.w0(()=>{this.currentObservers=null,(0,ie.P)(Ie,B)}))}_checkFinalizedStatuses(B){const{hasError:q,thrownError:He,isStopped:Ie}=this;q?B.error(He):Ie&&B.complete()}asObservable(){const B=new f.y;return B.source=this,B}}return ce.create=(j,B)=>new ve(j,B),ce})();class ve extends pe{constructor(j,B){super(),this.destination=j,this.source=B}next(j){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===q||q.call(B,j)}error(j){var B,q;null===(q=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===q||q.call(B,j)}complete(){var j,B;null===(B=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===B||B.call(j)}_subscribe(j){var B,q;return null!==(q=null===(B=this.source)||void 0===B?void 0:B.subscribe(j))&&void 0!==q?q:Y.Lc}}},2961:(mt,Ce,k)=>{k.d(Ce,{Hp:()=>lt,Lv:()=>q});var f=k(576),Y=k(727),O=k(2416),re=k(7849);function ie(){}const se=ce("C",void 0,void 0);function ce(Re,_e,we){return{kind:Re,value:_e,error:we}}var j=k(3410),B=k(2806);class q extends Y.w0{constructor(_e){super(),this.isStopped=!1,_e?(this.destination=_e,(0,Y.Nn)(_e)&&_e.add(this)):this.destination=Ue}static create(_e,we,Ge){return new lt(_e,we,Ge)}next(_e){this.isStopped?xe(function ve(Re){return ce("N",Re,void 0)}(_e),this):this._next(_e)}error(_e){this.isStopped?xe(function pe(Re){return ce("E",void 0,Re)}(_e),this):(this.isStopped=!0,this._error(_e))}complete(){this.isStopped?xe(se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_e){this.destination.next(_e)}_error(_e){try{this.destination.error(_e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ie(Re,_e){return He.call(Re,_e)}class Ze{constructor(_e){this.partialObserver=_e}next(_e){const{partialObserver:we}=this;if(we.next)try{we.next(_e)}catch(Ge){he(Ge)}}error(_e){const{partialObserver:we}=this;if(we.error)try{we.error(_e)}catch(Ge){he(Ge)}else he(_e)}complete(){const{partialObserver:_e}=this;if(_e.complete)try{_e.complete()}catch(we){he(we)}}}class lt extends q{constructor(_e,we,Ge){let Ne;if(super(),(0,f.m)(_e)||!_e)Ne={next:_e??void 0,error:we??void 0,complete:Ge??void 0};else{let nt;this&&O.v.useDeprecatedNextContext?(nt=Object.create(_e),nt.unsubscribe=()=>this.unsubscribe(),Ne={next:_e.next&&Ie(_e.next,nt),error:_e.error&&Ie(_e.error,nt),complete:_e.complete&&Ie(_e.complete,nt)}):Ne=_e}this.destination=new Ze(Ne)}}function he(Re){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(Re):(0,re.h)(Re)}function xe(Re,_e){const{onStoppedNotification:we}=O.v;we&&j.z.setTimeout(()=>we(Re,_e))}const Ue={closed:!0,next:ie,error:function Me(Re){throw Re},complete:ie}},727:(mt,Ce,k)=>{k.d(Ce,{Lc:()=>se,w0:()=>ie,Nn:()=>pe});var f=k(576);const O=(0,k(3888).d)(ce=>function(B){ce(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((q,He)=>`${He+1}) ${q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var re=k(8737);class ie{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ie of B)Ie.remove(this);else B.remove(this);const{initialTeardown:q}=this;if((0,f.m)(q))try{q()}catch(Ie){j=Ie instanceof O?Ie.errors:[Ie]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ie of He)try{ve(Ie)}catch(Ze){j=j??[],Ze instanceof O?j=[...j,...Ze.errors]:j.push(Ze)}}if(j)throw new O(j)}}add(j){var B;if(j&&j!==this)if(this.closed)ve(j);else{if(j instanceof ie){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(j)}}_hasParent(j){const{_parentage:B}=this;return B===j||Array.isArray(B)&&B.includes(j)}_addParent(j){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(j),B):B?[B,j]:j}_removeParent(j){const{_parentage:B}=this;B===j?this._parentage=null:Array.isArray(B)&&(0,re.P)(B,j)}remove(j){const{_finalizers:B}=this;B&&(0,re.P)(B,j),j instanceof ie&&j._removeParent(this)}}ie.EMPTY=(()=>{const ce=new ie;return ce.closed=!0,ce})();const se=ie.EMPTY;function pe(ce){return ce instanceof ie||ce&&"closed"in ce&&(0,f.m)(ce.remove)&&(0,f.m)(ce.add)&&(0,f.m)(ce.unsubscribe)}function ve(ce){(0,f.m)(ce)?ce():ce.unsubscribe()}},2416:(mt,Ce,k)=>{k.d(Ce,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(mt,Ce,k)=>{k.d(Ce,{E:()=>Y});const Y=new(k(9751).y)(ie=>ie.complete())},8996:(mt,Ce,k)=>{k.d(Ce,{D:()=>_e});var f=k(8421),Y=k(5363),O=k(9468),se=k(9751),ve=k(2202),ce=k(576),j=k(9672);function q(we,Ge){if(!we)throw new Error("Iterable cannot be null");return new se.y(Ne=>{(0,j.f)(Ne,Ge,()=>{const nt=we[Symbol.asyncIterator]();(0,j.f)(Ne,Ge,()=>{nt.next().then(ne=>{ne.done?Ne.complete():Ne.next(ne.value)})},0,!0)})})}var He=k(3670),Ie=k(8239),Ze=k(1144),lt=k(6495),he=k(2206),Me=k(4532),xe=k(3260);function _e(we,Ge){return Ge?function Re(we,Ge){if(null!=we){if((0,He.c)(we))return function re(we,Ge){return(0,f.Xf)(we).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(we,Ge);if((0,Ze.z)(we))return function pe(we,Ge){return new se.y(Ne=>{let nt=0;return Ge.schedule(function(){nt===we.length?Ne.complete():(Ne.next(we[nt++]),Ne.closed||this.schedule())})})}(we,Ge);if((0,Ie.t)(we))return function ie(we,Ge){return(0,f.Xf)(we).pipe((0,O.R)(Ge),(0,Y.Q)(Ge))}(we,Ge);if((0,he.D)(we))return q(we,Ge);if((0,lt.T)(we))return function B(we,Ge){return new se.y(Ne=>{let nt;return(0,j.f)(Ne,Ge,()=>{nt=we[ve.h](),(0,j.f)(Ne,Ge,()=>{let ne,Tt;try{({value:ne,done:Tt}=nt.next())}catch(Xe){return void Ne.error(Xe)}Tt?Ne.complete():Ne.next(ne)},0,!0)}),()=>(0,ce.m)(nt?.return)&&nt.return()})}(we,Ge);if((0,xe.L)(we))return function Ue(we,Ge){return q((0,xe.Q)(we),Ge)}(we,Ge)}throw(0,Me.z)(we)}(we,Ge):(0,f.Xf)(we)}},8421:(mt,Ce,k)=>{k.d(Ce,{Xf:()=>He});var f=k(655),Y=k(1144),O=k(8239),re=k(9751),ie=k(3670),se=k(2206),pe=k(4532),ve=k(6495),ce=k(3260),j=k(576),B=k(7849),q=k(8822);function He(Re){if(Re instanceof re.y)return Re;if(null!=Re){if((0,ie.c)(Re))return function Ie(Re){return new re.y(_e=>{const we=Re[q.L]();if((0,j.m)(we.subscribe))return we.subscribe(_e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Re);if((0,Y.z)(Re))return function Ze(Re){return new re.y(_e=>{for(let we=0;we<Re.length&&!_e.closed;we++)_e.next(Re[we]);_e.complete()})}(Re);if((0,O.t)(Re))return function lt(Re){return new re.y(_e=>{Re.then(we=>{_e.closed||(_e.next(we),_e.complete())},we=>_e.error(we)).then(null,B.h)})}(Re);if((0,se.D)(Re))return Me(Re);if((0,ve.T)(Re))return function he(Re){return new re.y(_e=>{for(const we of Re)if(_e.next(we),_e.closed)return;_e.complete()})}(Re);if((0,ce.L)(Re))return function xe(Re){return Me((0,ce.Q)(Re))}(Re)}throw(0,pe.z)(Re)}function Me(Re){return new re.y(_e=>{(function Ue(Re,_e){var we,Ge,Ne,nt;return(0,f.mG)(this,void 0,void 0,function*(){try{for(we=(0,f.KL)(Re);!(Ge=yield we.next()).done;)if(_e.next(Ge.value),_e.closed)return}catch(ne){Ne={error:ne}}finally{try{Ge&&!Ge.done&&(nt=we.return)&&(yield nt.call(we))}finally{if(Ne)throw Ne.error}}_e.complete()})})(Re,_e).catch(we=>_e.error(we))})}},6451:(mt,Ce,k)=>{k.d(Ce,{T:()=>se});var f=k(8189),Y=k(8421),O=k(515),re=k(7669),ie=k(8996);function se(...pe){const ve=(0,re.yG)(pe),ce=(0,re._6)(pe,1/0),j=pe;return j.length?1===j.length?(0,Y.Xf)(j[0]):(0,f.J)(ce)((0,ie.D)(j,ve)):O.E}},5403:(mt,Ce,k)=>{k.d(Ce,{x:()=>Y});var f=k(2961);function Y(re,ie,se,pe,ve){return new O(re,ie,se,pe,ve)}class O extends f.Lv{constructor(ie,se,pe,ve,ce,j){super(ie),this.onFinalize=ce,this.shouldUnsubscribe=j,this._next=se?function(B){try{se(B)}catch(q){ie.error(q)}}:super._next,this._error=ve?function(B){try{ve(B)}catch(q){ie.error(q)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(B){ie.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:se}=this;super.unsubscribe(),!se&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(mt,Ce,k)=>{k.d(Ce,{U:()=>O});var f=k(4482),Y=k(5403);function O(re,ie){return(0,f.e)((se,pe)=>{let ve=0;se.subscribe((0,Y.x)(pe,ce=>{pe.next(re.call(ie,ce,ve++))}))})}},8189:(mt,Ce,k)=>{k.d(Ce,{J:()=>O});var f=k(5577),Y=k(4671);function O(re=1/0){return(0,f.z)(Y.y,re)}},5577:(mt,Ce,k)=>{k.d(Ce,{z:()=>ve});var f=k(4004),Y=k(8421),O=k(4482),re=k(9672),ie=k(5403),pe=k(576);function ve(ce,j,B=1/0){return(0,pe.m)(j)?ve((q,He)=>(0,f.U)((Ie,Ze)=>j(q,Ie,He,Ze))((0,Y.Xf)(ce(q,He))),B):("number"==typeof j&&(B=j),(0,O.e)((q,He)=>function se(ce,j,B,q,He,Ie,Ze,lt){const he=[];let Me=0,xe=0,Ue=!1;const Re=()=>{Ue&&!he.length&&!Me&&j.complete()},_e=Ge=>Me<q?we(Ge):he.push(Ge),we=Ge=>{Ie&&j.next(Ge),Me++;let Ne=!1;(0,Y.Xf)(B(Ge,xe++)).subscribe((0,ie.x)(j,nt=>{He?.(nt),Ie?_e(nt):j.next(nt)},()=>{Ne=!0},void 0,()=>{if(Ne)try{for(Me--;he.length&&Me<q;){const nt=he.shift();Ze?(0,re.f)(j,Ze,()=>we(nt)):we(nt)}Re()}catch(nt){j.error(nt)}}))};return ce.subscribe((0,ie.x)(j,_e,()=>{Ue=!0,Re()})),()=>{lt?.()}}(q,He,ce,B)))}},5363:(mt,Ce,k)=>{k.d(Ce,{Q:()=>re});var f=k(9672),Y=k(4482),O=k(5403);function re(ie,se=0){return(0,Y.e)((pe,ve)=>{pe.subscribe((0,O.x)(ve,ce=>(0,f.f)(ve,ie,()=>ve.next(ce),se),()=>(0,f.f)(ve,ie,()=>ve.complete(),se),ce=>(0,f.f)(ve,ie,()=>ve.error(ce),se)))})}},3099:(mt,Ce,k)=>{k.d(Ce,{B:()=>ie});var f=k(8421),Y=k(7579),O=k(2961),re=k(4482);function ie(pe={}){const{connector:ve=(()=>new Y.x),resetOnError:ce=!0,resetOnComplete:j=!0,resetOnRefCountZero:B=!0}=pe;return q=>{let He,Ie,Ze,lt=0,he=!1,Me=!1;const xe=()=>{Ie?.unsubscribe(),Ie=void 0},Ue=()=>{xe(),He=Ze=void 0,he=Me=!1},Re=()=>{const _e=He;Ue(),_e?.unsubscribe()};return(0,re.e)((_e,we)=>{lt++,!Me&&!he&&xe();const Ge=Ze=Ze??ve();we.add(()=>{lt--,0===lt&&!Me&&!he&&(Ie=se(Re,B))}),Ge.subscribe(we),!He&&lt>0&&(He=new O.Hp({next:Ne=>Ge.next(Ne),error:Ne=>{Me=!0,xe(),Ie=se(Ue,ce,Ne),Ge.error(Ne)},complete:()=>{he=!0,xe(),Ie=se(Ue,j),Ge.complete()}}),(0,f.Xf)(_e).subscribe(He))})(q)}}function se(pe,ve,...ce){if(!0===ve)return void pe();if(!1===ve)return;const j=new O.Hp({next:()=>{j.unsubscribe(),pe()}});return(0,f.Xf)(ve(...ce)).subscribe(j)}},9468:(mt,Ce,k)=>{k.d(Ce,{R:()=>Y});var f=k(4482);function Y(O,re=0){return(0,f.e)((ie,se)=>{se.add(O.schedule(()=>ie.subscribe(se),re))})}},8505:(mt,Ce,k)=>{k.d(Ce,{b:()=>ie});var f=k(576),Y=k(4482),O=k(5403),re=k(4671);function ie(se,pe,ve){const ce=(0,f.m)(se)||pe||ve?{next:se,error:pe,complete:ve}:se;return ce?(0,Y.e)((j,B)=>{var q;null===(q=ce.subscribe)||void 0===q||q.call(ce);let He=!0;j.subscribe((0,O.x)(B,Ie=>{var Ze;null===(Ze=ce.next)||void 0===Ze||Ze.call(ce,Ie),B.next(Ie)},()=>{var Ie;He=!1,null===(Ie=ce.complete)||void 0===Ie||Ie.call(ce),B.complete()},Ie=>{var Ze;He=!1,null===(Ze=ce.error)||void 0===Ze||Ze.call(ce,Ie),B.error(Ie)},()=>{var Ie,Ze;He&&(null===(Ie=ce.unsubscribe)||void 0===Ie||Ie.call(ce)),null===(Ze=ce.finalize)||void 0===Ze||Ze.call(ce)}))}):re.y}},4408:(mt,Ce,k)=>{k.d(Ce,{o:()=>ie});var f=k(727);class Y extends f.w0{constructor(pe,ve){super()}schedule(pe,ve=0){return this}}const O={setInterval(se,pe,...ve){const{delegate:ce}=O;return ce?.setInterval?ce.setInterval(se,pe,...ve):setInterval(se,pe,...ve)},clearInterval(se){const{delegate:pe}=O;return(pe?.clearInterval||clearInterval)(se)},delegate:void 0};var re=k(8737);class ie extends Y{constructor(pe,ve){super(pe,ve),this.scheduler=pe,this.work=ve,this.pending=!1}schedule(pe,ve=0){var ce;if(this.closed)return this;this.state=pe;const j=this.id,B=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(B,j,ve)),this.pending=!0,this.delay=ve,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId(B,this.id,ve),this}requestAsyncId(pe,ve,ce=0){return O.setInterval(pe.flush.bind(pe,this),ce)}recycleAsyncId(pe,ve,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ve;null!=ve&&O.clearInterval(ve)}execute(pe,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(pe,ve);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,ve){let j,ce=!1;try{this.work(pe)}catch(B){ce=!0,j=B||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:pe,scheduler:ve}=this,{actions:ce}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,re.P)(ce,this),null!=pe&&(this.id=this.recycleAsyncId(ve,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(mt,Ce,k)=>{k.d(Ce,{v:()=>O});var f=k(6063);class Y{constructor(ie,se=Y.now){this.schedulerActionCtor=ie,this.now=se}schedule(ie,se=0,pe){return new this.schedulerActionCtor(this,ie).schedule(pe,se)}}Y.now=f.l.now;class O extends Y{constructor(ie,se=Y.now){super(ie,se),this.actions=[],this._active=!1}flush(ie){const{actions:se}=this;if(this._active)return void se.push(ie);let pe;this._active=!0;do{if(pe=ie.execute(ie.state,ie.delay))break}while(ie=se.shift());if(this._active=!1,pe){for(;ie=se.shift();)ie.unsubscribe();throw pe}}}},4986:(mt,Ce,k)=>{k.d(Ce,{z:()=>O});var f=k(4408);const O=new(k(7565).v)(f.o)},6063:(mt,Ce,k)=>{k.d(Ce,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(mt,Ce,k)=>{k.d(Ce,{z:()=>f});const f={setTimeout(Y,O,...re){const{delegate:ie}=f;return ie?.setTimeout?ie.setTimeout(Y,O,...re):setTimeout(Y,O,...re)},clearTimeout(Y){const{delegate:O}=f;return(O?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(mt,Ce,k)=>{k.d(Ce,{h:()=>Y});const Y=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(mt,Ce,k)=>{k.d(Ce,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(mt,Ce,k)=>{k.d(Ce,{_6:()=>se,jO:()=>re,yG:()=>ie});var f=k(576);function O(pe){return pe[pe.length-1]}function re(pe){return(0,f.m)(O(pe))?pe.pop():void 0}function ie(pe){return function Y(pe){return pe&&(0,f.m)(pe.schedule)}(O(pe))?pe.pop():void 0}function se(pe,ve){return"number"==typeof O(pe)?pe.pop():ve}},8737:(mt,Ce,k)=>{function f(Y,O){if(Y){const re=Y.indexOf(O);0<=re&&Y.splice(re,1)}}k.d(Ce,{P:()=>f})},3888:(mt,Ce,k)=>{function f(Y){const re=Y(ie=>{Error.call(ie),ie.stack=(new Error).stack});return re.prototype=Object.create(Error.prototype),re.prototype.constructor=re,re}k.d(Ce,{d:()=>f})},2806:(mt,Ce,k)=>{k.d(Ce,{O:()=>re,x:()=>O});var f=k(2416);let Y=null;function O(ie){if(f.v.useDeprecatedSynchronousErrorHandling){const se=!Y;if(se&&(Y={errorThrown:!1,error:null}),ie(),se){const{errorThrown:pe,error:ve}=Y;if(Y=null,pe)throw ve}}else ie()}function re(ie){f.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=ie)}},9672:(mt,Ce,k)=>{function f(Y,O,re,ie=0,se=!1){const pe=O.schedule(function(){re(),se?Y.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(Y.add(pe),!se)return pe}k.d(Ce,{f:()=>f})},4671:(mt,Ce,k)=>{function f(Y){return Y}k.d(Ce,{y:()=>f})},1144:(mt,Ce,k)=>{k.d(Ce,{z:()=>f});const f=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(mt,Ce,k)=>{k.d(Ce,{D:()=>Y});var f=k(576);function Y(O){return Symbol.asyncIterator&&(0,f.m)(O?.[Symbol.asyncIterator])}},576:(mt,Ce,k)=>{function f(Y){return"function"==typeof Y}k.d(Ce,{m:()=>f})},3670:(mt,Ce,k)=>{k.d(Ce,{c:()=>O});var f=k(8822),Y=k(576);function O(re){return(0,Y.m)(re[f.L])}},6495:(mt,Ce,k)=>{k.d(Ce,{T:()=>O});var f=k(2202),Y=k(576);function O(re){return(0,Y.m)(re?.[f.h])}},8239:(mt,Ce,k)=>{k.d(Ce,{t:()=>Y});var f=k(576);function Y(O){return(0,f.m)(O?.then)}},3260:(mt,Ce,k)=>{k.d(Ce,{L:()=>re,Q:()=>O});var f=k(655),Y=k(576);function O(ie){return(0,f.FC)(this,arguments,function*(){const pe=ie.getReader();try{for(;;){const{value:ve,done:ce}=yield(0,f.qq)(pe.read());if(ce)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ve)}}finally{pe.releaseLock()}})}function re(ie){return(0,Y.m)(ie?.getReader)}},4482:(mt,Ce,k)=>{k.d(Ce,{A:()=>Y,e:()=>O});var f=k(576);function Y(re){return(0,f.m)(re?.lift)}function O(re){return ie=>{if(Y(ie))return ie.lift(function(se){try{return re(se,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(mt,Ce,k)=>{k.d(Ce,{U:()=>O,z:()=>Y});var f=k(4671);function Y(...re){return O(re)}function O(re){return 0===re.length?f.y:1===re.length?re[0]:function(se){return re.reduce((pe,ve)=>ve(pe),se)}}},7849:(mt,Ce,k)=>{k.d(Ce,{h:()=>O});var f=k(2416),Y=k(3410);function O(re){Y.z.setTimeout(()=>{const{onUnhandledError:ie}=f.v;if(!ie)throw re;ie(re)})}},4532:(mt,Ce,k)=>{function f(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>f})},655:(mt,Ce,k)=>{function re(le,fe){var Ee={};for(var be in le)Object.prototype.hasOwnProperty.call(le,be)&&fe.indexOf(be)<0&&(Ee[be]=le[be]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols){var ze=0;for(be=Object.getOwnPropertySymbols(le);ze<be.length;ze++)fe.indexOf(be[ze])<0&&Object.prototype.propertyIsEnumerable.call(le,be[ze])&&(Ee[be[ze]]=le[be[ze]])}return Ee}function q(le,fe,Ee,be){return new(Ee||(Ee=Promise))(function(Be,dt){function at(Gt){try{Ye(be.next(Gt))}catch(Ct){dt(Ct)}}function Ot(Gt){try{Ye(be.throw(Gt))}catch(Ct){dt(Ct)}}function Ye(Gt){Gt.done?Be(Gt.value):function ze(Be){return Be instanceof Ee?Be:new Ee(function(dt){dt(Be)})}(Gt.value).then(at,Ot)}Ye((be=be.apply(le,fe||[])).next())})}function Re(le){return this instanceof Re?(this.v=le,this):new Re(le)}function _e(le,fe,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ze,be=Ee.apply(le,fe||[]),Be=[];return ze={},dt("next"),dt("throw"),dt("return"),ze[Symbol.asyncIterator]=function(){return this},ze;function dt(nn){be[nn]&&(ze[nn]=function(yn){return new Promise(function(Dn,Dr){Be.push([nn,yn,Dn,Dr])>1||at(nn,yn)})})}function at(nn,yn){try{!function Ot(nn){nn.value instanceof Re?Promise.resolve(nn.value.v).then(Ye,Gt):Ct(Be[0][2],nn)}(be[nn](yn))}catch(Dn){Ct(Be[0][3],Dn)}}function Ye(nn){at("next",nn)}function Gt(nn){at("throw",nn)}function Ct(nn,yn){nn(yn),Be.shift(),Be.length&&at(Be[0][0],Be[0][1])}}function Ge(le){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,fe=le[Symbol.asyncIterator];return fe?fe.call(le):(le=function lt(le){var fe="function"==typeof Symbol&&Symbol.iterator,Ee=fe&&le[fe],be=0;if(Ee)return Ee.call(le);if(le&&"number"==typeof le.length)return{next:function(){return le&&be>=le.length&&(le=void 0),{value:le&&le[be++],done:!le}}};throw new TypeError(fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(le),Ee={},be("next"),be("throw"),be("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function be(Be){Ee[Be]=le[Be]&&function(dt){return new Promise(function(at,Ot){!function ze(Be,dt,at,Ot){Promise.resolve(Ot).then(function(Ye){Be({value:Ye,done:at})},dt)}(at,Ot,(dt=le[Be](dt)).done,dt.value)})}}}k.d(Ce,{FC:()=>_e,KL:()=>Ge,_T:()=>re,mG:()=>q,qq:()=>Re})},4650:(mt,Ce,k)=>{k.d(Ce,{$8M:()=>Xo,$WT:()=>or,$Z:()=>Sw,AFp:()=>Xm,AaK:()=>ve,CRH:()=>Zl,CZH:()=>Ai,CqO:()=>Gv,D6c:()=>pT,DdM:()=>Dp,EJc:()=>Wb,F4k:()=>HC,FYo:()=>hv,FiY:()=>qa,GfV:()=>ow,Gpc:()=>B,JOm:()=>vt,LFG:()=>sn,Lbi:()=>ee,Lck:()=>Ab,MMx:()=>Um,NdJ:()=>zv,OlP:()=>Yt,Oqu:()=>n_,P3R:()=>Kd,PXZ:()=>Sc,Q6J:()=>tE,QGY:()=>Hv,Qsj:()=>KD,R0b:()=>qs,RDi:()=>bg,Rgc:()=>Dh,SBq:()=>th,Sil:()=>Yb,Suo:()=>Zm,TTD:()=>Vc,TgZ:()=>im,VKq:()=>$m,X6Q:()=>iT,XFs:()=>ft,Xpm:()=>Pi,Xts:()=>nv,Y36:()=>oh,YKP:()=>XE,YNc:()=>Xw,Yjl:()=>Ht,Yz7:()=>Ct,Z0I:()=>Dr,ZZ4:()=>cy,_Bn:()=>JE,_UZ:()=>jv,_Vd:()=>eh,_c5:()=>hT,_uU:()=>cn,aQg:()=>m0,c2e:()=>qb,cJS:()=>yn,cg1:()=>Im,dDg:()=>nT,dqk:()=>Xt,eFA:()=>Rn,eJc:()=>Pp,ekj:()=>yE,eoX:()=>xI,f3M:()=>Nn,g9A:()=>ey,h0i:()=>Gl,hGG:()=>fT,hij:()=>ts,iGM:()=>Oo,ifc:()=>ge,ip1:()=>J_,jDz:()=>T_,kL8:()=>yh,lG2:()=>Et,lqb:()=>bl,lri:()=>AI,n5z:()=>zu,oAB:()=>X,q4F:()=>aw,qLn:()=>Mf,qOj:()=>pc,qZA:()=>Xf,rWj:()=>MI,sBO:()=>Ea,s_b:()=>xp,soG:()=>Fo,tb:()=>RI,tp0:()=>_t,uIk:()=>Lv,vHH:()=>he,vpe:()=>No,wAp:()=>Mt,xp6:()=>vw,z2F:()=>Ws,zSh:()=>fc,zs3:()=>rh});var f=k(7579),Y=k(727),O=k(9751),re=k(6451),ie=k(3099);function se(i){for(let o in i)if(i[o]===se)return o;throw Error("Could not find renamed property on target object.")}function pe(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function ve(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ve).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ce(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const j=se({__forward_ref__:se});function B(i){return i.__forward_ref__=B,i.toString=function(){return ve(this())},i}function q(i){return He(i)?i():i}function He(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===B}function Ie(i){return i&&!!i.\u0275providers}const lt="https://g.co/ng/security#xss";class he extends Error{constructor(o,a){super(Me(o,a)),this.code=o}}function Me(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}function xe(i){return"string"==typeof i?i:null==i?"":String(i)}function Ge(i,o){throw new he(-201,!1)}function dt(i,o){null==i&&function at(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function Ct(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function yn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Dn(i){return jr(i,li)||jr(i,Zs)}function Dr(i){return null!==Dn(i)}function jr(i,o){return i.hasOwnProperty(o)?i[o]:null}function Ss(i){return i&&(i.hasOwnProperty(Vo)||i.hasOwnProperty(br))?i[Vo]:null}const li=se({\u0275prov:se}),Vo=se({\u0275inj:se}),Zs=se({ngInjectableDef:se}),br=se({ngInjectorDef:se});var ft=(()=>((ft=ft||{})[ft.Default=0]="Default",ft[ft.Host=1]="Host",ft[ft.Self=2]="Self",ft[ft.SkipSelf=4]="SkipSelf",ft[ft.Optional=8]="Optional",ft))();let Xr;function gr(i){const o=Xr;return Xr=i,o}function $r(i,o,a){const c=Dn(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ft.Optional?null:void 0!==o?o:void Ge(ve(i))}const Xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),di={},ei="__NG_DI_FLAG__",sr="ngTempTokenPath",Hr="ngTokenPath",An=/\n/gm,ti="\u0275",pn="__source";let As;function Kt(i){const o=As;return As=i,o}function Zi(i,o=ft.Default){if(void 0===As)throw new he(-203,!1);return null===As?$r(i,void 0,o):As.get(i,o&ft.Optional?null:void 0,o)}function sn(i,o=ft.Default){return(function Oc(){return Xr}()||Zi)(q(i),o)}function Nn(i,o=ft.Default){return sn(i,Gn(o))}function Gn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ri(i){const o=[];for(let a=0;a<i.length;a++){const c=q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new he(900,!1);let d,g=ft.Default;for(let v=0;v<c.length;v++){const I=c[v],C=Ni(I);"number"==typeof C?-1===C?d=I.token:g|=C:d=I}o.push(sn(d,g))}else o.push(sn(c))}return o}function En(i,o){return i[ei]=o,i.prototype[ei]=o,i}function Ni(i){return i[ei]}function L(i){return{toString:i}.toString()}var z=(()=>((z=z||{})[z.OnPush=0]="OnPush",z[z.Default=1]="Default",z))(),ge=(()=>{return(i=ge||(ge={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",ge;var i})();const Q={},Oe=[],St=se({\u0275cmp:se}),Qt=se({\u0275dir:se}),Ln=se({\u0275pipe:se}),Cn=se({\u0275mod:se}),an=se({\u0275fac:se}),qt=se({__NG_ELEMENT_ID__:se});let Tr=0;function Pi(i){return L(()=>{const o=gu(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===z.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||ge.Emulated,id:"c"+Tr++,styles:i.styles||Oe,_:null,schemas:i.schemas||null,tView:null};Bh(a);const c=i.dependencies;return a.directiveDefs=Uo(c,!1),a.pipeDefs=Uo(c,!0),a})}function Da(i){return pt(i)||en(i)}function ae(i){return null!==i}function X(i){return L(()=>({type:i.type,bootstrap:i.bootstrap||Oe,declarations:i.declarations||Oe,imports:i.imports||Oe,exports:i.exports||Oe,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function ht(i,o){if(null==i)return Q;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=c,o&&(o[d]=g)}return a}function Et(i){return L(()=>{const o=gu(i);return Bh(o),o})}function Ht(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function pt(i){return i[St]||null}function en(i){return i[Qt]||null}function Jt(i){return i[Ln]||null}function or(i){const o=pt(i)||en(i)||Jt(i);return null!==o&&o.standalone}function zn(i,o){const a=i[Cn]||null;if(!a&&!0===o)throw new Error(`Type ${ve(i)} does not have '\u0275mod' property.`);return a}function gu(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Oe,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ht(i.inputs,o),outputs:ht(i.outputs)}}function Bh(i){i.features?.forEach(o=>o(i))}function Uo(i,o){if(!i)return null;const a=o?Jt:Da;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(ae)}const fi=0,We=1,Lt=2,In=3,pi=4,hn=5,qn=6,Ks=7,Pn=8,Ca=9,ss=10,$t=11,ba=12,Ys=13,os=14,Qs=15,Vn=16,Bo=17,as=18,Yi=19,jo=20,mr=21,vn=22,Ta=1,kc=2,$o=7,Ms=8,Js=9,ar=10;function ri(i){return Array.isArray(i)&&"object"==typeof i[Ta]}function ii(i){return Array.isArray(i)&&!0===i[Ta]}function Sa(i){return 0!=(4&i.flags)}function Ho(i){return i.componentOffset>-1}function Fc(i){return 1==(1&i.flags)}function gi(i){return!!i.template}function yu(i){return 0!=(256&i[Lt])}function Qi(i,o){return i.hasOwnProperty(an)?i[an]:null}class Xs{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function Vc(){return Aa}function Aa(i){return i.type.prototype.ngOnChanges&&(i.setInput=Uc),fd}function fd(){const i=Gh(this),o=i?.current;if(o){const a=i.previous;if(a===Q)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Uc(i,o,a,c){const d=this.declaredInputs[a],g=Gh(i)||function wu(i,o){return i[xs]=o}(i,{previous:Q,current:null}),v=g.current||(g.current={}),I=g.previous,C=I[d];v[d]=new Xs(C&&C.currentValue,o,I===Q),i[c]=o}Vc.ngInherit=!0;const xs="__ngSimpleChanges__";function Gh(i){return i[xs]||null}const zr=function(i,o,a){};function ur(i){for(;Array.isArray(i);)i=i[fi];return i}function ls(i,o){return ur(o[i])}function cr(i,o){return ur(o[i.index])}function gd(i,o){return i.data[o]}function Xn(i,o){const a=o[i];return ri(a)?a:a[fi]}function ds(i){return 64==(64&i[Lt])}function Ns(i,o){return null==o?null:i[o]}function qo(i){i[as]=0}function xa(i,o){i[hn]+=o;let a=i,c=i[In];for(;null!==c&&(1===o&&1===a[hn]||-1===o&&0===a[hn]);)c[hn]+=o,a=c,c=c[In]}const Pt={lFrame:$c(null),bindingsEnabled:!0};function Cu(){return Pt.bindingsEnabled}function ue(){return Pt.lFrame.lView}function Vt(){return Pt.lFrame.tView}function er(){let i=eo();for(;null!==i&&64===i.type;)i=i.parent;return i}function eo(){return Pt.lFrame.currentTNode}function qr(i,o){const a=Pt.lFrame;a.currentTNode=i,a.isParent=o}function wd(){return Pt.lFrame.isParent}function Wn(){const i=Pt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}function to(){return Pt.lFrame.bindingIndex++}function Mu(i,o){const a=Pt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Zn(o)}function Zn(i){Pt.lFrame.currentDirectiveIndex=i}function jc(){return Pt.lFrame.currentQueryIndex}function xu(i){Pt.lFrame.currentQueryIndex=i}function Id(i){const o=i[We];return 2===o.type?o.declTNode:1===o.type?i[qn]:null}function Ru(i,o,a){if(a&ft.SkipSelf){let d=o,g=i;for(;!(d=d.parent,null!==d||a&ft.Host||(d=Id(g),null===d||(g=g[Qs],10&d.type))););if(null===d)return!1;o=d,i=g}const c=Pt.lFrame=Oa();return c.currentTNode=o,c.lView=i,!0}function Nu(i){const o=Oa(),a=i[We];Pt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function Oa(){const i=Pt.lFrame,o=null===i?null:i.child;return null===o?$c(i):o}function $c(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function ka(){const i=Pt.lFrame;return Pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Dd=ka;function Pu(){const i=ka();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function yr(){return Pt.lFrame.selectedIndex}function fs(i){Pt.lFrame.selectedIndex=i}function bn(){const i=Pt.lFrame;return gd(i.tView,i.selectedIndex)}function Fu(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const g=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:C,ngAfterViewChecked:M,ngOnDestroy:R}=g;v&&(i.contentHooks??(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks??(i.contentHooks=[])).push(a,I),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(a,I)),C&&(i.viewHooks??(i.viewHooks=[])).push(-a,C),M&&((i.viewHooks??(i.viewHooks=[])).push(a,M),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(a,M)),null!=R&&(i.destroyHooks??(i.destroyHooks=[])).push(a,R)}}function Hc(i,o,a){zc(i,o,3,a)}function Gc(i,o,a,c){(3&i[Lt])===a&&zc(i,o,a,c)}function bd(i,o){let a=i[Lt];(3&a)===o&&(a&=2047,a+=1,i[Lt]=a)}function zc(i,o,a,c){const g=c??-1,v=o.length-1;let I=0;for(let C=void 0!==c?65535&i[as]:0;C<v;C++)if("number"==typeof o[C+1]){if(I=o[C],null!=c&&I>=c)break}else o[C]<0&&(i[as]+=65536),(I<g||-1==g)&&(Zo(i,a,o,C),i[as]=(4294901760&i[as])+C+2),C++}function Zo(i,o,a,c){const d=a[c]<0,g=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[Lt]>>11<i[as]>>16&&(3&i[Lt])===o){i[Lt]+=2048,zr(4,I,g);try{g.call(I)}finally{zr(5,I,g)}}}else{zr(4,I,g);try{g.call(I)}finally{zr(5,I,g)}}}const Ko=-1;class ps{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Yo(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const g=a[c++],v=a[c++],I=a[c++];i.setAttribute(o,v,I,g)}else{const g=d,v=a[++c];so(g)?i.setProperty(o,g,v):i.setAttribute(o,g,v),c++}}return c}function qc(i){return 3===i||4===i||6===i}function so(i){return 64===i.charCodeAt(0)}function oo(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||Uu(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function Uu(i,o,a,c,d){let g=0,v=i.length;if(-1===o)v=-1;else for(;g<i.length;){const I=i[g++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=g-1;break}}}for(;g<i.length;){const I=i[g];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[g+1]=d));if(c===i[g+1])return void(i[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(i.splice(v,0,o),g=v+1),i.splice(g++,0,a),null!==c&&i.splice(g++,0,c),null!==d&&i.splice(g++,0,d)}function ao(i){return i!==Ko}function Ps(i){return 32767&i}function uo(i,o){let a=function Td(i){return i>>16}(i),c=o;for(;a>0;)c=c[Qs],a--;return c}let Bu=!0;function La(i){const o=Bu;return Bu=i,o}const ju=255,Sd=5;let co=0;const ki={};function Wc(i,o){const a=Jo(i,o);if(-1!==a)return a;const c=o[We];c.firstCreatePass&&(i.injectorIndex=o.length,Qo(c.data,i),Qo(o,null),Qo(c.blueprint,null));const d=Ad(i,o),g=i.injectorIndex;if(ao(d)){const v=Ps(d),I=uo(d,o),C=I[We].data;for(let M=0;M<8;M++)o[g+M]=I[v+M]|C[v+M]}return o[g+8]=d,g}function Qo(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Jo(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Ad(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=Ba(d),null===c)return Ko;if(a++,d=d[Qs],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return Ko}function gn(i,o,a){!function gs(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(qt)&&(c=a[qt]),null==c&&(c=a[qt]=co++);const d=c&ju;o.data[i+(d>>Sd)]|=1<<d}(i,o,a)}function $u(i,o,a){if(a&ft.Optional||void 0!==i)return i;Ge()}function Zc(i,o,a,c){if(a&ft.Optional&&void 0===c&&(c=null),!(a&(ft.Self|ft.Host))){const d=i[Ca],g=gr(void 0);try{return d?d.get(o,c,a&ft.Optional):$r(o,c,a&ft.Optional)}finally{gr(g)}}return $u(c,0,a)}function Hu(i,o,a,c=ft.Default,d){if(null!==i){if(1024&o[Lt]){const v=function Yc(i,o,a,c,d){let g=i,v=o;for(;null!==g&&null!==v&&1024&v[Lt]&&!(256&v[Lt]);){const I=Gu(g,v,a,c|ft.Self,ki);if(I!==ki)return I;let C=g.parent;if(!C){const M=v[mr];if(M){const R=M.get(a,ki,c);if(R!==ki)return R}C=Ba(v),v=v[Qs]}g=C}return d}(i,o,a,c,ki);if(v!==ki)return v}const g=Gu(i,o,a,c,ki);if(g!==ki)return g}return Zc(o,a,c,d)}function Gu(i,o,a,c,d){const g=function Kc(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(qt)?i[qt]:void 0;return"number"==typeof o?o>=0?o&ju:Yh:o}(a);if("function"==typeof g){if(!Ru(o,i,c))return c&ft.Host?$u(d,0,c):Zc(o,a,c,d);try{const v=g(c);if(null!=v||c&ft.Optional)return v;Ge()}finally{Dd()}}else if("number"==typeof g){let v=null,I=Jo(i,o),C=Ko,M=c&ft.Host?o[Vn][qn]:null;for((-1===I||c&ft.SkipSelf)&&(C=-1===I?Ad(i,o):o[I+8],C!==Ko&&Ua(c,!1)?(v=o[We],I=Ps(C),o=uo(C,o)):I=-1);-1!==I;){const R=o[We];if(Va(g,I,R.data)){const F=tr(I,o,a,v,c,M);if(F!==ki)return F}C=o[I+8],C!==Ko&&Ua(c,o[We].data[I+8]===M)&&Va(g,I,o)?(v=R,I=Ps(C),o=uo(C,o)):I=-1}}return d}function tr(i,o,a,c,d,g){const v=o[We],I=v.data[i+8],R=lo(I,v,a,null==c?Ho(I)&&Bu:c!=v&&0!=(3&I.type),d&ft.Host&&g===I);return null!==R?Un(o,v,R,I):ki}function lo(i,o,a,c,d){const g=i.providerIndexes,v=o.data,I=1048575&g,C=i.directiveStart,R=g>>20,G=d?I+R:i.directiveEnd;for(let J=c?I:I+R;J<G;J++){const de=v[J];if(J<C&&a===de||J>=C&&de.type===a)return J}if(d){const J=v[C];if(J&&gi(J)&&J.type===a)return C}return null}function Un(i,o,a,c){let d=i[a];const g=o.data;if(function vg(i){return i instanceof ps}(d)){const v=d;v.resolving&&function Re(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new he(-200,`Circular dependency in DI detected for ${i}${a}`)}(function Ue(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():xe(i)}(g[a]));const I=La(v.canSeeViewProviders);v.resolving=!0;const C=v.injectImpl?gr(v.injectImpl):null;Ru(i,c,ft.Default);try{d=i[a]=v.factory(void 0,g,i,c),o.firstCreatePass&&a>=c.directiveStart&&function yg(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=Aa(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-i,d),g&&((a.preOrderHooks??(a.preOrderHooks=[])).push(i,g),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,g))}(a,g[a],o)}finally{null!==C&&gr(C),La(I),v.resolving=!1,Dd()}}return d}function Va(i,o,a){return!!(a[o+(i>>Sd)]&1<<i)}function Ua(i,o){return!(i&ft.Self||i&ft.Host&&o)}class ms{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return Hu(this._tNode,this._lView,o,Gn(c),a)}}function Yh(){return new ms(er(),ue())}function zu(i){return L(()=>{const o=i.prototype.constructor,a=o[an]||ho(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const g=d[an]||ho(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function ho(i){return He(i)?()=>{const o=ho(q(i));return o&&o()}:Qi(i)}function Ba(i){const o=i[We],a=o.type;return 2===a?o.declTNode:1===a?i[qn]:null}function Xo(i){return function Md(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const g=a[d];if(qc(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(er(),i)}const ea="__parameters__";function po(i,o,a){return L(()=>{const c=function fo(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return I.annotation=v,I;function I(C,M,R){const F=C.hasOwnProperty(ea)?C[ea]:Object.defineProperty(C,ea,{value:[]})[ea];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(v),C}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Yt{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ct({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Xi(i,o){i.forEach(a=>Array.isArray(a)?Xi(a,o):o(a))}function tf(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function mo(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function Wr(i,o,a){let c=si(i,o);return c>=0?i[1|c]=a:(c=~c,function el(i,o,a,c){let d=i.length;if(d==o)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>o;)i[d]=i[d-2],d--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function un(i,o){const a=si(i,o);if(a>=0)return i[1|a]}function si(i,o){return function Mr(i,o,a){let c=0,d=i.length>>a;for(;d!==c;){const g=c+(d-c>>1),v=i[g<<a];if(o===v)return g<<a;v>o?d=g:c=g+1}return~(d<<a)}(i,o,1)}const qa=En(po("Optional"),8),_t=En(po("SkipSelf"),4);var vt=(()=>((vt=vt||{})[vt.Important=1]="Important",vt[vt.DashCase=2]="DashCase",vt))();const Od=new Map;let Bi=0;const W="__ngContext__";function te(i,o){ri(o)?(i[W]=o[jo],function Fd(i){Od.set(i[jo],i)}(o)):i[W]=o}let ji;function Us(i,o){return ji(i,o)}function ll(i){const o=i[In];return ii(o)?o[In]:o}function dl(i){return cf(i[Ys])}function Co(i){return cf(i[pi])}function cf(i){for(;null!==i&&!ii(i);)i=i[pi];return i}function bo(i,o,a,c,d){if(null!=c){let g,v=!1;ii(c)?g=c:ri(c)&&(v=!0,c=c[fi]);const I=ur(c);0===i&&null!==a?null==d?fl(o,a,I):sa(o,a,I,d||null,!0):1===i&&null!==a?sa(o,a,I,d||null,!0):2===i?function ff(i,o,a){const c=To(i,o);c&&function pl(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,I,v):3===i&&o.destroyNode(I),null!=g&&function vl(i,o,a,c,d){const g=a[$o];g!==ur(a)&&bo(o,i,c,g,d);for(let I=ar;I<a.length;I++){const C=a[I];yl(C[We],C,i,o,c,g)}}(o,i,g,a,d)}}function df(i,o,a){return i.createElement(o,a)}function Ig(i,o){const a=i[Js],c=a.indexOf(o),d=o[In];512&o[Lt]&&(o[Lt]&=-513,xa(d,-1)),a.splice(c,1)}function hl(i,o){if(i.length<=ar)return;const a=ar+o,c=i[a];if(c){const d=c[Bo];null!==d&&d!==i&&Ig(d,c),o>0&&(i[a-1][pi]=c[pi]);const g=mo(i,ar+o);!function jy(i,o){yl(i,o,o[$t],2,null,null),o[fi]=null,o[qn]=null}(c[We],c);const v=g[Yi];null!==v&&v.detachView(g[We]),c[In]=null,c[pi]=null,c[Lt]&=-65}return c}function Ud(i,o){if(!(128&o[Lt])){const a=o[$t];a.destroyNode&&yl(i,o,a,3,null,null),function Q0(i){let o=i[Ys];if(!o)return ia(i[We],i);for(;o;){let a=null;if(ri(o))a=o[Ys];else{const c=o[ar];c&&(a=c)}if(!a){for(;o&&!o[pi]&&o!==i;)ri(o)&&ia(o[We],o),o=o[In];null===o&&(o=i),ri(o)&&ia(o[We],o),a=o&&o[pi]}o=a}}(o)}}function ia(i,o){if(!(128&o[Lt])){o[Lt]&=-65,o[Lt]|=128,function Ja(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof ps)){const g=a[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const I=d[g[v]],C=g[v+1];zr(4,I,C);try{C.call(I)}finally{zr(5,I,C)}}else{zr(4,d,g);try{g.call(d)}finally{zr(5,d,g)}}}}}(i,o),function Hy(i,o){const a=i.cleanup,c=o[Ks];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),g+=2}else{const v=c[d=a[g+1]];a[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)(0,c[g])();o[Ks]=null}}(i,o),1===o[We].type&&o[$t].destroy();const a=o[Bo];if(null!==a&&ii(o[In])){a!==o[In]&&Ig(a,o);const c=o[Yi];null!==c&&c.detachView(i)}!function E(i){Od.delete(i[jo])}(o)}}function oc(i,o,a){return function Gy(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[fi];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:g}=i.data[c.directiveStart+d];if(g===ge.None||g===ge.Emulated)return null}return cr(c,a)}}(i,o.parent,a)}function sa(i,o,a,c,d){i.insertBefore(o,a,c,d)}function fl(i,o,a){i.appendChild(o,a)}function Dg(i,o,a,c,d){null!==c?sa(i,o,a,c,d):fl(i,o,a)}function To(i,o){return i.parentNode(o)}let hf,El,uc,Xa=function gl(i,o,a){return 40&i.type?cr(i,a):null};function eu(i,o,a,c){const d=oc(i,c,o),g=o[$t],I=function jd(i,o,a){return Xa(i,o,a)}(c.parent||o[qn],c,o);if(null!=d)if(Array.isArray(a))for(let C=0;C<a.length;C++)Dg(g,d,a[C],I,!1);else Dg(g,d,a,I,!1);void 0!==hf&&hf(g,c,o,a,d)}function Hd(i,o){if(null!==o){const a=o.type;if(3&a)return cr(o,i);if(4&a)return _s(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Hd(i,c);{const d=i[o.index];return ii(d)?_s(-1,d):ur(d)}}if(32&a)return Us(o,i)()||ur(i[o.index]);{const c=Gd(i,o);return null!==c?Array.isArray(c)?c[0]:Hd(ll(i[Vn]),c):Hd(i,o.next)}}return null}function Gd(i,o){return null!==o?i[Vn][qn].projection[o.projection]:null}function _s(i,o){const a=ar+i+1;if(a<o.length){const c=o[a],d=c[We].firstChild;if(null!==d)return Hd(c,d)}return o[$o]}function ml(i,o,a,c,d,g,v){for(;null!=a;){const I=c[a.index],C=a.type;if(v&&0===o&&(I&&te(ur(I),c),a.flags|=2),32!=(32&a.flags))if(8&C)ml(i,o,a.child,c,d,g,!1),bo(o,i,d,I,g);else if(32&C){const M=Us(a,c);let R;for(;R=M();)bo(o,i,d,R,g);bo(o,i,d,I,g)}else 16&C?gf(i,o,c,a,d,g):bo(o,i,d,I,g);a=v?a.projectionNext:a.next}}function yl(i,o,a,c,d,g){ml(a,c,i.firstChild,o,d,g,!1)}function gf(i,o,a,c,d,g){const v=a[Vn],C=v[qn].projection[c.projection];if(Array.isArray(C))for(let M=0;M<C.length;M++)bo(o,i,d,C[M],g);else ml(i,o,C,v[In],d,g,!0)}function es(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function _l(i,o,a){const{mergedAttrs:c,classes:d,styles:g}=a;null!==c&&Yo(i,o,c),null!==d&&es(i,o,d),null!==g&&function mf(i,o,a){i.setAttribute(o,"style",a)}(i,o,g)}function bg(i){El=i}function _f(i){return function vf(){if(void 0===uc&&(uc=null,Xt.trustedTypes))try{uc=Xt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return uc}()?.createScriptURL(i)||i}class Sg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${lt})`}}function Nr(i){return i instanceof Sg?i.changingThisBreaksApplicationSecurity:i}function Di(i,o){const a=function cc(i){return i instanceof Sg&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${lt})`)}return a===o}const bf=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Mn=(()=>((Mn=Mn||{})[Mn.NONE=0]="NONE",Mn[Mn.HTML=1]="HTML",Mn[Mn.STYLE=2]="STYLE",Mn[Mn.SCRIPT=3]="SCRIPT",Mn[Mn.URL=4]="URL",Mn[Mn.RESOURCE_URL=5]="RESOURCE_URL",Mn))();function Wd(i){const o=Tf();return o?o.sanitize(Mn.URL,i)||"":Di(i,"URL")?Nr(i):function lc(i){return(i=String(i)).match(bf)?i:"unsafe:"+i}(xe(i))}function Dl(i){const o=Tf();if(o)return _f(o.sanitize(Mn.RESOURCE_URL,i)||"");if(Di(i,"ResourceURL"))return _f(Nr(i));throw new he(904,!1)}function Kd(i,o,a){return function Xy(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Dl:Wd}(o,a)(i)}function Tf(){const i=ue();return i&&i[ba]}const nv=new Yt("ENVIRONMENT_INITIALIZER"),Cl=new Yt("INJECTOR",-1),Yd=new Yt("INJECTOR_DEF_TYPES");class J0{get(o,a=di){if(a===di){const c=new Error(`NullInjectorError: No provider for ${ve(o)}!`);throw c.name="NullInjectorError",c}return a}}function Sf(...i){return{\u0275providers:Qd(0,i),\u0275fromNgModule:!0}}function Qd(i,...o){const a=[],c=new Set;let d;return Xi(o,g=>{const v=g;rv(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&X0(d,a),a}function X0(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];iv(d,g=>{o.push(g)})}}function rv(i,o,a,c){if(!(i=q(i)))return!1;let d=null,g=Ss(i);const v=!g&&pt(i);if(g||v){if(v&&!v.standalone)return!1;d=i}else{const C=i.ngModule;if(g=Ss(C),!g)return!1;d=C}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const C="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const M of C)rv(M,o,a,c)}}else{if(!g)return!1;{if(null!=g.imports&&!I){let M;c.add(d);try{Xi(g.imports,R=>{rv(R,o,a,c)&&(M||(M=[]),M.push(R))})}finally{}void 0!==M&&X0(M,o)}if(!I){const M=Qi(d)||(()=>new d);o.push({provide:d,useFactory:M,deps:Oe},{provide:Yd,useValue:d,multi:!0},{provide:nv,useValue:()=>sn(d),multi:!0})}const C=g.providers;null==C||I||iv(C,R=>{o.push(R)})}}return d!==i&&void 0!==i.providers}function iv(i,o){for(let a of i)Ie(a)&&(a=a.\u0275providers),Array.isArray(a)?iv(a,o):o(a)}const $D=se({provide:String,useValue:se});function sv(i){return null!==i&&"object"==typeof i&&$D in i}function iu(i){return"function"==typeof i}const fc=new Yt("Set Injector scope."),Og={},GD={};let ov;function kg(){return void 0===ov&&(ov=new J0),ov}class bl{}class tw extends bl{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xd(o,v=>this.processProvider(v)),this.records.set(Cl,Jd(void 0,this)),d.has("environment")&&this.records.set(bl,Jd(void 0,this));const g=this.records.get(fc);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Yd.multi,Oe,ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=Kt(this),c=gr(void 0);try{return o()}finally{Kt(a),gr(c)}}get(o,a=di,c=ft.Default){this.assertNotDestroyed(),c=Gn(c);const d=Kt(this),g=gr(void 0);try{if(!(c&ft.SkipSelf)){let I=this.records.get(o);if(void 0===I){const C=function lv(i){return"function"==typeof i||"object"==typeof i&&i instanceof Yt}(o)&&Dn(o);I=C&&this.injectableDefInScope(C)?Jd(av(o),Og):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&ft.Self?kg():this.parent).get(o,a=c&ft.Optional&&a===di?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[sr]=v[sr]||[]).unshift(ve(o)),d)throw v;return function Gr(i,o,a,c){const d=i[sr];throw o[pn]&&d.unshift(o[pn]),i.message=function U(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==ti?i.slice(2):i;let d=ve(o);if(Array.isArray(o))d=o.map(ve).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];g.push(v+":"+("string"==typeof I?JSON.stringify(I):ve(I)))}d=`{${g.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(An,"\n  ")}`}("\n"+i.message,d,a,c),i[Hr]=d,i[sr]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{gr(g),Kt(d)}}resolveInjectorInitializers(){const o=Kt(this),a=gr(void 0);try{const c=this.get(nv.multi,Oe,ft.Self);for(const d of c)d()}finally{Kt(o),gr(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(ve(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(o){let a=iu(o=q(o))?o:q(o&&o.provide);const c=function qD(i){return sv(i)?Jd(void 0,i.useValue):Jd(uv(i),Og)}(o);if(iu(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Jd(void 0,Og,!0),d.factory=()=>Ri(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Og&&(a.value=GD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function nw(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function av(i){const o=Dn(i),a=null!==o?o.factory:Qi(i);if(null!==a)return a;if(i instanceof Yt)throw new he(204,!1);if(i instanceof Function)return function zD(i){const o=i.length;if(o>0)throw function Wu(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new he(204,!1);const a=function Cr(i){return i&&(i[li]||i[Zs])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new he(204,!1)}function uv(i,o,a){let c;if(iu(i)){const d=q(i);return Qi(d)||av(d)}if(sv(i))c=()=>q(i.useValue);else if(function ew(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ri(i.deps||[]));else if(function HD(i){return!(!i||!i.useExisting)}(i))c=()=>sn(q(i.useExisting));else{const d=q(i&&(i.useClass||i.provide));if(!function cv(i){return!!i.deps}(i))return Qi(d)||av(d);c=()=>new d(...Ri(i.deps))}return c}function Jd(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Xd(i,o){for(const a of i)Array.isArray(a)?Xd(a,o):a&&Ie(a)?Xd(a.\u0275providers,o):o(a)}class WD{}class rw{}class sw{resolveComponentFactory(o){throw function ZD(i){const o=Error(`No component factory found for ${ve(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let eh=(()=>{class i{}return i.NULL=new sw,i})();function Fg(){return su(er(),ue())}function su(i,o){return new th(cr(i,o))}let th=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Fg,i})();function Af(i){return i instanceof th?i.nativeElement:i}class hv{}let KD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function YD(){const i=ue(),a=Xn(er().index,i);return(ri(a)?a:i)[$t]}(),i})(),QD=(()=>{class i{}return i.\u0275prov=Ct({token:i,providedIn:"root",factory:()=>null}),i})();class ow{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const aw=new ow("15.2.9"),Lg={},fv="ngOriginalError";function pv(i){return i[fv]}class Mf{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&pv(o);for(;a&&pv(a);)a=pv(a);return a||null}}function aa(i){return i instanceof Function?i():i}function fw(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||i.charCodeAt(d+g)<=32)return d}a=d+1}}const gv="ng-template";function mv(i,o,a){let c=0,d=!0;for(;c<i.length;){let g=i[c++];if("string"==typeof g&&d){const v=i[c++];if(a&&"class"===g&&-1!==fw(v.toLowerCase(),o,0))return!0}else{if(1===g){for(;c<i.length&&"string"==typeof(g=i[c++]);)if(g.toLowerCase()===o)return!0;return!1}"number"==typeof g&&(d=!1)}}return!1}function yv(i){return 4===i.type&&i.value!==gv}function nh(i,o,a){return o===(4!==i.type||a?i.value:gv)}function vv(i,o,a){let c=4;const d=i.attrs||[],g=function gw(i){for(let o=0;o<i.length;o++)if(qc(i[o]))return o;return i.length}(d);let v=!1;for(let I=0;I<o.length;I++){const C=o[I];if("number"!=typeof C){if(!v)if(4&c){if(c=2|1&c,""!==C&&!nh(i,C,a)||""===C&&1===o.length){if(So(c))return!1;v=!0}}else{const M=8&c?C:o[++I];if(8&c&&null!==i.attrs){if(!mv(i.attrs,M,a)){if(So(c))return!1;v=!0}continue}const F=pw(8&c?"class":C,d,yv(i),a);if(-1===F){if(So(c))return!1;v=!0;continue}if(""!==M){let G;G=F>g?"":d[F+1].toLowerCase();const J=8&c?G:null;if(J&&-1!==fw(J,M,0)||2&c&&M!==G){if(So(c))return!1;v=!0}}}}else{if(!v&&!So(c)&&!So(C))return!1;if(v&&So(C))continue;v=!1,c=C|1&c}}return So(c)||v}function So(i){return 0==(1&i)}function pw(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function mw(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Rf(i,o,a=!1){for(let c=0;c<o.length;c++)if(vv(i,o[c],a))return!0;return!1}function yw(i,o){return i?":not("+o.trim()+")":o}function sC(i){let o=i[0],a=1,c=2,d="",g=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!So(v)&&(o+=yw(g,d),d=""),c=v,g=g||!So(c);a++}return""!==d&&(o+=yw(g,d)),o}const Ut={};function vw(i){_w(Vt(),ue(),yr()+i,!1)}function _w(i,o,a,c){if(!c)if(3==(3&o[Lt])){const g=i.preOrderCheckHooks;null!==g&&Hc(o,g,a)}else{const g=i.preOrderHooks;null!==g&&Gc(o,g,0,a)}fs(a)}function Iw(i,o=null,a=null,c){const d=_v(i,o,a,c);return d.resolveInjectorInitializers(),d}function _v(i,o=null,a=null,c,d=new Set){const g=[a||Oe,Sf(i)];return c=c||("object"==typeof i?void 0:ve(i)),new tw(g,o||kg(),c||null,d)}let rh=(()=>{class i{static create(a,c){if(Array.isArray(a))return Iw({name:""},c,a,"");{const d=a.name??"";return Iw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=di,i.NULL=new J0,i.\u0275prov=Ct({token:i,providedIn:"any",factory:()=>sn(Cl)}),i.__NG_ELEMENT_ID__=-1,i})();function oh(i,o=ft.Default){const a=ue();return null===a?sn(i,o):Hu(er(),a,q(i),o)}function Sw(){throw new Error("invalid")}function Aw(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const g=a[c+1];if(-1!==g){const v=i.data[g];xu(a[c]),v.contentQueries(2,o[g],g)}}}function jg(i,o,a,c,d,g,v,I,C,M,R){const F=o.blueprint.slice();return F[fi]=d,F[Lt]=76|c,(null!==R||i&&1024&i[Lt])&&(F[Lt]|=1024),qo(F),F[In]=F[Qs]=i,F[Pn]=a,F[ss]=v||i&&i[ss],F[$t]=I||i&&i[$t],F[ba]=C||i&&i[ba]||null,F[Ca]=M||i&&i[Ca]||null,F[qn]=g,F[jo]=function kd(){return Bi++}(),F[mr]=R,F[Vn]=2==o.type?i[Vn]:F,F}function Ff(i,o,a,c,d){let g=i.data[o];if(null===g)g=function Lf(i,o,a,c,d){const g=eo(),v=wd(),C=i.data[o]=function bC(i,o,a,c,d,g){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=C),null!==g&&(v?null==g.child&&null!==C.parent&&(g.child=C):null===g.next&&(g.next=C,C.prev=g)),C}(i,o,a,c,d),function Ed(){return Pt.lFrame.inI18n}()&&(g.flags|=32);else if(64&g.type){g.type=a,g.value=c,g.attrs=d;const v=function Su(){const i=Pt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return qr(g,!0),g}function Vf(i,o,a,c){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function Cv(i,o,a){Nu(o);try{const c=i.viewQuery;null!==c&&ai(1,c,a);const d=i.template;null!==d&&xw(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Aw(i,o),i.staticViewQueries&&ai(2,i.viewQuery,a);const g=i.components;null!==g&&function Mw(i,o){for(let a=0;a<o.length;a++)Ww(i,o[a])}(o,g)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[Lt]&=-5,Pu()}}function $g(i,o,a,c){const d=o[Lt];if(128!=(128&d)){Nu(o);try{qo(o),function Ji(i){return Pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&xw(i,o,a,2,c);const v=3==(3&d);if(v){const M=i.preOrderCheckHooks;null!==M&&Hc(o,M,null)}else{const M=i.preOrderHooks;null!==M&&Gc(o,M,0,null),bd(o,0)}if(function Nv(i){for(let o=dl(i);null!==o;o=Co(o)){if(!o[kc])continue;const a=o[Js];for(let c=0;c<a.length;c++){const d=a[c];512&d[Lt]||xa(d[In],1),d[Lt]|=512}}}(o),function zw(i){for(let o=dl(i);null!==o;o=Co(o))for(let a=ar;a<o.length;a++){const c=o[a],d=c[We];ds(c)&&$g(d,c,d.template,c[Pn])}}(o),null!==i.contentQueries&&Aw(i,o),v){const M=i.contentCheckHooks;null!==M&&Hc(o,M)}else{const M=i.contentHooks;null!==M&&Gc(o,M,1),bd(o,1)}!function IC(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)fs(~d);else{const g=d,v=a[++c],I=a[++c];Mu(v,g),I(2,o[g])}}}finally{fs(-1)}}(i,o);const I=i.components;null!==I&&function DC(i,o){for(let a=0;a<o.length;a++)qw(i,o[a])}(o,I);const C=i.viewQuery;if(null!==C&&ai(2,C,c),v){const M=i.viewCheckHooks;null!==M&&Hc(o,M)}else{const M=i.viewHooks;null!==M&&Gc(o,M,2),bd(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[Lt]&=-41,512&o[Lt]&&(o[Lt]&=-513,xa(o[In],-1))}finally{Pu()}}}function xw(i,o,a,c,d){const g=yr(),v=2&c;try{fs(-1),v&&o.length>vn&&_w(i,o,vn,!1),zr(v?2:0,d),a(c,d)}finally{fs(g),zr(v?3:1,d)}}function Hg(i,o,a){if(Sa(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=i.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}function bv(i,o,a){Cu()&&(function Fw(i,o,a,c){const d=a.directiveStart,g=a.directiveEnd;Ho(a)&&function $w(i,o,a){const c=cr(o,i),d=Sv(a),g=i[ss],v=Al(i,jg(i,d,null,a.onPush?32:16,c,o,g,g.createRenderer(c,a),null,null,null));i[o.index]=v}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||Wc(a,o),te(c,o);const v=a.initialInputs;for(let I=d;I<g;I++){const C=i.data[I],M=Un(o,i,I,a);te(M,o),null!==v&&Hw(0,I-d,M,C,0,v),gi(C)&&(Xn(a.index,o)[Pn]=Un(o,i,I,a))}}(i,o,a,cr(a,o)),64==(64&a.flags)&&xv(i,o,a))}function Tv(i,o,a=cr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],I=-1===v?a(o,i):i[v];i[d++]=I}}}function Sv(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=ou(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function ou(i,o,a,c,d,g,v,I,C,M){const R=vn+c,F=R+d,G=function ua(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Ut);return a}(R,F),J="function"==typeof M?M():M;return G[We]={type:i,blueprint:G,template:a,queries:null,viewQuery:I,declTNode:o,data:G.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:C,consts:J,incompleteFirstPass:!1}}function Av(i,o,a,c){const d=Ov(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&AC(i).push(c,d.length-1))}function Rw(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const g=i[d];null===c?Nw(a,o,d,g):c.hasOwnProperty(d)&&Nw(a,o,c[d],g)}return a}function Nw(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function Mv(i,o,a,c){if(Cu()){const d=null===c?null:{"":-1},g=function Vw(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let g=0;g<a.length;g++){const v=a[g];if(Rf(o,v.selectors,!1))if(c||(c=[]),gi(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),c.unshift(...I,v),Gg(i,o,I.length)}else c.unshift(v),Gg(i,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(i,a);let v,I;null===g?v=I=null:[v,I]=g,null!==v&&Bf(i,o,a,v,d,I),d&&function Uw(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new he(-301,!1);c.push(o[d],g)}}}(a,c,d)}a.mergedAttrs=oo(a.mergedAttrs,a.attrs)}function Bf(i,o,a,c,d,g){for(let M=0;M<c.length;M++)gn(Wc(a,o),i,c[M].type);!function Bw(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let M=0;M<c.length;M++){const R=c[M];R.providersResolver&&R.providersResolver(R)}let v=!1,I=!1,C=Vf(i,o,c.length,null);for(let M=0;M<c.length;M++){const R=c[M];a.mergedAttrs=oo(a.mergedAttrs,R.hostAttrs),jw(i,a,o,C,R),zg(C,R,d),null!==R.contentQueries&&(a.flags|=4),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=64);const F=R.type.prototype;!v&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(a.index),v=!0),!I&&(F.ngOnChanges||F.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(a.index),I=!0),C++}!function Uf(i,o,a){const d=o.directiveEnd,g=i.data,v=o.attrs,I=[];let C=null,M=null;for(let R=o.directiveStart;R<d;R++){const F=g[R],G=a?a.get(F):null,de=G?G.outputs:null;C=Rw(F.inputs,R,C,G?G.inputs:null),M=Rw(F.outputs,R,M,de);const Le=null===C||null===v||yv(o)?null:Gw(C,R,v);I.push(Le)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=8),C.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=C,o.outputs=M}(i,a,g)}function xv(i,o,a){const c=a.directiveStart,d=a.directiveEnd,g=a.index,v=function mg(){return Pt.lFrame.currentDirectiveIndex}();try{fs(g);for(let I=c;I<d;I++){const C=i.data[I],M=o[I];Zn(I),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Lw(C,M)}}finally{fs(-1),Zn(v)}}function Lw(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Gg(i,o,a){o.componentOffset=a,(i.components??(i.components=[])).push(o.index)}function zg(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;gi(o)&&(a[""]=i)}}function jw(i,o,a,c,d){i.data[c]=d;const g=d.factory||(d.factory=Qi(d.type)),v=new ps(g,gi(d),oh);i.blueprint[c]=v,a[c]=v,function Ow(i,o,a,c,d){const g=d.hostBindings;if(g){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const I=~o.index;(function kw(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(v)!=I&&v.push(I),v.push(a,c,g)}}(i,o,c,Vf(i,a,d.hostVars,Ut),d)}function Ao(i,o,a,c,d,g){const v=cr(i,o);!function Rv(i,o,a,c,d,g,v){if(null==g)i.removeAttribute(o,d,a);else{const I=null==v?xe(g):v(g,c||"",d);i.setAttribute(o,d,I,a)}}(o[$t],v,g,i.value,a,c,d)}function Hw(i,o,a,c,d,g){const v=g[o];if(null!==v){const I=c.setInput;for(let C=0;C<v.length;){const M=v[C++],R=v[C++],F=v[C++];null!==I?c.setInput(a,F,M,R):a[R]=F}}}function Gw(i,o,a){let c=null,d=0;for(;d<a.length;){const g=a[d];if(0!==g)if(5!==g){if("number"==typeof g)break;if(i.hasOwnProperty(g)){null===c&&(c=[]);const v=i[g];for(let I=0;I<v.length;I+=2)if(v[I]===o){c.push(g,v[I+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function qg(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null]}function qw(i,o){const a=Xn(o,i);if(ds(a)){const c=a[We];48&a[Lt]?$g(c,a,c.template,a[Pn]):a[hn]>0&&Wg(a)}}function Wg(i){for(let c=dl(i);null!==c;c=Co(c))for(let d=ar;d<c.length;d++){const g=c[d];if(ds(g))if(512&g[Lt]){const v=g[We];$g(v,g,v.template,g[Pn])}else g[hn]>0&&Wg(g)}const a=i[We].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Xn(a[c],i);ds(d)&&d[hn]>0&&Wg(d)}}function Ww(i,o){const a=Xn(o,i),c=a[We];(function Pv(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),Cv(c,a,a[Pn])}function Al(i,o){return i[Ys]?i[os][pi]=o:i[Ys]=o,i[os]=o,o}function jf(i){for(;i;){i[Lt]|=32;const o=ll(i);if(yu(i)&&!o)return i;i=o}return null}function $f(i,o,a,c=!0){const d=o[ss];d.begin&&d.begin();try{$g(i,o,i.template,a)}catch(v){throw c&&Zg(o,v),v}finally{d.end&&d.end()}}function ai(i,o,a){xu(0),o(i,a)}function Ov(i){return i[Ks]||(i[Ks]=[])}function AC(i){return i.cleanup||(i.cleanup=[])}function Zg(i,o){const a=i[Ca],c=a?a.get(Mf,null):null;c&&c.handleError(o)}function Hf(i,o,a,c,d){for(let g=0;g<a.length;){const v=a[g++],I=a[g++],C=o[v],M=i.data[v];null!==M.setInput?M.setInput(C,d,c,I):C[I]=d}}function xl(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?g=I:1==g?d=ce(d,I):2==g&&(c=ce(c,I+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Kg(i,o,a,c,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&c.push(ur(g)),ii(g))for(let I=ar;I<g.length;I++){const C=g[I],M=C[We].firstChild;null!==M&&Kg(C[We],C,M,c)}const v=a.type;if(8&v)Kg(i,o,a.child,c);else if(32&v){const I=Us(a,o);let C;for(;C=I();)c.push(C)}else if(16&v){const I=Gd(o,a);if(Array.isArray(I))c.push(...I);else{const C=ll(o[Vn]);Kg(C[We],C,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class Rl{get rootNodes(){const o=this._lView,a=o[We];return Kg(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pn]}set context(o){this._lView[Pn]=o}get destroyed(){return 128==(128&this._lView[Lt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[In];if(ii(o)){const a=o[Ms],c=a?a.indexOf(this):-1;c>-1&&(hl(o,c),mo(a,c))}this._attachedToViewContainer=!1}Ud(this._lView[We],this._lView)}onDestroy(o){Av(this._lView[We],this._lView,null,o)}markForCheck(){jf(this._cdRefInjectingView||this._lView)}detach(){this._lView[Lt]&=-65}reattach(){this._lView[Lt]|=64}detectChanges(){$f(this._lView[We],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Vd(i,o){yl(i,o,o[$t],2,null,null)}(this._lView[We],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=o}}class xC extends Rl{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;$f(o[We],o,o[Pn],!1)}checkNoChanges(){}get context(){return null}}class RC extends eh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=pt(o);return new Yg(a,this.ngModule)}}function NC(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class rM{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Gn(c);const d=this.injector.get(o,Lg,c);return d!==Lg||a===Lg?d:this.parentInjector.get(o,a,c)}}class Yg extends rw{get inputs(){return NC(this.componentDef.inputs)}get outputs(){return NC(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function oC(i){return i.map(sC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let g=(d=d||this.ngModule)instanceof bl?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new rM(o,g):o,I=v.get(hv,null);if(null===I)throw new he(407,!1);const C=v.get(QD,null),M=I.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=c?function CC(i,o,a){return i.selectRootElement(o,a===ge.ShadowDom)}(M,c,this.componentDef.encapsulation):df(M,R,function nM(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(R)),G=this.componentDef.onPush?288:272,J=ou(0,null,null,1,0,null,null,null,null,null),de=jg(null,J,null,G,null,null,I,M,C,v,null);let Le,Ve;Nu(de);try{const ct=this.componentDef;let It,Se=null;ct.findHostDirectiveDefs?(It=[],Se=new Map,ct.findHostDirectiveDefs(ct,It,Se),It.push(ct)):It=[ct];const bt=function PC(i,o){const a=i[We],c=vn;return i[c]=o,Ff(a,c,2,"#host",null)}(de,F),kn=function Zw(i,o,a,c,d,g,v,I){const C=d[We];!function OC(i,o,a,c){for(const d of i)o.mergedAttrs=oo(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(xl(o,o.mergedAttrs,!0),null!==a&&_l(c,a,o))}(c,i,o,v);const M=g.createRenderer(o,a),R=jg(d,Sv(a),null,a.onPush?32:16,d[i.index],i,g,M,I||null,null,null);return C.firstCreatePass&&Gg(C,i,c.length-1),Al(d,R),d[i.index]=R}(bt,F,ct,It,de,I,M);Ve=gd(J,vn),F&&function FC(i,o,a,c){if(c)Yo(i,a,["ng-version",aw.full]);else{const{attrs:d,classes:g}=function aC(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let g=i[c];if("string"==typeof g)2===d?""!==g&&o.push(g,i[++c]):8===d&&a.push(g);else{if(!So(d))break;d=g}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Yo(i,a,d),g&&g.length>0&&es(i,a,g.join(" "))}}(M,ct,F,c),void 0!==a&&function kv(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const g=a[d];c.push(null!=g?Array.from(g):null)}}(Ve,this.ngContentSelectors,a),Le=function kC(i,o,a,c,d,g){const v=er(),I=d[We],C=cr(v,d);Bf(I,d,v,a,null,c);for(let R=0;R<a.length;R++)te(Un(d,I,v.directiveStart+R,v),d);xv(I,d,v),C&&te(C,d);const M=Un(d,I,v.directiveStart+v.componentOffset,v);if(i[Pn]=d[Pn]=M,null!==g)for(const R of g)R(M,o);return Hg(I,v,i),M}(kn,ct,It,Se,de,[Gf]),Cv(J,de,null)}finally{Pu()}return new iM(this.componentType,Le,su(Ve,de),de,Ve)}}class iM extends WD{constructor(o,a,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new xC(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const g=this._rootLView;Hf(g[We],g,d,o,a),jf(Xn(this._tNode.index,g))}}get injector(){return new ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Gf(){const i=er();Fu(ue()[We],i)}function pc(i){let o=function zf(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let d;if(gi(i))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new he(903,!1);d=o.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=Wf(i.inputs),v.declaredInputs=Wf(i.declaredInputs),v.outputs=Wf(i.outputs);const I=d.hostBindings;I&&VC(i,I);const C=d.viewQuery,M=d.contentQueries;if(C&&LC(i,C),M&&Fv(i,M),pe(i.inputs,d.inputs),pe(i.declaredInputs,d.declaredInputs),pe(i.outputs,d.outputs),gi(d)&&d.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const I=g[v];I&&I.ngInherit&&I(i),I===pc&&(a=!1)}}o=Object.getPrototypeOf(o)}!function qf(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=o+=d.hostVars,d.hostAttrs=oo(d.hostAttrs,a=oo(a,d.hostAttrs))}}(c)}function Wf(i){return i===Q?{}:i===Oe?[]:i}function LC(i,o){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{o(c,d),a(c,d)}:o}function Fv(i,o){const a=i.contentQueries;i.contentQueries=a?(c,d,g)=>{o(c,d,g),a(c,d,g)}:o}function VC(i,o){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{o(c,d),a(c,d)}:o}function gc(i){return!!ch(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function ch(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ca(i,o,a){return i[o]=a}function Pr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Lv(i,o,a,c){const d=ue();return Pr(d,to(),o)&&(Vt(),Ao(bn(),d,i,o,a,c)),Lv}function Xw(i,o,a,c,d,g,v,I){const C=ue(),M=Vt(),R=i+vn,F=M.firstCreatePass?function oM(i,o,a,c,d,g,v,I,C){const M=o.consts,R=Ff(o,i,4,v||null,Ns(M,I));Mv(o,a,R,Ns(M,C)),Fu(o,R);const F=R.tView=ou(2,R,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,R),F.queries=o.queries.embeddedTView(R)),R}(R,M,C,o,a,c,d,g,v):M.data[R];qr(F,!1);const G=C[$t].createComment("");eu(M,C,G,F),te(G,C),Al(C,C[R]=qg(G,C,G,F)),Fc(F)&&bv(M,C,F),null!=v&&Tv(C,F,I)}function tE(i,o,a){const c=ue();return Pr(c,to(),o)&&function _r(i,o,a,c,d,g,v,I){const C=cr(o,a);let R,M=o.inputs;!I&&null!=M&&(R=M[c])?(Hf(i,a,R,c,d),Ho(o)&&function Pw(i,o){const a=Xn(o,i);16&a[Lt]||(a[Lt]|=32)}(a,o.index)):3&o.type&&(c=function TC(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,o.value||"",c):d,g.setProperty(C,c,d))}(Vt(),bn(),c,i,o,c[$t],a,!1),tE}function nE(i,o,a,c,d){const v=d?"class":"style";Hf(i,a,o.inputs[v],v,c)}function im(i,o,a,c){const d=ue(),g=Vt(),v=vn+i,I=d[$t],C=g.firstCreatePass?function uM(i,o,a,c,d,g){const v=o.consts,C=Ff(o,i,2,c,Ns(v,d));return Mv(o,a,C,Ns(v,g)),null!==C.attrs&&xl(C,C.attrs,!1),null!==C.mergedAttrs&&xl(C,C.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,C),C}(v,g,d,o,a,c):g.data[v],M=d[v]=df(I,o,function Cd(){return Pt.lFrame.currentNamespace}()),R=Fc(C);return qr(C,!0),_l(I,M,C),32!=(32&C.flags)&&eu(g,d,M,C),0===function yd(){return Pt.lFrame.elementDepthCount}()&&te(M,d),function Du(){Pt.lFrame.elementDepthCount++}(),R&&(bv(g,d,C),Hg(g,C,d)),null!==c&&Tv(d,C),im}function Xf(){let i=er();wd()?function Au(){Pt.lFrame.isParent=!1}():(i=i.parent,qr(i,!1));const o=i;!function vd(){Pt.lFrame.elementDepthCount--}();const a=Vt();return a.firstCreatePass&&(Fu(a,i),Sa(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function Fa(i){return 0!=(8&i.flags)}(o)&&nE(a,o,ue(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function ro(i){return 0!=(16&i.flags)}(o)&&nE(a,o,ue(),o.stylesWithoutHost,!1),Xf}function jv(i,o,a,c){return im(i,o,a,c),Xf(),jv}function Hv(i){return!!i&&"function"==typeof i.then}function HC(i){return!!i&&"function"==typeof i.subscribe}const Gv=HC;function zv(i,o,a,c){const d=ue(),g=Vt(),v=er();return function Wv(i,o,a,c,d,g,v){const I=Fc(c),M=i.firstCreatePass&&AC(i),R=o[Pn],F=Ov(o);let G=!0;if(3&c.type||v){const Le=cr(c,o),Ve=v?v(Le):Le,ct=F.length,It=v?bt=>v(ur(bt[c.index])):c.index;let Se=null;if(!v&&I&&(Se=function GC(i,o,a,c){const d=i.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===c){const I=o[Ks],C=d[g+2];return I.length>C?I[C]:null}"string"==typeof v&&(g+=2)}return null}(i,o,d,c.index)),null!==Se)(Se.__ngLastListenerFn__||Se).__ngNextListenerFn__=g,Se.__ngLastListenerFn__=g,G=!1;else{g=sE(c,o,R,g,!1);const bt=a.listen(Ve,d,g);F.push(g,bt),M&&M.push(d,It,ct,ct+1)}}else g=sE(c,o,R,g,!1);const J=c.outputs;let de;if(G&&null!==J&&(de=J[d])){const Le=de.length;if(Le)for(let Ve=0;Ve<Le;Ve+=2){const kn=o[de[Ve]][de[Ve+1]].subscribe(g),Fn=F.length;F.push(g,kn),M&&M.push(d,c.index,Fn,-(Fn+1))}}}(g,d,d[$t],v,i,o,c),zv}function om(i,o,a,c){try{return zr(6,o,a),!1!==a(c)}catch(d){return Zg(i,d),!1}finally{zr(7,o,a)}}function sE(i,o,a,c,d){return function g(v){if(v===Function)return c;jf(i.componentOffset>-1?Xn(i.index,o):o);let C=om(o,a,c,v),M=g.__ngNextListenerFn__;for(;M;)C=om(o,a,M,v)&&C,M=M.__ngNextListenerFn__;return d&&!1===C&&(v.preventDefault(),v.returnValue=!1),C}}function lm(i,o){return i<<17|o<<2}function vc(i){return i>>17&32767}function dE(i){return 2|i}function au(i){return(131068&i)>>2}function Qv(i,o){return-131069&i|o<<2}function dm(i){return 1|i}function Jv(i,o,a,c,d){const g=i[a+1],v=null===o;let I=c?vc(g):au(g),C=!1;for(;0!==I&&(!1===C||v);){const R=i[I+1];KC(i[I],o)&&(C=!0,i[I+1]=c?dm(R):dE(R)),I=c?vc(R):au(R)}C&&(i[a+1]=c?dE(g):dm(g))}function KC(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&si(i,o)>=0}function yE(i,o){return function la(i,o,a,c){const d=ue(),g=Vt(),v=function vi(i){const o=Pt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2);g.firstUpdatePass&&function EE(i,o,a,c){const d=i.data;if(null===d[a+1]){const g=d[yr()],v=function wE(i,o){return o>=i.expandoStartIndex}(i,a);(function lu(i,o){return 0!=(i.flags&(o?8:16))})(g,c)&&null===o&&!v&&(o=!1),o=function nb(i,o,a,c){const d=function Wo(i){const o=Pt.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(a=Fl(a=kr(null,i,o,a,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||i[v]!==d)if(a=kr(d,i,o,a,c),null===g){let C=function rb(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==au(c))return i[vc(c)]}(i,o,c);void 0!==C&&Array.isArray(C)&&(C=kr(null,i,o,C[1],c),C=Fl(C,o.attrs,c),function ib(i,o,a,c){i[vc(a?o.classBindings:o.styleBindings)]=c}(i,o,c,C))}else g=function sb(i,o,a){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=Fl(c,i[g].hostAttrs,a);return Fl(c,o.attrs,a)}(i,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,c),function fE(i,o,a,c,d,g){let v=g?o.classBindings:o.styleBindings,I=vc(v),C=au(v);i[c]=a;let R,M=!1;if(Array.isArray(a)?(R=a[1],(null===R||si(a,R)>0)&&(M=!0)):R=a,d)if(0!==C){const G=vc(i[I+1]);i[c+1]=lm(G,I),0!==G&&(i[G+1]=Qv(i[G+1],c)),i[I+1]=function WC(i,o){return 131071&i|o<<17}(i[I+1],c)}else i[c+1]=lm(I,0),0!==I&&(i[I+1]=Qv(i[I+1],c)),I=c;else i[c+1]=lm(C,0),0===I?I=c:i[C+1]=Qv(i[C+1],c),C=c;M&&(i[c+1]=dE(i[c+1])),Jv(i,R,c,!0),Jv(i,R,c,!1),function ZC(i,o,a,c,d){const g=d?i.residualClasses:i.residualStyles;null!=g&&"string"==typeof o&&si(g,o)>=0&&(a[c+1]=dm(a[c+1]))}(o,R,i,c,g),v=lm(I,C),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,c)}}(g,i,v,c),o!==Ut&&Pr(d,v,o)&&function DE(i,o,a,c,d,g,v,I){if(!(3&o.type))return;const C=i.data,M=C[I+1],R=function hE(i){return 1==(1&i)}(M)?ye(C,o,a,d,au(M),v):void 0;ha(R)||(ha(g)||function lE(i){return 2==(2&i)}(M)&&(g=ye(C,null,a,d,I,v)),function Bs(i,o,a,c,d){if(o)d?i.addClass(a,c):i.removeClass(a,c);else{let g=-1===c.indexOf("-")?void 0:vt.DashCase;null==d?i.removeStyle(a,c,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=vt.Important),i.setStyle(a,c,d,g))}}(c,v,ls(yr(),a),d,g))}(g,g.data[yr()],d,d[$t],i,d[v+1]=function fm(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=ve(Nr(i)))),i}(o,a),c,v)}(i,o,null,!0),yE}function kr(i,o,a,c,d){let g=null;const v=a.directiveEnd;let I=a.directiveStylingLast;for(-1===I?I=a.directiveStart:I++;I<v&&(g=o[I],c=Fl(c,g.hostAttrs,d),g!==i);)I++;return null!==i&&(a.directiveStylingLast=I),c}function Fl(i,o,a){const c=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Wr(i,v,!!a||o[++g]))}return void 0===i?null:i}function ye(i,o,a,c,d,g){const v=null===o;let I;for(;d>0;){const C=i[d],M=Array.isArray(C),R=M?C[1]:C,F=null===R;let G=a[d+1];G===Ut&&(G=F?Oe:void 0);let J=F?un(G,c):R===c?G:void 0;if(M&&!ha(J)&&(J=un(C,c)),ha(J)&&(I=J,v))return I;const de=i[d+1];d=v?vc(de):au(de)}if(null!==o){let C=g?o.residualClasses:o.residualStyles;null!=C&&(I=un(C,c))}return I}function ha(i){return void 0!==i}function cn(i,o=""){const a=ue(),c=Vt(),d=i+vn,g=c.firstCreatePass?Ff(c,d,1,o,null):c.data[d],v=a[d]=function sc(i,o){return i.createText(o)}(a[$t],o);eu(c,a,v,g),qr(g,!1)}function n_(i){return ts("",i,""),n_}function ts(i,o,a){const c=ue(),d=function lh(i,o,a,c){return Pr(i,to(),a)?o+xe(a)+c:Ut}(c,i,o,a);return d!==Ut&&function Mo(i,o,a){const c=ls(o,i);!function lf(i,o,a){i.setValue(o,a)}(i[$t],c,a)}(c,yr(),d),ts}const du=void 0;var hb=["en",[["a","p"],["AM","PM"],du],[["AM","PM"],du,du],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],du,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],du,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",du,"{1} 'at' {0}",du],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function c_(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let mh={};function Im(i){const o=function fb(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=RE(o);if(a)return a;const c=o.split("-")[0];if(a=RE(c),a)return a;if("en"===c)return hb;throw new he(701,!1)}function yh(i){return Im(i)[Mt.PluralCase]}function RE(i){return i in mh||(mh[i]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[i]),mh[i]}var Mt=(()=>((Mt=Mt||{})[Mt.LocaleId=0]="LocaleId",Mt[Mt.DayPeriodsFormat=1]="DayPeriodsFormat",Mt[Mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Mt[Mt.DaysFormat=3]="DaysFormat",Mt[Mt.DaysStandalone=4]="DaysStandalone",Mt[Mt.MonthsFormat=5]="MonthsFormat",Mt[Mt.MonthsStandalone=6]="MonthsStandalone",Mt[Mt.Eras=7]="Eras",Mt[Mt.FirstDayOfWeek=8]="FirstDayOfWeek",Mt[Mt.WeekendRange=9]="WeekendRange",Mt[Mt.DateFormat=10]="DateFormat",Mt[Mt.TimeFormat=11]="TimeFormat",Mt[Mt.DateTimeFormat=12]="DateTimeFormat",Mt[Mt.NumberSymbols=13]="NumberSymbols",Mt[Mt.NumberFormats=14]="NumberFormats",Mt[Mt.CurrencyCode=15]="CurrencyCode",Mt[Mt.CurrencySymbol=16]="CurrencySymbol",Mt[Mt.CurrencyName=17]="CurrencyName",Mt[Mt.Currencies=18]="Currencies",Mt[Mt.Directionality=19]="Directionality",Mt[Mt.PluralCase=20]="PluralCase",Mt[Mt.ExtraData=21]="ExtraData",Mt))();const Vl="en-US";let bm=Vl;function Ro(i,o,a,c,d){if(i=q(i),Array.isArray(i))for(let g=0;g<i.length;g++)Ro(i[g],o,a,c,d);else{const g=Vt(),v=ue();let I=iu(i)?i:q(i.provide),C=uv(i);const M=er(),R=1048575&M.providerIndexes,F=M.directiveStart,G=M.providerIndexes>>20;if(iu(i)||!i.multi){const J=new ps(C,d,oh),de=Lm(I,o,d?R:R+G,F);-1===de?(gn(Wc(M,v),g,I),Eh(g,i,o.length),o.push(I),M.directiveStart++,M.directiveEnd++,d&&(M.providerIndexes+=1048576),a.push(J),v.push(J)):(a[de]=J,v[de]=J)}else{const J=Lm(I,o,R+G,F),de=Lm(I,o,R,R+G),Ve=de>=0&&a[de];if(d&&!Ve||!d&&!(J>=0&&a[J])){gn(Wc(M,v),g,I);const ct=function Ep(i,o,a,c,d){const g=new ps(i,a,oh);return g.multi=[],g.index=o,g.componentProviders=0,wp(g,d,c&&!a),g}(d?Vm:$n,a.length,d,c,C);!d&&Ve&&(a[de].providerFactory=ct),Eh(g,i,o.length,0),o.push(I),M.directiveStart++,M.directiveEnd++,d&&(M.providerIndexes+=1048576),a.push(ct),v.push(ct)}else Eh(g,i,J>-1?J:de,wp(a[d?de:J],C,!d&&c));!d&&c&&Ve&&a[de].componentProviders++}}}function Eh(i,o,a,c){const d=iu(o),g=function Pg(i){return!!i.useClass}(o);if(d||g){const C=(g?q(o.useClass):o).prototype.ngOnDestroy;if(C){const M=i.destroyHooks||(i.destroyHooks=[]);if(!d&&o.multi){const R=M.indexOf(a);-1===R?M.push(a,[c,C]):M[R+1].push(c,C)}else M.push(a,C)}}}function wp(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function Lm(i,o,a,c){for(let d=a;d<c;d++)if(o[d]===i)return d;return-1}function $n(i,o,a,c){return Hl(this.multi,[])}function Vm(i,o,a,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,I=Un(a,a[We],this.providerFactory.index,c);g=I.slice(0,v),Hl(d,g);for(let C=v;C<I.length;C++)g.push(I[C])}else g=[],Hl(d,g);return g}function Hl(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function JE(i,o=[]){return a=>{a.providersResolver=(c,d)=>function $l(i,o,a){const c=Vt();if(c.firstCreatePass){const d=gi(i);Ro(a,c.data,c.blueprint,d,!0),Ro(o,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,o)}}class Gl{}class XE{}function Ab(i,o){return new eI(i,o??null)}class eI extends Gl{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new RC(this);const c=zn(o);this._bootstrapComponents=aa(c.bootstrap),this._r3Injector=_v(o,a,[{provide:Gl,useValue:this},{provide:eh,useValue:this.componentFactoryResolver}],ve(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class zl extends XE{constructor(o){super(),this.moduleType=o}create(o){return new eI(this.moduleType,o)}}class Ec extends Gl{constructor(o,a,c){super(),this.componentFactoryResolver=new RC(this),this.instance=null;const d=new tw([...o,{provide:Gl,useValue:this},{provide:eh,useValue:this.componentFactoryResolver}],a||kg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Um(i,o,a=null){return new Ec(i,o,a).injector}let tI=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=Qd(0,a.type),d=c.length>0?Um([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Ct({token:i,providedIn:"environment",factory:()=>new i(sn(bl))}),i})();function T_(i){i.getStandaloneInjector=o=>o.get(tI).getOrCreateStandaloneInjector(i)}function Dp(i,o,a){const c=Wn()+i,d=ue();return d[c]===Ut?ca(d,c,a?o.call(a):o()):function Nl(i,o){return i[o]}(d,c)}function $m(i,o,a,c){return function R_(i,o,a,c,d,g){const v=o+a;return Pr(i,v,d)?ca(i,v+1,g?c.call(g,d):c(d)):function Tp(i,o){const a=i[o];return a===Ut?void 0:a}(i,v+1)}(ue(),Wn(),i,o,a,c)}function L_(i){return o=>{setTimeout(i,void 0,o)}}const No=class Gm extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,g=a||(()=>null),v=c;if(o&&"object"==typeof o){const C=o;d=C.next?.bind(C),g=C.error?.bind(C),v=C.complete?.bind(C)}this.__isAsync&&(g=L_(g),d&&(d=L_(d)),v&&(v=L_(v)));const I=super.subscribe({next:d,error:g,complete:v});return o instanceof Y.w0&&o.add(I),I}};function Mp(){return this._results[Symbol.iterator]()}class zm{get changes(){return this._changes||(this._changes=new No)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=zm.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=Mp)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function Fi(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Xc(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],g=o[c];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Dh=(()=>{class i{}return i.__NG_ELEMENT_ID__=dI,i})();const V_=Dh,U_=class extends V_{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tView,d=jg(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[Bo]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[Yi];return null!==v&&(d[Yi]=v.createEmbeddedView(c)),Cv(c,d,o),new Rl(d)}};function dI(){return ql(er(),ue())}function ql(i,o){return 4&i.type?new U_(o,i,su(i,o)):null}let xp=(()=>{class i{}return i.__NG_ELEMENT_ID__=hI,i})();function hI(){return $_(er(),ue())}const Wl=xp,B_=class extends Wl{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return su(this._hostTNode,this._hostLView)}get injector(){return new ms(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ad(this._hostTNode,this._hostLView);if(ao(o)){const a=uo(o,this._hostLView),c=Ps(o);return new ms(a[We].data[c+8],a)}return new ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=j_(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-ar}createEmbeddedView(o,a,c){let d,g;"number"==typeof c?d=c:null!=c&&(d=c.index,g=c.injector);const v=o.createEmbeddedView(a||{},g);return this.insert(v,d),v}createComponent(o,a,c,d,g){const v=o&&!function qu(i){return"function"==typeof i}(o);let I;if(v)I=a;else{const F=a||{};I=F.index,c=F.injector,d=F.projectableNodes,g=F.environmentInjector||F.ngModuleRef}const C=v?o:new Yg(pt(o)),M=c||this.parentInjector;if(!g&&null==C.ngModule){const G=(v?M:this.parentInjector).get(bl,null);G&&(g=G)}const R=C.create(M,d,void 0,g);return this.insert(R.hostView,I),R}insert(o,a){const c=o._lView,d=c[We];if(function Bc(i){return ii(i[In])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const F=c[In],G=new B_(F,F[qn],F[In]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function Qa(i,o,a,c){const d=ar+c,g=a.length;c>0&&(a[d-1][pi]=o),c<g-ar?(o[pi]=a[d],tf(a,ar+c,o)):(a.push(o),o[pi]=null),o[In]=a;const v=o[Bo];null!==v&&a!==v&&function $y(i,o){const a=i[Js];o[Vn]!==o[In][In][Vn]&&(i[kc]=!0),null===a?i[Js]=[o]:a.push(o)}(v,o);const I=o[Yi];null!==I&&I.insertView(i),o[Lt]|=64}(d,c,v,g);const I=_s(g,v),C=c[$t],M=To(C,v[$o]);return null!==M&&function Eg(i,o,a,c,d,g){c[fi]=d,c[qn]=o,yl(i,c,a,1,d,g)}(d,v[qn],C,c,M,I),o.attachToViewContainerRef(),tf(qm(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=j_(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=hl(this._lContainer,a);c&&(mo(qm(this._lContainer),a),Ud(c[We],c))}detach(o){const a=this._adjustIndex(o,-1),c=hl(this._lContainer,a);return c&&null!=mo(qm(this._lContainer),a)?new Rl(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function j_(i){return i[Ms]}function qm(i){return i[Ms]||(i[Ms]=[])}function $_(i,o){let a;const c=o[i.index];if(ii(c))a=c;else{let d;if(8&i.type)d=ur(c);else{const g=o[$t];d=g.createComment("");const v=cr(i,o);sa(g,To(g,v),d,function Cg(i,o){return i.nextSibling(o)}(g,v),!1)}o[i.index]=a=qg(c,o,d,i),Al(o,a)}return new B_(a,i,o)}class Ch{constructor(o){this.queryList=o,this.matches=null}clone(){return new Ch(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gi{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<c;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Gi(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==Yr(o,a).matches&&this.queries[a].setDirty()}}class H_{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class Wm{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==a?a.push(g):a=[g])}return null!==a?new Wm(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Dc{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new Dc(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,a,Fb(a,g)),this.matchTNodeWithReadOption(o,a,lo(a,o,g,!1,!1))}else c===Dh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,lo(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===th||d===xp||d===Dh&&4&a.type)this.addMatch(a.index,-2);else{const g=lo(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Fb(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function G_(i,o,a,c){return-1===a?function Po(i,o){return 11&i.type?su(i,o):4&i.type?ql(i,o):null}(o,i):-2===a?function _n(i,o,a){return a===th?su(o,i):a===Dh?ql(o,i):a===xp?$_(o,i):void 0}(i,o,c):Un(i,i[We],a,o)}function fI(i,o,a,c){const d=o[Yi].queries[c];if(null===d.matches){const g=i.data,v=a.matches,I=[];for(let C=0;C<v.length;C+=2){const M=v[C];I.push(M<0?null:G_(o,g[M],v[C+1],a.metadata.read))}d.matches=I}return d.matches}function Rp(i,o,a,c){const d=i.queries.getByIndex(a),g=d.matches;if(null!==g){const v=fI(i,o,d,a);for(let I=0;I<g.length;I+=2){const C=g[I];if(C>0)c.push(v[I/2]);else{const M=g[I+1],R=o[-C];for(let F=ar;F<R.length;F++){const G=R[F];G[Bo]===G[In]&&Rp(G[We],G,M,c)}if(null!==R[Js]){const F=R[Js];for(let G=0;G<F.length;G++){const J=F[G];Rp(J[We],J,M,c)}}}}}return c}function Oo(i){const o=ue(),a=Vt(),c=jc();xu(c+1);const d=Yr(a,c);if(i.dirty&&function Iu(i){return 4==(4&i[Lt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const g=d.crossesNgTemplate?Rp(a,o,c,[]):fI(a,o,d,c);i.reset(g,Af),i.notifyOnChanges()}return!0}return!1}function Zm(i,o,a,c){const d=Vt();if(d.firstCreatePass){const g=er();(function ga(i,o,a){null===i.queries&&(i.queries=new Wm),i.queries.track(new Dc(o,a))})(d,new H_(o,a,c),g.index),function Gs(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function q_(i,o,a){const c=new zm(4==(4&a));Av(i,o,c,c.destroy),null===o[Yi]&&(o[Yi]=new Gi),o[Yi].queries.push(new Ch(c))}(d,ue(),a)}function Zl(){return function z_(i,o){return i[Yi].queries[o].queryList}(ue(),jc())}function Yr(i,o){return i.queries.getByIndex(o)}function Pp(i){return!!zn(i)}function bc(...i){}const J_=new Yt("Application Initializer");let Ai=(()=>{class i{constructor(a){this.appInits=a,this.resolve=bc,this.reject=bc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(Hv(g))a.push(g);else if(Gv(g)){const v=new Promise((I,C)=>{g.subscribe({complete:I,error:C})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(sn(J_,8))},i.\u0275prov=Ct({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Xm=new Yt("AppId",{providedIn:"root",factory:function X_(){return`${ya()}${ya()}${ya()}`}});function ya(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ey=new Yt("Platform Initializer"),ee=new Yt("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let qb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ct({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Fo=new Yt("LocaleId",{providedIn:"root",factory:()=>Nn(Fo,ft.Optional|ft.SkipSelf)||function Vp(){return typeof $localize<"u"&&$localize.locale||Vl}()}),Wb=new Yt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Kb{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let Yb=(()=>{class i{compileModuleSync(a){return new zl(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),g=aa(zn(a).declarations).reduce((v,I)=>{const C=pt(I);return C&&v.push(new Yg(C)),v},[]);return new Kb(c,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ct({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _a=(()=>Promise.resolve(0))();function ny(i){typeof Zone>"u"?_a.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class qs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new No(!1),this.onMicrotaskEmpty=new No(!1),this.onStable=new No(!1),this.onError=new No(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ry(){let i=Xt.requestAnimationFrame,o=Xt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function eT(i){const o=()=>{!function Xb(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Xt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,r0(i),i.isCheckStableRunning=!0,n0(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),r0(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,g,v,I)=>{try{return TI(i),a.invokeTask(d,g,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||i.shouldCoalesceRunChangeDetection)&&o(),SI(i)}},onInvoke:(a,c,d,g,v,I,C)=>{try{return TI(i),a.invoke(d,g,v,I,C)}finally{i.shouldCoalesceRunChangeDetection&&o(),SI(i)}},onHasTask:(a,c,d,g)=>{a.hasTask(d,g),c===d&&("microTask"==g.change?(i._hasPendingMicrotasks=g.microTask,r0(i),n0(i)):"macroTask"==g.change&&(i.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,c,d,g)=>(a.handleError(d,g),i.runOutsideAngular(()=>i.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qs.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(qs.isInAngularZone())throw new he(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,Jb,bc,bc);try{return g.runTask(v,a,c)}finally{g.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const Jb={};function n0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function r0(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function TI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function SI(i){i._nesting--,n0(i)}class tT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new No,this.onMicrotaskEmpty=new No,this.onStable=new No,this.onError=new No}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const AI=new Yt(""),MI=new Yt("");let s0,nT=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,s0||(function rT(i){s0=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qs.assertNotInAngularZone(),ny(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ny(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(sn(qs),sn(xI),sn(MI))},i.\u0275prov=Ct({token:i,factory:i.\u0275fac}),i})(),xI=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return s0?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ct({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const wa=!1;let Tc=null;const o0=new Yt("AllowMultipleToken"),iy=new Yt("PlatformDestroyListeners"),RI=new Yt("appBootstrapListener");class Sc{constructor(o,a){this.name=o,this.token=a}}function Rn(i,o,a=[]){const c=`Platform: ${o}`,d=new Yt(c);return(g=[])=>{let v=sy();if(!v||v.injector.get(o0,!1)){const I=[...a,...g,{provide:d,useValue:!0}];i?i(I):function PI(i){if(Tc&&!Tc.get(o0,!1))throw new he(400,!1);Tc=i;const o=i.get(kI);(function Bp(i){const o=i.get(ey,null);o&&o.forEach(a=>a())})(i)}(function Ql(i=[],o){return rh.create({name:o,providers:[{provide:fc,useValue:"platform"},{provide:iy,useValue:new Set([()=>Tc=null])},...i]})}(I,c))}return function OI(i){const o=sy();if(!o)throw new he(401,!1);return o}()}}function sy(){return Tc?.get(kI)??null}let kI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function FI(i,o){let a;return a="noop"===i?new tT:("zone.js"===i?void 0:i)||new qs(o),a}(c?.ngZone,function Er(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),g=[{provide:qs,useValue:d}];return d.run(()=>{const v=rh.create({providers:g,parent:this.injector,name:a.moduleType.name}),I=a.create(v),C=I.injector.get(Mf,null);if(!C)throw new he(402,!1);return d.runOutsideAngular(()=>{const M=d.onError.subscribe({next:R=>{C.handleError(R)}});I.onDestroy(()=>{Jl(this._modules,I),M.unsubscribe()})}),function fu(i,o,a){try{const c=a();return Hv(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(C,d,()=>{const M=I.injector.get(Ai);return M.runInitializers(),M.donePromise.then(()=>(function Tm(i){dt(i,"Expected localeId to be defined"),"string"==typeof i&&(bm=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(Fo,Vl)||Vl),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=Yn({},c);return function a0(i,o,a){const c=new zl(a);return Promise.resolve(c)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const c=a.injector.get(Ws);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new he(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(iy,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(sn(rh))},i.\u0275prov=Ct({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Yn(i,o){return Array.isArray(o)?o.reduce(Yn,i):{...i,...o}}let Ws=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new O.y(I=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{qs.assertNotInAngularZone(),ny(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{qs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{C.unsubscribe(),M.unsubscribe()}});this.isStable=(0,re.T)(g,v.pipe((0,ie.B)()))}bootstrap(a,c){const d=a instanceof rw;if(!this._injector.get(Ai).done){!d&&or(a);throw new he(405,wa)}let v;v=d?a:this._injector.get(eh).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function NI(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Gl),M=v.create(rh.NULL,[],c||v.selector,I),R=M.location.nativeElement,F=M.injector.get(AI,null);return F?.registerApplication(R),M.onDestroy(()=>{this.detachView(M.hostView),Jl(this.components,M),F?.unregisterApplication(R)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;Jl(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(RI,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Jl(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new he(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(sn(qs),sn(bl),sn(Mf))},i.\u0275prov=Ct({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Jl(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function iT(){return!1}let Ea=(()=>{class i{}return i.__NG_ELEMENT_ID__=Hp,i})();function Hp(i){return function Ac(i,o,a){if(Ho(i)&&!a){const c=Xn(i.index,o);return new Rl(c,c)}return 47&i.type?new Rl(o[Vn],o):null}(er(),ue(),16==(16&i))}class nd{constructor(){}supports(o){return gc(o)}create(o){return new jI(o)}}const uT=(i,o)=>o;class jI{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||uT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,g=null;for(;a||c;){const v=!c||a&&a.currentIndex<ay(c,d,g)?a:c,I=ay(v,d,g),C=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const M=I-d,R=C-d;if(M!=R){for(let G=0;G<M;G++){const J=G<g.length?g[G]:g[G]=0,de=J+G;R<=de&&de<M&&(g[G]=J+1)}g[v.previousIndex]=R-M}}I!==C&&o(v,I,C)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!gc(o))throw new he(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)g=o[I],v=this._trackByFn(I,g),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,g,v,I)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,I),c=!0),a=a._next}else d=0,function Zf(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new tn(a,c),g,d),o}_verifyReinsertion(o,a,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new rd),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rd),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class tn{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wn{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class rd{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new wn,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ay(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class uy{constructor(){}supports(o){return o instanceof Map||ch(o)}create(){return new $I}}class $I{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||ch(o)))throw new he(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new p0(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class p0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function g0(){return new cy([new nd])}let cy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||g0()),deps:[[i,new _t,new qa]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new he(901,!1)}}return i.\u0275prov=Ct({token:i,providedIn:"root",factory:g0}),i})();function HI(){return new m0([new uy])}let m0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||HI()),deps:[[i,new _t,new qa]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new he(901,!1)}}return i.\u0275prov=Ct({token:i,providedIn:"root",factory:HI}),i})();const hT=Rn(null,"core",[]);let fT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(sn(Ws))},i.\u0275mod=X({type:i}),i.\u0275inj=yn({}),i})();function pT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(mt,Ce,k)=>{k.d(Ce,{Z:()=>Ze});var f=k(2090),Y=k(4859),O=k(6881),re=k(1877);class ie{constructor(he,Me){this._delegate=he,this.firebase=Me,(0,O._addComponent)(he,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=he.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(he){this._delegate.automaticDataCollectionEnabled=he}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(he=>{this._delegate.checkDestroyed(),he()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(he,Me=O._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const Ue=this._delegate.container.getProvider(he);return!Ue.isInitialized()&&"EXPLICIT"===(null===(xe=Ue.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&Ue.initialize(),Ue.getImmediate({identifier:Me})}_removeServiceInstance(he,Me=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(he).clearInstance(Me)}_addComponent(he){(0,O._addComponent)(this._delegate,he)}_addOrOverwriteComponent(he){(0,O._addOrOverwriteComponent)(this._delegate,he)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ce(){const lt=function ve(lt){const he={},Me={__esModule:!0,initializeApp:function Re(Ne,nt={}){const ne=O.initializeApp(Ne,nt);if((0,f.r3)(he,ne.name))return he[ne.name];const Tt=new lt(ne,Me);return he[ne.name]=Tt,Tt},app:Ue,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function we(Ne){const nt=Ne.name,ne=nt.replace("-compat","");if(O._registerComponent(Ne)&&"PUBLIC"===Ne.type){const Tt=(Xe=Ue())=>{if("function"!=typeof Xe[ne])throw pe.create("invalid-app-argument",{appName:nt});return Xe[ne]()};void 0!==Ne.serviceProps&&(0,f.ZB)(Tt,Ne.serviceProps),Me[ne]=Tt,lt.prototype[ne]=function(...Xe){return this._getService.bind(this,nt).apply(this,Ne.multipleInstances?Xe:[])}}return"PUBLIC"===Ne.type?Me[ne]:null},removeApp:function xe(Ne){delete he[Ne]},useAsService:function Ge(Ne,nt){return"serverAuth"===nt?null:nt},modularAPIs:O}};function Ue(Ne){if(!(0,f.r3)(he,Ne=Ne||O._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:Ne});return he[Ne]}return Me.default=Me,Object.defineProperty(Me,"apps",{get:function _e(){return Object.keys(he).map(Ne=>he[Ne])}}),Ue.App=lt,Me}(ie);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function he(Me){(0,f.ZB)(lt,Me)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),lt}(),B=new re.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ze=j;!function Ie(lt){(0,O.registerVersion)("@firebase/app-compat","0.2.10",lt)}()},6881:(mt,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>re.ZR,SDK_VERSION:()=>As,_DEFAULT_ENTRY_NAME:()=>$r,_addComponent:()=>rt,_addOrOverwriteComponent:()=>Nt,_apps:()=>Xt,_clearComponents:()=>Hr,_components:()=>rn,_getProvider:()=>ei,_registerComponent:()=>di,_removeServiceInstance:()=>sr,deleteApp:()=>hi,getApp:()=>Zi,getApps:()=>sn,initializeApp:()=>Kt,onLog:()=>Ri,registerVersion:()=>Gn,setLogLevel:()=>En});var f=k(5861),Y=k(4859),O=k(1877),re=k(2090);const ie=(ae,X)=>X.some(Ae=>ae instanceof Ae);let se,pe;const j=new WeakMap,B=new WeakMap,q=new WeakMap,He=new WeakMap,Ie=new WeakMap;let he={get(ae,X,Ae){if(ae instanceof IDBTransaction){if("done"===X)return B.get(ae);if("objectStoreNames"===X)return ae.objectStoreNames||q.get(ae);if("store"===X)return Ae.objectStoreNames[1]?void 0:Ae.objectStore(Ae.objectStoreNames[0])}return Re(ae[X])},set:(ae,X,Ae)=>(ae[X]=Ae,!0),has:(ae,X)=>ae instanceof IDBTransaction&&("done"===X||"store"===X)||X in ae};function Ue(ae){return"function"==typeof ae?function xe(ae){return ae!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ce(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ae)?function(...X){return ae.apply(_e(this),X),Re(j.get(this))}:function(...X){return Re(ae.apply(_e(this),X))}:function(X,...Ae){const ht=ae.call(_e(this),X,...Ae);return q.set(ht,X.sort?X.sort():[X]),Re(ht)}}(ae):(ae instanceof IDBTransaction&&function lt(ae){if(B.has(ae))return;const X=new Promise((Ae,ht)=>{const Et=()=>{ae.removeEventListener("complete",Ht),ae.removeEventListener("error",pt),ae.removeEventListener("abort",pt)},Ht=()=>{Ae(),Et()},pt=()=>{ht(ae.error||new DOMException("AbortError","AbortError")),Et()};ae.addEventListener("complete",Ht),ae.addEventListener("error",pt),ae.addEventListener("abort",pt)});B.set(ae,X)}(ae),ie(ae,function ve(){return se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ae,he):ae)}function Re(ae){if(ae instanceof IDBRequest)return function Ze(ae){const X=new Promise((Ae,ht)=>{const Et=()=>{ae.removeEventListener("success",Ht),ae.removeEventListener("error",pt)},Ht=()=>{Ae(Re(ae.result)),Et()},pt=()=>{ht(ae.error),Et()};ae.addEventListener("success",Ht),ae.addEventListener("error",pt)});return X.then(Ae=>{Ae instanceof IDBCursor&&j.set(Ae,ae)}).catch(()=>{}),Ie.set(X,ae),X}(ae);if(He.has(ae))return He.get(ae);const X=Ue(ae);return X!==ae&&(He.set(ae,X),Ie.set(X,ae)),X}const _e=ae=>Ie.get(ae),Ne=["get","getKey","getAll","getAllKeys","count"],nt=["put","add","delete","clear"],ne=new Map;function Tt(ae,X){if(!(ae instanceof IDBDatabase)||X in ae||"string"!=typeof X)return;if(ne.get(X))return ne.get(X);const Ae=X.replace(/FromIndex$/,""),ht=X!==Ae,Et=nt.includes(Ae);if(!(Ae in(ht?IDBIndex:IDBObjectStore).prototype)||!Et&&!Ne.includes(Ae))return;const Ht=function(){var pt=(0,f.Z)(function*(en,...Jt){const or=this.transaction(en,Et?"readwrite":"readonly");let zn=or.store;return ht&&(zn=zn.index(Jt.shift())),(yield Promise.all([zn[Ae](...Jt),Et&&or.done]))[0]});return function(Jt){return pt.apply(this,arguments)}}();return ne.set(X,Ht),Ht}!function Me(ae){he=ae(he)}(ae=>({...ae,get:(X,Ae,ht)=>Tt(X,Ae)||ae.get(X,Ae,ht),has:(X,Ae)=>!!Tt(X,Ae)||ae.has(X,Ae)}));class Xe{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Ae=>{if(function zt(ae){return"VERSION"===ae.getComponent()?.type}(Ae)){const ht=Ae.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(Ae=>Ae).join(" ")}}const ot="@firebase/app",fe=new O.Yd("@firebase/app"),$r="[DEFAULT]",Wi={[ot]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xt=new Map,rn=new Map;function rt(ae,X){try{ae.container.addComponent(X)}catch(Ae){fe.debug(`Component ${X.name} failed to register with FirebaseApp ${ae.name}`,Ae)}}function Nt(ae,X){ae.container.addOrOverwriteComponent(X)}function di(ae){const X=ae.name;if(rn.has(X))return fe.debug(`There were multiple attempts to register component ${X}.`),!1;rn.set(X,ae);for(const Ae of Xt.values())rt(Ae,ae);return!0}function ei(ae,X){const Ae=ae.container.getProvider("heartbeat").getImmediate({optional:!0});return Ae&&Ae.triggerHeartbeat(),ae.container.getProvider(X)}function sr(ae,X,Ae=$r){ei(ae,X).clearInstance(Ae)}function Hr(){rn.clear()}const ti=new re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class pn{constructor(X,Ae,ht){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Ae),this._name=Ae.name,this._automaticDataCollectionEnabled=Ae.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}}const As="9.22.0";function Kt(ae,X={}){let Ae=ae;"object"!=typeof X&&(X={name:X});const ht=Object.assign({name:$r,automaticDataCollectionEnabled:!1},X),Et=ht.name;if("string"!=typeof Et||!Et)throw ti.create("bad-app-name",{appName:String(Et)});if(Ae||(Ae=(0,re.aH)()),!Ae)throw ti.create("no-options");const Ht=Xt.get(Et);if(Ht){if((0,re.vZ)(Ae,Ht.options)&&(0,re.vZ)(ht,Ht.config))return Ht;throw ti.create("duplicate-app",{appName:Et})}const pt=new Y.H0(Et);for(const Jt of rn.values())pt.addComponent(Jt);const en=new pn(Ae,ht,pt);return Xt.set(Et,en),en}function Zi(ae=$r){const X=Xt.get(ae);if(!X&&ae===$r&&(0,re.aH)())return Kt();if(!X)throw ti.create("no-app",{appName:ae});return X}function sn(){return Array.from(Xt.values())}function hi(ae){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*(ae){const X=ae.name;Xt.has(X)&&(Xt.delete(X),yield Promise.all(ae.container.getProviders().map(Ae=>Ae.delete())),ae.isDeleted=!0)})).apply(this,arguments)}function Gn(ae,X,Ae){var ht;let Et=null!==(ht=Wi[ae])&&void 0!==ht?ht:ae;Ae&&(Et+=`-${Ae}`);const Ht=Et.match(/\s|\//),pt=X.match(/\s|\//);if(Ht||pt){const en=[`Unable to register library "${Et}" with version "${X}":`];return Ht&&en.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),Ht&&pt&&en.push("and"),pt&&en.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void fe.warn(en.join(" "))}di(new Y.wA(`${Et}-version`,()=>({library:Et,version:X}),"VERSION"))}function Ri(ae,X){if(null!==ae&&"function"!=typeof ae)throw ti.create("invalid-log-argument");(0,O.Am)(ae,X)}function En(ae){(0,O.Ub)(ae)}const Ni="firebase-heartbeat-database",Gr=1,U="firebase-heartbeat-store";let L=null;function z(){return L||(L=function we(ae,X,{blocked:Ae,upgrade:ht,blocking:Et,terminated:Ht}={}){const pt=indexedDB.open(ae,X),en=Re(pt);return ht&&pt.addEventListener("upgradeneeded",Jt=>{ht(Re(pt.result),Jt.oldVersion,Jt.newVersion,Re(pt.transaction),Jt)}),Ae&&pt.addEventListener("blocked",Jt=>Ae(Jt.oldVersion,Jt.newVersion,Jt)),en.then(Jt=>{Ht&&Jt.addEventListener("close",()=>Ht()),Et&&Jt.addEventListener("versionchange",or=>Et(or.oldVersion,or.newVersion,or))}).catch(()=>{}),en}(Ni,Gr,{upgrade:(ae,X)=>{0===X&&ae.createObjectStore(U)}}).catch(ae=>{throw ti.create("idb-open",{originalErrorMessage:ae.message})})),L}function Q(){return(Q=(0,f.Z)(function*(ae){try{return yield(yield z()).transaction(U).objectStore(U).get(Qt(ae))}catch(X){if(X instanceof re.ZR)fe.warn(X.message);else{const Ae=ti.create("idb-get",{originalErrorMessage:X?.message});fe.warn(Ae.message)}}})).apply(this,arguments)}function Oe(ae,X){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(ae,X){try{const ht=(yield z()).transaction(U,"readwrite");yield ht.objectStore(U).put(X,Qt(ae)),yield ht.done}catch(Ae){if(Ae instanceof re.ZR)fe.warn(Ae.message);else{const ht=ti.create("idb-set",{originalErrorMessage:Ae?.message});fe.warn(ht.message)}}})).apply(this,arguments)}function Qt(ae){return`${ae.name}!${ae.options.appId}`}class an{constructor(X){this.container=X,this._heartbeatsCache=null;const Ae=this.container.getProvider("app").getImmediate();this._storage=new Pi(Ae),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var X=this;return(0,f.Z)(function*(){const ht=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=qt();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==Et&&!X._heartbeatsCache.heartbeats.some(Ht=>Ht.date===Et))return X._heartbeatsCache.heartbeats.push({date:Et,agent:ht}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Ht=>{const pt=new Date(Ht.date).valueOf();return Date.now()-pt<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,f.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Ae=qt(),{heartbeatsToSend:ht,unsentEntries:Et}=function Tr(ae,X=1024){const Ae=[];let ht=ae.slice();for(const Et of ae){const Ht=Ae.find(pt=>pt.agent===Et.agent);if(Ht){if(Ht.dates.push(Et.date),Ki(Ae)>X){Ht.dates.pop();break}}else if(Ae.push({agent:Et.agent,dates:[Et.date]}),Ki(Ae)>X){Ae.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:Ae,unsentEntries:ht}}(X._heartbeatsCache.heartbeats),Ht=(0,re.L)(JSON.stringify({version:2,heartbeats:ht}));return X._heartbeatsCache.lastSentHeartbeatDate=Ae,Et.length>0?(X._heartbeatsCache.heartbeats=Et,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Ht})()}}function qt(){return(new Date).toISOString().substring(0,10)}class Pi{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,re.hl)()&&(0,re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,f.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function ge(ae){return Q.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Ae=this;return(0,f.Z)(function*(){var ht;if(yield Ae._canUseIndexedDBPromise){const Ht=yield Ae.read();return Oe(Ae.app,{lastSentHeartbeatDate:null!==(ht=X.lastSentHeartbeatDate)&&void 0!==ht?ht:Ht.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Ae=this;return(0,f.Z)(function*(){var ht;if(yield Ae._canUseIndexedDBPromise){const Ht=yield Ae.read();return Oe(Ae.app,{lastSentHeartbeatDate:null!==(ht=X.lastSentHeartbeatDate)&&void 0!==ht?ht:Ht.lastSentHeartbeatDate,heartbeats:[...Ht.heartbeats,...X.heartbeats]})}})()}}function Ki(ae){return(0,re.L)(JSON.stringify({version:2,heartbeats:ae})).length}!function Da(ae){di(new Y.wA("platform-logger",X=>new Xe(X),"PRIVATE")),di(new Y.wA("heartbeat",X=>new an(X),"PRIVATE")),Gn(ot,"0.9.10",ae),Gn(ot,"0.9.10","esm2017"),Gn("fire-js","")}("")},4859:(mt,Ce,k)=>{k.d(Ce,{H0:()=>ve,wA:()=>O});var f=k(5861),Y=k(2090);class O{constructor(j,B,q){this.name=j,this.instanceFactory=B,this.type=q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const re="[DEFAULT]";class ie{constructor(j,B){this.name=j,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const B=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(B)){const q=new Y.BH;if(this.instancesDeferred.set(B,q),this.isInitialized(B)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:B});He&&q.resolve(He)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(j){var B;const q=this.normalizeInstanceIdentifier(j?.identifier),He=null!==(B=j?.optional)&&void 0!==B&&B;if(!this.isInitialized(q)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:q})}catch(Ie){if(He)return null;throw Ie}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function pe(ce){return"EAGER"===ce.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:re})}catch{}for(const[B,q]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(B);try{const Ie=this.getOrInitializeService({instanceIdentifier:He});q.resolve(Ie)}catch{}}}}clearInstance(j=re){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,f.Z)(function*(){const B=Array.from(j.instances.values());yield Promise.all([...B.filter(q=>"INTERNAL"in q).map(q=>q.INTERNAL.delete()),...B.filter(q=>"_delete"in q).map(q=>q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=re){return this.instances.has(j)}getOptions(j=re){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:B={}}=j,q=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(q))throw Error(`${this.name}(${q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:q,options:B});for(const[Ie,Ze]of this.instancesDeferred.entries())q===this.normalizeInstanceIdentifier(Ie)&&Ze.resolve(He);return He}onInit(j,B){var q;const He=this.normalizeInstanceIdentifier(B),Ie=null!==(q=this.onInitCallbacks.get(He))&&void 0!==q?q:new Set;Ie.add(j),this.onInitCallbacks.set(He,Ie);const Ze=this.instances.get(He);return Ze&&j(Ze,He),()=>{Ie.delete(j)}}invokeOnInitCallbacks(j,B){const q=this.onInitCallbacks.get(B);if(q)for(const He of q)try{He(j,B)}catch{}}getOrInitializeService({instanceIdentifier:j,options:B={}}){let q=this.instances.get(j);if(!q&&this.component&&(q=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=j,ce===re?void 0:ce),options:B}),this.instances.set(j,q),this.instancesOptions.set(j,B),this.invokeOnInitCallbacks(q,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,q)}catch{}var ce;return q||null}normalizeInstanceIdentifier(j=re){return this.component?this.component.multipleInstances?j:re:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const B=this.getProvider(j.name);if(B.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);B.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const B=new ie(j,this);return this.providers.set(j,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(mt,Ce,k)=>{k.d(Ce,{Am:()=>ce,Ub:()=>ve,Yd:()=>pe,in:()=>Y});const f=[];var Y=(()=>{return(j=Y||(Y={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Y;var j})();const O={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},re=Y.INFO,ie={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},se=(j,B,...q)=>{if(B<j.logLevel)return;const He=(new Date).toISOString(),Ie=ie[B];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ie](`[${He}]  ${j.name}:`,...q)};class pe{constructor(B){this.name=B,this._logLevel=re,this._logHandler=se,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in Y))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...B),this._logHandler(this,Y.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...B),this._logHandler(this,Y.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...B),this._logHandler(this,Y.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...B),this._logHandler(this,Y.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...B),this._logHandler(this,Y.ERROR,...B)}}function ve(j){f.forEach(B=>{B.setLogLevel(j)})}function ce(j,B){for(const q of f){let He=null;B&&B.level&&(He=O[B.level]),q.userLogHandler=null===j?null:(Ie,Ze,...lt)=>{const he=lt.map(Me=>{if(null==Me)return null;if("string"==typeof Me)return Me;if("number"==typeof Me||"boolean"==typeof Me)return Me.toString();if(Me instanceof Error)return Me.message;try{return JSON.stringify(Me)}catch{return null}}).filter(Me=>Me).join(" ");Ze>=(He??Ie.logLevel)&&j({level:Y[Ze].toLowerCase(),message:he,args:lt,type:Ie.name})}}}},259:(mt,Ce,k)=>{k.d(Ce,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=k(6881);(0,f.registerVersion)("firebase","9.22.0","app")},9260:(mt,Ce,k)=>{k.d(Ce,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.22.0","app-compat")},2644:(mt,Ce,k)=>{k.r(Ce);var f=k(5861),Y=k(3942),O=k(2090),re=k(6881),ie=k(655),se=k(1877),pe=k(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},q_EMAIL_SIGNIN="EMAIL_SIGNIN",q_PASSWORD_RESET="PASSWORD_RESET",q_RECOVER_EMAIL="RECOVER_EMAIL",q_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",q_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",q_VERIFY_EMAIL="VERIFY_EMAIL";const Ze=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},lt=function Ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},he=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new se.Yd("@firebase/auth");function Re(y,...h){xe.logLevel<=se.in.ERROR&&xe.error(`Auth (${re.SDK_VERSION}): ${y}`,...h)}function _e(y,...h){throw nt(y,...h)}function we(y,...h){return nt(y,...h)}function Ge(y,h,p){const _=Object.assign(Object.assign({},lt()),{[h]:p});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Ne(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&_e(y,"argument-error"),Ge(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return he.create(y,...h)}function ne(y,h,...p){if(!y)throw nt(h,...p)}function Tt(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Re(h),new Error(h)}function Xe(y,h){y||Tt(h)}function zt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ot(){return"http:"===le()||"https:"===le()}function le(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class be{constructor(h,p){this.shortDelay=h,this.longDelay=p,Xe(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function fe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ot()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ze(y,h){Xe(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class Be{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Tt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Tt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Tt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const dt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},at=new be(3e4,6e4);function Ot(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Ye(y,h,p,_){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,f.Z)(function*(y,h,p,_,T={}){return Ct(y,T,(0,f.Z)(function*(){let x={},V={};_&&("GET"===h?V=_:x={body:JSON.stringify(_)});const Z=(0,O.xO)(Object.assign({key:y.config.apiKey},V)).slice(1),Te=yield y._getAdditionalHeaders();return Te["Content-Type"]="application/json",y.languageCode&&(Te["X-Firebase-Locale"]=y.languageCode),Be.fetch()(Dr(y,y.config.apiHost,p,Z),Object.assign({method:h,headers:Te,referrerPolicy:"no-referrer"},x))}))})).apply(this,arguments)}function Ct(y,h,p){return nn.apply(this,arguments)}function nn(){return(nn=(0,f.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},dt),h);try{const T=new jr(y),x=yield Promise.race([p(),T.promise]);T.clearNetworkTimeout();const V=yield x.json();if("needConfirmation"in V)throw Cr(y,"account-exists-with-different-credential",V);if(x.ok&&!("errorMessage"in V))return V;{const Z=x.ok?V.errorMessage:V.error.message,[Te,$e]=Z.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Te)throw Cr(y,"credential-already-in-use",V);if("EMAIL_EXISTS"===Te)throw Cr(y,"email-already-in-use",V);if("USER_DISABLED"===Te)throw Cr(y,"user-disabled",V);const Je=_[Te]||Te.toLowerCase().replace(/[_\s]+/g,"-");if($e)throw Ge(y,Je,$e);_e(y,Je)}}catch(T){if(T instanceof O.ZR)throw T;_e(y,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function yn(y,h,p,_){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,f.Z)(function*(y,h,p,_,T={}){const x=yield Ye(y,h,p,_,T);return"mfaPendingCredential"in x&&_e(y,"multi-factor-auth-required",{_serverResponse:x}),x})).apply(this,arguments)}function Dr(y,h,p,_){const T=`${h}${p}?${_}`;return y.config.emulator?ze(y.config,T):`${y.config.apiScheme}://${T}`}class jr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(we(this.auth,"network-request-failed")),at.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cr(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const T=we(y,h,_);return T.customData._tokenResponse=p,T}function li(){return(li=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ft(){return(ft=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Xr(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function $r(){return($r=(0,f.Z)(function*(y,h=!1){const p=(0,O.m9)(y),_=yield p.getIdToken(h),T=Xt(_);ne(T&&T.exp&&T.auth_time&&T.iat,p.auth,"internal-error");const x="object"==typeof T.firebase?T.firebase:void 0,V=x?.sign_in_provider;return{claims:T,token:_,authTime:Xr(Wi(T.auth_time)),issuedAtTime:Xr(Wi(T.iat)),expirationTime:Xr(Wi(T.exp)),signInProvider:V||null,signInSecondFactor:x?.sign_in_second_factor||null}})).apply(this,arguments)}function Wi(y){return 1e3*Number(y)}function Xt(y){const[h,p,_]=y.split(".");if(void 0===h||void 0===p||void 0===_)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,O.tV)(p);return T?JSON.parse(T):(Re("Failed to decode base64 JWT payload"),null)}catch(T){return Re("Caught error parsing JWT payload as JSON",T?.toString()),null}}function rt(y,h){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,f.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&function di({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}class ei{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class sr{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Hr(y){return An.apply(this,arguments)}function An(){return An=(0,f.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),T=yield rt(y,function br(y,h){return ft.apply(this,arguments)}(p,{idToken:_}));ne(T?.users.length,p,"internal-error");const x=T.users[0];y._notifyReloadListener(x);const V=null!==(h=x.providerUserInfo)&&void 0!==h&&h.length?function Kt(y){return y.map(h=>{var{providerId:p}=h,_=(0,ie._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(x.providerUserInfo):[],Z=function As(y,h){return[...y.filter(_=>!h.some(T=>T.providerId===_.providerId)),...h]}(y.providerData,V),Je=!!y.isAnonymous&&!(y.email&&x.passwordHash||Z?.length),tt={uid:x.localId,displayName:x.displayName||null,photoURL:x.photoUrl||null,email:x.email||null,emailVerified:x.emailVerified||!1,phoneNumber:x.phoneNumber||null,tenantId:x.tenantId||null,providerData:Z,metadata:new sr(x.createdAt,x.lastLoginAt),isAnonymous:Je};Object.assign(y,tt)}),An.apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(y){const h=(0,O.m9)(y);yield Hr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function sn(){return(sn=(0,f.Z)(function*(y,h){const p=yield Ct(y,{},(0,f.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:x}=y.config,V=Dr(y,T,"/v1/token",`key=${x}`),Z=yield y._getAdditionalHeaders();return Z["Content-Type"]="application/x-www-form-urlencoded",Be.fetch()(V,{method:"POST",headers:Z,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class hi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ne(h.idToken,"internal-error"),ne(typeof h.idToken<"u","internal-error"),ne(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function rn(y){const h=Xt(y);return ne(h,"internal-error"),ne(typeof h.exp<"u","internal-error"),ne(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,f.Z)(function*(){return ne(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:x,expiresIn:V}=yield function Zi(y,h){return sn.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(T,x,Number(V))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:T,expirationTime:x}=p,V=new hi;return _&&(ne("string"==typeof _,"internal-error",{appName:h}),V.refreshToken=_),T&&(ne("string"==typeof T,"internal-error",{appName:h}),V.accessToken=T),x&&(ne("number"==typeof x,"internal-error",{appName:h}),V.expirationTime=x),V}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new hi,this.toJSON())}_performRefresh(){return Tt("not implemented")}}function Nn(y,h){ne("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class Gn{constructor(h){var{uid:p,auth:_,stsTokenManager:T}=h,x=(0,ie._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ei(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=x.displayName||null,this.email=x.email||null,this.emailVerified=x.emailVerified||!1,this.phoneNumber=x.phoneNumber||null,this.photoURL=x.photoURL||null,this.isAnonymous=x.isAnonymous||!1,this.tenantId=x.tenantId||null,this.providerData=x.providerData?[...x.providerData]:[],this.metadata=new sr(x.createdAt||void 0,x.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,f.Z)(function*(){const _=yield rt(p,p.stsTokenManager.getToken(p.auth,h));return ne(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function gr(y){return $r.apply(this,arguments)}(this,h)}reload(){return function ti(y){return pn.apply(this,arguments)}(this)}_assign(h){this!==h&&(ne(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const p=new Gn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return p.metadata._copy(this.metadata),p}_onReload(h){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),T=!0),p&&(yield Hr(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,f.Z)(function*(){const p=yield h.getIdToken();return yield rt(h,function Ss(y,h){return li.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,T,x,V,Z,Te,$e,Je;const tt=null!==(_=p.displayName)&&void 0!==_?_:void 0,Sn=null!==(T=p.email)&&void 0!==T?T:void 0,$s=null!==(x=p.phoneNumber)&&void 0!==x?x:void 0,Il=null!==(V=p.photoURL)&&void 0!==V?V:void 0,Jy=null!==(Z=p.tenantId)&&void 0!==Z?Z:void 0,Mn=null!==(Te=p._redirectEventId)&&void 0!==Te?Te:void 0,Rg=null!==($e=p.createdAt)&&void 0!==$e?$e:void 0,Ng=null!==(Je=p.lastLoginAt)&&void 0!==Je?Je:void 0,{uid:Wd,emailVerified:Dl,isAnonymous:$i,providerData:Zd,stsTokenManager:hc}=p;ne(Wd&&hc,h,"internal-error");const Xy=hi.fromJSON(this.name,hc);ne("string"==typeof Wd,h,"internal-error"),Nn(tt,h.name),Nn(Sn,h.name),ne("boolean"==typeof Dl,h,"internal-error"),ne("boolean"==typeof $i,h,"internal-error"),Nn($s,h.name),Nn(Il,h.name),Nn(Jy,h.name),Nn(Mn,h.name),Nn(Rg,h.name),Nn(Ng,h.name);const Kd=new Gn({uid:Wd,auth:h,email:Sn,emailVerified:Dl,displayName:tt,isAnonymous:$i,photoURL:Il,phoneNumber:$s,tenantId:Jy,stsTokenManager:Xy,createdAt:Rg,lastLoginAt:Ng});return Zd&&Array.isArray(Zd)&&(Kd.providerData=Zd.map(ev=>Object.assign({},ev))),Mn&&(Kd._redirectEventId=Mn),Kd}static _fromIdTokenResponse(h,p,_=!1){return(0,f.Z)(function*(){const T=new hi;T.updateFromServerResponse(p);const x=new Gn({uid:p.localId,auth:h,stsTokenManager:T,isAnonymous:_});return yield Hr(x),x})()}}const Ri=new Map;function En(y){Xe(y instanceof Function,"Expected a class definition");let h=Ri.get(y);return h?(Xe(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,Ri.set(y,h),h)}const Gr=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(p,_){var T=this;return(0,f.Z)(function*(){T.storage[p]=_})()}_get(p){var _=this;return(0,f.Z)(function*(){const T=_.storage[p];return void 0===T?null:T})()}_remove(p){var _=this;return(0,f.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function U(y,h,p){return`firebase:${y}:${h}:${p}`}class L{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:T,name:x}=this.auth;this.fullUserKey=U(this.userKey,T.apiKey,x),this.fullPersistenceKey=U("persistence",T.apiKey,x),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Gn._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,f.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,f.Z)(function*(){if(!p.length)return new L(En(Gr),h,_);const T=(yield Promise.all(p.map(function(){var $e=(0,f.Z)(function*(Je){if(yield Je._isAvailable())return Je});return function(Je){return $e.apply(this,arguments)}}()))).filter($e=>$e);let x=T[0]||En(Gr);const V=U(_,h.config.apiKey,h.name);let Z=null;for(const $e of p)try{const Je=yield $e._get(V);if(Je){const tt=Gn._fromJSON(h,Je);$e!==x&&(Z=tt),x=$e;break}}catch{}const Te=T.filter($e=>$e._shouldAllowMigration);return x._shouldAllowMigration&&Te.length?(x=Te[0],Z&&(yield x._set(V,Z.toJSON())),yield Promise.all(p.map(function(){var $e=(0,f.Z)(function*(Je){if(Je!==x)try{yield Je._remove(V)}catch{}});return function(Je){return $e.apply(this,arguments)}}())),new L(x,h,_)):new L(x,h,_)})()}}function z(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(St(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ge(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ln(h))return"Blackberry";if(Cn(h))return"Webos";if(Q(h))return"Safari";if((h.includes("chrome/")||Oe(h))&&!h.includes("edge/"))return"Chrome";if(Qt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function ge(y=(0,O.z$)()){return/firefox\//i.test(y)}function Q(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function Oe(y=(0,O.z$)()){return/crios\//i.test(y)}function St(y=(0,O.z$)()){return/iemobile/i.test(y)}function Qt(y=(0,O.z$)()){return/android/i.test(y)}function Ln(y=(0,O.z$)()){return/blackberry/i.test(y)}function Cn(y=(0,O.z$)()){return/webos/i.test(y)}function an(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ki(y=(0,O.z$)()){return an(y)||Qt(y)||Cn(y)||Ln(y)||/windows phone/i.test(y)||St(y)}function ae(y,h=[]){let p;switch(y){case"Browser":p=z((0,O.z$)());break;case"Worker":p=`${z((0,O.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${re.SDK_VERSION}/${_}`}function Ae(){return(Ae=(0,f.Z)(function*(y){return(yield Ye(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ht(y,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,f.Z)(function*(y,h){return Ye(y,"GET","/v2/recaptchaConfig",Ot(y,h))})).apply(this,arguments)}function Ht(y){return void 0!==y&&void 0!==y.getResponse}function pt(y){return void 0!==y&&void 0!==y.enterprise}class en{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(p=>"EMAIL_PASSWORD_PROVIDER"===p.provider&&"OFF"!==p.enforcementState)}}function or(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=T=>{const x=we("internal-error");x.customData=T,p(x)},_.type="text/javascript",_.charset="UTF-8",function Jt(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function zn(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Uo="NO_RECAPTCHA";class fi{constructor(h){this.type="recaptcha-enterprise",this.auth=hn(h)}verify(h="verify",p=!1){var _=this;return(0,f.Z)(function*(){function x(){return x=(0,f.Z)(function*(Z){if(!p){if(null==Z.tenantId&&null!=Z._agentRecaptchaConfig)return Z._agentRecaptchaConfig.siteKey;if(null!=Z.tenantId&&void 0!==Z._tenantRecaptchaConfigs[Z.tenantId])return Z._tenantRecaptchaConfigs[Z.tenantId].siteKey}return new Promise(function(){var Te=(0,f.Z)(function*($e,Je){ht(Z,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(tt=>{if(void 0!==tt.recaptchaKey){const Sn=new en(tt);return null==Z.tenantId?Z._agentRecaptchaConfig=Sn:Z._tenantRecaptchaConfigs[Z.tenantId]=Sn,$e(Sn.siteKey)}Je(new Error("recaptcha Enterprise site key undefined"))}).catch(tt=>{Je(tt)})});return function($e,Je){return Te.apply(this,arguments)}}())}),x.apply(this,arguments)}function V(Z,Te,$e){const Je=window.grecaptcha;pt(Je)?Je.enterprise.ready(()=>{Je.enterprise.execute(Z,{action:h}).then(tt=>{Te(tt)}).catch(()=>{Te(Uo)})}):$e(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Z,Te)=>{(function T(Z){return x.apply(this,arguments)})(_.auth).then($e=>{if(!p&&pt(window.grecaptcha))V($e,Z,Te);else{if(typeof window>"u")return void Te(new Error("RecaptchaVerifier is only supported in browser"));or("https://www.google.com/recaptcha/enterprise.js?render="+$e).then(()=>{V($e,Z,Te)}).catch(Je=>{Te(Je)})}}).catch($e=>{Te($e)})})})()}}function We(y,h,p){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,f.Z)(function*(y,h,p,_=!1){const T=new fi(y);let x;try{x=yield T.verify(p)}catch{x=yield T.verify(p,!0)}const V=Object.assign({},h);return Object.assign(V,_?{captchaResp:x}:{captchaResponse:x}),Object.assign(V,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(V,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),V})).apply(this,arguments)}class In{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=x=>new Promise((V,Z)=>{try{V(h(x))}catch(Te){Z(Te)}});_.onAbort=p,this.queue.push(_);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,f.Z)(function*(){if(p.auth.currentUser===h)return;const _=[];try{for(const T of p.queue)yield T(h),T.onAbort&&_.push(T.onAbort)}catch(T){_.reverse();for(const x of _)try{x()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:T?.message})}})()}}class pi{constructor(h,p,_,T){this.app=h,this.heartbeatServiceProvider=p,this.appCheckServiceProvider=_,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qn(this),this.idTokenSubscription=new qn(this),this.beforeStateQueue=new In(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=he,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=En(p)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,x;if(!_._deleted&&(_.persistenceManager=yield L.create(_,h),!_._deleted)){if(null!==(T=_._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(x=_.currentUser)||void 0===x?void 0:x.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,f.Z)(function*(){var _;const T=yield p.assertedPersistence.getCurrentUser();let x=T,V=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const Z=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Te=x?._redirectEventId,$e=yield p.tryRedirectSignIn(h);(!Z||Z===Te)&&$e?.user&&(x=$e.user,V=!0)}if(!x)return p.directlySetCurrentUser(null);if(!x._redirectEventId){if(V)try{yield p.beforeStateQueue.runMiddleware(x)}catch(Z){x=T,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(Z))}return x?p.reloadAndSetCurrentUserOrClear(x):p.directlySetCurrentUser(null)}return ne(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===x._redirectEventId?p.directlySetCurrentUser(x):p.reloadAndSetCurrentUserOrClear(x)})()}tryRedirectSignIn(h){var p=this;return(0,f.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,f.Z)(function*(){try{yield Hr(h)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ee(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,f.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&ne(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,f.Z)(function*(){if(!_._deleted)return h&&ne(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,f.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,f.Z)(function*(){yield p.assertedPersistence.setPersistence(En(h))}))}initializeRecaptchaConfig(){var h=this;return(0,f.Z)(function*(){const p=yield ht(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),_=new en(p);null==h.tenantId?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,_.emailPasswordEnabled&&new fi(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,f.Z)(function*(){const T=yield _.getOrInitRedirectPersistenceManager(p);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,f.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&En(h)||p._popupRedirectResolver;ne(_,p,"argument-error"),p.redirectPersistenceManager=yield L.create(p,[En(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,f.Z)(function*(){var _,T;return p._isInitialized&&(yield p.queue((0,f.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(T=p.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,f.Z)(function*(){if(h===p.currentUser)return p.queue((0,f.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,T){if(this._deleted)return()=>{};const x="function"==typeof p?p:p.next.bind(p),V=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(V,this,"internal-error"),V.then(()=>x(this.currentUser)),"function"==typeof p?h.addObserver(p,_,T):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,f.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();T&&(_["X-Firebase-Client"]=T);const x=yield h._getAppCheckToken();return x&&(_["X-Firebase-AppCheck"]=x),_})()}_getAppCheckToken(){var h=this;return(0,f.Z)(function*(){var p;const _=yield null===(p=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getToken();return _?.error&&function Ue(y,...h){xe.logLevel<=se.in.WARN&&xe.warn(`Auth (${re.SDK_VERSION}): ${y}`,...h)}(`Error while retrieving App Check token: ${_.error}`),_?.token})()}}function hn(y){return(0,O.m9)(y)}class qn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ss(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function ba(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class os{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return Tt("not implemented")}_getIdTokenResponse(h){return Tt("not implemented")}_linkToIdToken(h,p){return Tt("not implemented")}_getReauthenticationResolver(h){return Tt("not implemented")}}function Qs(y,h){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:resetPassword",Ot(y,h))})).apply(this,arguments)}function Bo(y,h){return as.apply(this,arguments)}function as(){return(as=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function jo(){return(jo=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:update",Ot(y,h))})).apply(this,arguments)}function mr(y,h){return vn.apply(this,arguments)}function vn(){return(vn=(0,f.Z)(function*(y,h){return yn(y,"POST","/v1/accounts:signInWithPassword",Ot(y,h))})).apply(this,arguments)}function ni(y,h){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:sendOobCode",Ot(y,h))})).apply(this,arguments)}function $o(){return($o=(0,f.Z)(function*(y,h){return ni(y,h)})).apply(this,arguments)}function Ms(y,h){return Js.apply(this,arguments)}function Js(){return(Js=(0,f.Z)(function*(y,h){return ni(y,h)})).apply(this,arguments)}function ar(y,h){return mu.apply(this,arguments)}function mu(){return(mu=(0,f.Z)(function*(y,h){return ni(y,h)})).apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(y,h){return ni(y,h)})).apply(this,arguments)}function Ho(){return(Ho=(0,f.Z)(function*(y,h){return yn(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}function gi(){return(gi=(0,f.Z)(function*(y,h){return yn(y,"POST","/v1/accounts:signInWithEmailLink",Ot(y,h))})).apply(this,arguments)}class yu extends os{constructor(h,p,_,T=null){super("password",_),this._email=h,this._password=p,this._tenantId=T}static _fromEmailAndPassword(h,p){return new yu(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new yu(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,f.Z)(function*(){var _;switch(p.signInMethod){case"password":const T={returnSecureToken:!0,email:p._email,password:p._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=h._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const x=yield We(h,T,"signInWithPassword");return mr(h,x)}return mr(h,T).catch(function(){var x=(0,f.Z)(function*(V){if("auth/missing-recaptcha-token"===V.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Z=yield We(h,T,"signInWithPassword");return mr(h,Z)}return Promise.reject(V)});return function(V){return x.apply(this,arguments)}}());case"emailLink":return function Sa(y,h){return Ho.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:_e(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,f.Z)(function*(){switch(_.signInMethod){case"password":return Bo(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Fc(y,h){return gi.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:_e(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Oi(y,h){return cd.apply(this,arguments)}function cd(){return(cd=(0,f.Z)(function*(y,h){return yn(y,"POST","/v1/accounts:signInWithIdp",Ot(y,h))})).apply(this,arguments)}class us extends os{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new us(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):_e("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T}=p,x=(0,ie._T)(p,["providerId","signInMethod"]);if(!_||!T)return null;const V=new us(_,T);return V.idToken=x.idToken||void 0,V.accessToken=x.accessToken||void 0,V.secret=x.secret,V.nonce=x.nonce,V.pendingToken=x.pendingToken||null,V}_getIdTokenResponse(h){return Oi(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Oi(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Oi(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function Lc(){return(Lc=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:sendVerificationCode",Ot(y,h))})).apply(this,arguments)}function ld(){return(ld=(0,f.Z)(function*(y,h){return yn(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h))})).apply(this,arguments)}function vu(){return(vu=(0,f.Z)(function*(y,h){const p=yield yn(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,h));if(p.temporaryProof)throw Cr(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const dd={USER_NOT_FOUND:"user-not-found"};function _u(){return(_u=(0,f.Z)(function*(y,h){return yn(y,"POST","/v1/accounts:signInWithPhoneNumber",Ot(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),dd)})).apply(this,arguments)}class mi extends os{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new mi({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new mi({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function hg(y,h){return ld.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function fg(y,h){return vu.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ky(y,h){return _u.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:T}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:x}=h;return _||p||T||x?new mi({verificationId:p,verificationCode:_,phoneNumber:T,temporaryProof:x}):null}}class Go{constructor(h){var p,_,T,x,V,Z;const Te=(0,O.zd)((0,O.pd)(h)),$e=null!==(p=Te.apiKey)&&void 0!==p?p:null,Je=null!==(_=Te.oobCode)&&void 0!==_?_:null,tt=function $h(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Te.mode)&&void 0!==T?T:null);ne($e&&Je&&tt,"argument-error"),this.apiKey=$e,this.operation=tt,this.code=Je,this.continueUrl=null!==(x=Te.continueUrl)&&void 0!==x?x:null,this.languageCode=null!==(V=Te.languageCode)&&void 0!==V?V:null,this.tenantId=null!==(Z=Te.tenantId)&&void 0!==Z?Z:null}static parseLink(h){const p=function hd(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||p||h||y}(h);try{return new Go(p)}catch{return null}}}let Hh=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return yu._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const T=Go.parseLink(_);return ne(T,"argument-error"),yu._fromEmailAndCode(p,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class cs{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Qi extends cs{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Xs extends Qi{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return ne("providerId"in p&&"signInMethod"in p,"argument-error"),us._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ne(h.idToken||h.accessToken,"argument-error"),us._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Xs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Xs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:x,nonce:V,providerId:Z}=h;if(!_&&!T&&!p&&!x||!Z)return null;try{return new Xs(Z)._credential({idToken:p,accessToken:_,nonce:V,pendingToken:x})}catch{return null}}}let Vc=(()=>{class y extends Qi{constructor(){super("facebook.com")}static credential(p){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Aa=(()=>{class y extends Qi{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:T}=p;if(!_&&!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),fd=(()=>{class y extends Qi{constructor(){super("github.com")}static credential(p){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class xs extends os{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return Oi(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,Oi(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,Oi(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T,pendingToken:x}=p;return _&&T&&x&&_===T?new xs(_,x):null}static _create(h,p){return new xs(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wu extends cs{constructor(h){ne(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return wu.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return wu.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=xs.fromJSON(h);return ne(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return xs._create(_,p)}catch{return null}}}let Eu=(()=>{class y extends Qi{constructor(){super("twitter.com")}static credential(p,_){return us._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=p;if(!_||!T)return null;try{return y.credential(_,T)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Rs(y,h){return zr.apply(this,arguments)}function zr(){return(zr=(0,f.Z)(function*(y,h){return yn(y,"POST","/v1/accounts:signUp",Ot(y,h))})).apply(this,arguments)}class Sr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,T=!1){return(0,f.Z)(function*(){const x=yield Gn._fromIdTokenResponse(h,_,T),V=Ma(_);return new Sr({user:x,providerId:V,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const T=Ma(_);return new Sr({user:h,providerId:T,_tokenResponse:_,operationType:p})})()}}function Ma(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function zo(){return(zo=(0,f.Z)(function*(y){var h;const p=hn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Sr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield Rs(p,{returnSecureToken:!0}),T=yield Sr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(T.user),T})).apply(this,arguments)}class ls extends O.ZR{constructor(h,p,_,T){var x;super(p.code,p.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,ls.prototype),this.customData={appName:h.name,tenantId:null!==(x=h.tenantId)&&void 0!==x?x:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,T){return new ls(h,p,_,T)}}function cr(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(x=>{throw"auth/multi-factor-auth-required"===x.code?ls._fromErrorAndOperation(y,x,h,_):x})}function pd(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Ar(){return Ar=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y);yield ds(!0,p,h);const{providerUserInfo:_}=yield function Vo(y,h){return Zs.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),T=pd(_||[]);return p.providerData=p.providerData.filter(x=>T.has(x.providerId)),T.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),Ar.apply(this,arguments)}function Xn(y,h){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,f.Z)(function*(y,h,p=!1){const _=yield rt(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Sr._forOperation(y,"link",_)})).apply(this,arguments)}function ds(y,h,p){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,f.Z)(function*(y,h,p){yield Hr(h);const T=!1===y?"provider-already-linked":"no-such-provider";ne(pd(h.providerData).has(p)===y,h.auth,T)})).apply(this,arguments)}function Ns(y,h){return qo.apply(this,arguments)}function qo(){return(qo=(0,f.Z)(function*(y,h,p=!1){const{auth:_}=y,T="reauthenticate";try{const x=yield rt(y,cr(_,T,h,y),p);ne(x.idToken,_,"internal-error");const V=Xt(x.idToken);ne(V,_,"internal-error");const{sub:Z}=V;return ne(y.uid===Z,_,"user-mismatch"),Sr._forOperation(y,T,x)}catch(x){throw"auth/user-not-found"===x?.code&&_e(_,"user-mismatch"),x}})).apply(this,arguments)}function xa(y,h){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(y,h,p=!1){const _="signIn",T=yield cr(y,_,h),x=yield Sr._fromIdTokenResponse(y,_,T);return p||(yield y._updateCurrentUser(x.user)),x})).apply(this,arguments)}function Ra(y,h){return md.apply(this,arguments)}function md(){return(md=(0,f.Z)(function*(y,h){return xa(hn(y),h)})).apply(this,arguments)}function yd(y,h){return Du.apply(this,arguments)}function Du(){return(Du=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y);return yield ds(!1,p,h.providerId),Xn(p,h)})).apply(this,arguments)}function vd(y,h){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,f.Z)(function*(y,h){return Ns((0,O.m9)(y),h)})).apply(this,arguments)}function _d(){return(_d=(0,f.Z)(function*(y,h){return yn(y,"POST","/v1/accounts:signInWithCustomToken",Ot(y,h))})).apply(this,arguments)}function Vt(){return Vt=(0,f.Z)(function*(y,h){const p=hn(y),_=yield function pg(y,h){return _d.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),T=yield Sr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(T.user),T}),Vt.apply(this,arguments)}class bu{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?Tu._fromServerResponse(h,p):"totpInfo"in p?er._fromServerResponse(h,p):_e(h,"internal-error")}}class Tu extends bu{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new Tu(p)}}class er extends bu{constructor(h){super("totp",h)}static _fromServerResponse(h,p){return new er(p)}}function eo(y,h,p){var _;ne((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),ne(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(ne(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(ne(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function qr(){return qr=(0,f.Z)(function*(y,h,p){var _;const T=hn(y),x={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const V=yield We(T,x,"getOobCode",!0);p&&eo(T,V,p),yield Ms(T,V)}else p&&eo(T,x,p),yield Ms(T,x).catch(function(){var V=(0,f.Z)(function*(Z){if("auth/missing-recaptcha-token"!==Z.code)return Promise.reject(Z);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Te=yield We(T,x,"getOobCode",!0);p&&eo(T,Te,p),yield Ms(T,Te)}});return function(Z){return V.apply(this,arguments)}}())}),qr.apply(this,arguments)}function Au(){return(Au=(0,f.Z)(function*(y,h,p){yield Qs((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function hs(){return hs=(0,f.Z)(function*(y,h){yield function Yi(y,h){return jo.apply(this,arguments)}((0,O.m9)(y),{oobCode:h})}),hs.apply(this,arguments)}function Na(y,h){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y),_=yield Qs(p,{oobCode:h}),T=_.requestType;switch(ne(T,p,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(_.mfaInfo,p,"internal-error");default:ne(_.email,p,"internal-error")}let x=null;return _.mfaInfo&&(x=bu._fromServerResponse(hn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:x},operation:T}})).apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(y,h){const{data:p}=yield Na((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function vi(){return vi=(0,f.Z)(function*(y,h,p){var _;const T=hn(y),x={returnSecureToken:!0,email:h,password:p,clientType:"CLIENT_TYPE_WEB"};let V;if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const $e=yield We(T,x,"signUpPassword");V=Rs(T,$e)}else V=Rs(T,x).catch(function(){var $e=(0,f.Z)(function*(Je){if("auth/missing-recaptcha-token"===Je.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const tt=yield We(T,x,"signUpPassword");return Rs(T,tt)}return Promise.reject(Je)});return function(Je){return $e.apply(this,arguments)}}());const Z=yield V.catch($e=>Promise.reject($e)),Te=yield Sr._fromIdTokenResponse(T,"signIn",Z);return yield T._updateCurrentUser(Te.user),Te}),vi.apply(this,arguments)}function Mu(){return Mu=(0,f.Z)(function*(y,h,p){var _;const T=hn(y),x={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function V(Z,Te){ne(Te.handleCodeInApp,T,"argument-error"),Te&&eo(T,Z,Te)}if(null!==(_=T._getRecaptchaConfig())&&void 0!==_&&_.emailPasswordEnabled){const Z=yield We(T,x,"getOobCode",!0);V(Z,p),yield ar(T,Z)}else V(x,p),yield ar(T,x).catch(function(){var Z=(0,f.Z)(function*(Te){if("auth/missing-recaptcha-token"!==Te.code)return Promise.reject(Te);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const $e=yield We(T,x,"getOobCode",!0);V($e,p),yield ar(T,$e)}});return function(Te){return Z.apply(this,arguments)}}())}),Mu.apply(this,arguments)}function Wo(){return(Wo=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y),T=Hh.credentialWithLink(h,p||zt());return ne(T._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Ra(_,T)})).apply(this,arguments)}function xu(){return(xu=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:createAuthUri",Ot(y,h))})).apply(this,arguments)}function Ru(){return Ru=(0,f.Z)(function*(y,h){const _={identifier:h,continueUri:ot()?zt():"http://localhost"},{signinMethods:T}=yield function jc(y,h){return xu.apply(this,arguments)}((0,O.m9)(y),_);return T||[]}),Ru.apply(this,arguments)}function Oa(){return Oa=(0,f.Z)(function*(y,h){const p=(0,O.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&eo(p.auth,T,h);const{email:x}=yield function kc(y,h){return $o.apply(this,arguments)}(p.auth,T);x!==y.email&&(yield y.reload())}),Oa.apply(this,arguments)}function ka(){return ka=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y),x={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&eo(_.auth,x,p);const{email:V}=yield function ri(y,h){return ii.apply(this,arguments)}(_.auth,x);V!==y.email&&(yield y.reload())}),ka.apply(this,arguments)}function Pu(){return(Pu=(0,f.Z)(function*(y,h){return Ye(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ou(){return Ou=(0,f.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,O.m9)(y),x={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},V=yield rt(_,function Dd(y,h){return Pu.apply(this,arguments)}(_.auth,x));_.displayName=V.displayName||null,_.photoURL=V.photoUrl||null;const Z=_.providerData.find(({providerId:Te})=>"password"===Te);Z&&(Z.displayName=_.displayName,Z.photoURL=_.photoURL),yield _._updateTokensIfNecessary(V)}),Ou.apply(this,arguments)}function bn(y,h,p){return ku.apply(this,arguments)}function ku(){return(ku=(0,f.Z)(function*(y,h,p){const{auth:_}=y,x={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(x.email=h),p&&(x.password=p);const V=yield rt(y,Bo(_,x));yield y._updateTokensIfNecessary(V,!0)})).apply(this,arguments)}class no{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class Wh extends no{constructor(h,p,_,T){super(h,p,_),this.username=T}}class Cd extends no{constructor(h,p){super(h,"facebook.com",p)}}class yg extends Wh{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Fu extends no{constructor(h,p){super(h,"google.com",p)}}class Hc extends Wh{constructor(h,p,_){super(h,"twitter.com",p,_)}}function Gc(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function qh(y){var h,p;if(!y)return null;const{providerId:_}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},x=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const V=null===(p=null===(h=Xt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(V)return new no(x,"anonymous"!==V&&"custom"!==V?V:null)}if(!_)return null;switch(_){case"facebook.com":return new Cd(x,T);case"github.com":return new yg(x,T);case"google.com":return new Fu(x,T);case"twitter.com":return new Hc(x,T,y.screenName||null);case"custom":case"anonymous":return new no(x,null);default:return new no(x,_,T)}}(p)}class ro{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new ro("enroll",h,p)}static _fromMfaPendingCredential(h){return new ro("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return ro._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return ro._fromIdtoken(h.multiFactorSession.idToken)}return null}}class io{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=hn(h),T=p.customData._serverResponse,x=(T.mfaInfo||[]).map(Z=>bu._fromServerResponse(_,Z));ne(T.mfaPendingCredential,_,"internal-error");const V=ro._fromMfaPendingCredential(T.mfaPendingCredential);return new io(V,x,function(){var Z=(0,f.Z)(function*(Te){const $e=yield Te._process(_,V);delete T.mfaInfo,delete T.mfaPendingCredential;const Je=Object.assign(Object.assign({},T),{idToken:$e.idToken,refreshToken:$e.refreshToken});switch(p.operationType){case"signIn":const tt=yield Sr._fromIdTokenResponse(_,p.operationType,Je);return yield _._updateCurrentUser(tt.user),tt;case"reauthenticate":return ne(p.user,_,"internal-error"),Sr._forOperation(p.user,p.operationType,Je);default:_e(_,"internal-error")}});return function(Te){return Z.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,f.Z)(function*(){return p.signInResolver(h)})()}}class ao{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>bu._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new ao(h)}getSession(){var h=this;return(0,f.Z)(function*(){return ro._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,f.Z)(function*(){const T=h,x=yield _.getSession(),V=yield rt(_.user,T._process(_.user.auth,x,p));return yield _.user._updateTokensIfNecessary(V),_.user.reload()})()}unenroll(h){var p=this;return(0,f.Z)(function*(){const _="string"==typeof h?h:h.uid,T=yield p.user.getIdToken();try{const x=yield rt(p.user,function Uu(y,h){return Ye(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(y,h))}(p.user.auth,{idToken:T,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:V})=>V!==_),yield p.user._updateTokensIfNecessary(x),yield p.user.reload()}catch(x){throw x}})()}}const Ps=new WeakMap,uo="__sak";class Bu{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(uo,"1"),this.storage.removeItem(uo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const co=(()=>{class y extends Bu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function La(){const y=(0,O.z$)();return Q(y)||an(y)}()&&function Da(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ki(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),x=this.localCache[_];T!==x&&p(_,x,T)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((Z,Te,$e)=>{this.notifyListeners(Z,$e)});const T=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Z=this.storage.getItem(T);if(p.newValue!==Z)null!==p.newValue?this.storage.setItem(T,p.newValue):this.storage.removeItem(T);else if(this.localCache[T]===p.newValue&&!_)return}const x=()=>{const Z=this.storage.getItem(T);!_&&this.localCache[T]===Z||this.notifyListeners(T,Z)},V=this.storage.getItem(T);!function Pi(){return(0,O.w1)()&&10===document.documentMode}()||V===p.newValue||p.newValue===p.oldValue?x():setTimeout(x,10)}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var T=()=>super._set,x=this;return(0,f.Z)(function*(){yield T().call(x,p,_),x.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,T=this;return(0,f.Z)(function*(){const x=yield _().call(T,p);return T.localCache[p]=JSON.stringify(x),x})()}_remove(p){var _=()=>super._remove,T=this;return(0,f.Z)(function*(){yield _().call(T,p),delete T.localCache[p]})()}}return y.type="LOCAL",y})(),gs=(()=>{class y extends Bu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let Qo=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(x=>x.isListeningto(p));if(_)return _;const T=new y(p);return this.receivers.push(T),T}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,f.Z)(function*(){const T=p,{eventId:x,eventType:V,data:Z}=T.data,Te=_.handlersMap[V];if(!Te?.size)return;T.ports[0].postMessage({status:"ack",eventId:x,eventType:V});const $e=Array.from(Te).map(function(){var tt=(0,f.Z)(function*(Sn){return Sn(T.origin,Z)});return function(Sn){return tt.apply(this,arguments)}}()),Je=yield function Wc(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}($e);T.ports[0].postMessage({status:"done",eventId:x,eventType:V,response:Je})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Jo(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class Ad{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var T=this;return(0,f.Z)(function*(){const x=typeof MessageChannel<"u"?new MessageChannel:null;if(!x)throw new Error("connection_unavailable");let V,Z;return new Promise((Te,$e)=>{const Je=Jo("",20);x.port1.start();const tt=setTimeout(()=>{$e(new Error("unsupported_event"))},_);Z={messageChannel:x,onMessage(Sn){const $s=Sn;if($s.data.eventId===Je)switch($s.data.status){case"ack":clearTimeout(tt),V=setTimeout(()=>{$e(new Error("timeout"))},3e3);break;case"done":clearTimeout(V),Te($s.data.response);break;default:clearTimeout(tt),clearTimeout(V),$e(new Error("invalid_response"))}}},T.handlers.add(Z),x.port1.addEventListener("message",Z.onMessage),T.target.postMessage({eventType:h,eventId:Je,data:p},[x.port2])}).finally(()=>{Z&&T.removeMessageHandler(Z)})})()}}function gn(){return window}function $u(){return typeof gn().WorkerGlobalScope<"u"&&"function"==typeof gn().importScripts}function Hu(){return(Hu=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const lo="firebaseLocalStorageDb",Un=1,Kc="firebaseLocalStorage",Va="fbase_key";class Ua{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ms(y,h){return y.transaction([Kc],h?"readwrite":"readonly").objectStore(Kc)}function zu(){const y=indexedDB.open(lo,Un);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Kc,{keyPath:Va})}catch(T){p(T)}}),y.addEventListener("success",(0,f.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Kc)?h(_):(_.close(),yield function Yh(){const y=indexedDB.deleteDatabase(lo);return new Ua(y).toPromise()}(),h(yield zu()))}))})}function ho(y,h,p){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,f.Z)(function*(y,h,p){const _=ms(y,!0).put({[Va]:h,value:p});return new Ua(_).toPromise()})).apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(y,h){const p=ms(y,!1).get(h),_=yield new Ua(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Os(y,h){const p=ms(y,!0).delete(h);return new Ua(p).toPromise()}const fo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,f.Z)(function*(){return p.db||(p.db=yield zu()),p.db})()}_withRetries(p){var _=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const x=yield _._openDb();return yield p(x)}catch(x){if(T++>3)throw x;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,f.Z)(function*(){return $u()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,f.Z)(function*(){p.receiver=Qo._getInstance(function tr(){return $u()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,f.Z)(function*(T,x){return{keyProcessed:(yield p._poll()).includes(x.key)}});return function(T,x){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,f.Z)(function*(T,x){return["keyChanged"]});return function(T,x){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,f.Z)(function*(){var _,T;if(p.activeServiceWorker=yield function Zc(){return Hu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Ad(p.activeServiceWorker);const x=yield p.sender._send("ping",{},800);x&&null!==(_=x[0])&&void 0!==_&&_.fulfilled&&null!==(T=x[0])&&void 0!==T&&T.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,f.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Gu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const p=yield zu();return yield ho(p,uo,"1"),yield Os(p,uo),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,f.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(x=>ho(x,p,_)),T.localCache[p]=_,T.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,f.Z)(function*(){const T=yield _._withRetries(x=>function Ba(y,h){return Xo.apply(this,arguments)}(x,p));return _.localCache[p]=T,T})()}_remove(p){var _=this;return(0,f.Z)(function*(){return _._withPendingWrite((0,f.Z)(function*(){return yield _._withRetries(T=>Os(T,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,f.Z)(function*(){const _=yield p._withRetries(V=>{const Z=ms(V,!1).getAll();return new Ua(Z).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const T=[],x=new Set;for(const{fbase_key:V,value:Z}of _)x.add(V),JSON.stringify(p.localCache[V])!==JSON.stringify(Z)&&(p.notifyListeners(V,Z),T.push(V));for(const V of Object.keys(p.localCache))p.localCache[V]&&!x.has(V)&&(p.notifyListeners(V,null),T.push(V));return T})()}notifyListeners(p,_){this.localCache[p]=_;const T=this.listeners[p];if(T)for(const x of Array.from(T))x(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),$a=1e12;class Qc{constructor(h){this.auth=h,this.counter=$a,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new Jc(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||$a;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||$a))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,f.Z)(function*(){var _;return null===(_=p._widgets.get(h||$a))||void 0===_||_.execute(),""})()}}class Jc{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ne(T,"argument-error",{appName:p}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Vy(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Xh=zn("rcb"),Uy=new be(3e4,6e4);class By{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=gn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return ne(function ef(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)&&Ht(gn().grecaptcha)?Promise.resolve(gn().grecaptcha):new Promise((_,T)=>{const x=gn().setTimeout(()=>{T(we(h,"network-request-failed"))},Uy.get());gn()[Xh]=()=>{gn().clearTimeout(x),delete gn()[Xh];const Z=gn().grecaptcha;if(!Z||!Ht(Z))return void T(we(h,"internal-error"));const Te=Z.render;Z.render=($e,Je)=>{const tt=Te($e,Je);return this.counter++,tt},this.hostLanguage=p,_(Z)},or(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:Xh,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(x),T(we(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=gn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class nr{load(h){return(0,f.Z)(function*(){return new Qc(h)})()}clearedOneInstance(){}}const Ha="recaptcha",qu={theme:"light",type:"image"};class Xc{constructor(h,p=Object.assign({},qu),_){this.parameters=p,this.type=Ha,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(_),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nr:new By,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(x=>{const V=Z=>{Z&&(h.tokenChangeListeners.delete(V),x(Z))};h.tokenChangeListeners.add(V),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=gn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){ne(ot()&&!$u(),h.auth,"internal-error"),yield function Fi(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function X(y){return Ae.apply(this,arguments)}(h.auth);ne(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xi{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=mi._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function mo(){return(mo=(0,f.Z)(function*(y,h,p){const _=hn(y),T=yield Ku(_,h,(0,O.m9)(p));return new Xi(T,x=>Ra(_,x))})).apply(this,arguments)}function Zu(){return(Zu=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);yield ds(!1,_,"phone");const T=yield Ku(_.auth,h,(0,O.m9)(p));return new Xi(T,x=>yd(_,x))})).apply(this,arguments)}function el(){return(el=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y),T=yield Ku(_.auth,h,(0,O.m9)(p));return new Xi(T,x=>vd(_,x))})).apply(this,arguments)}function Ku(y,h,p){return Wr.apply(this,arguments)}function Wr(){return Wr=(0,f.Z)(function*(y,h,p){var _;const T=yield p.verify();try{let x;if(ne("string"==typeof T,y,"argument-error"),ne(p.type===Ha,y,"argument-error"),x="string"==typeof h?{phoneNumber:h}:h,"session"in x){const V=x.session;if("phoneNumber"in x)return ne("enroll"===V.type,y,"internal-error"),(yield function Yo(y,h){return Ye(y,"POST","/v2/accounts/mfaEnrollment:start",Ot(y,h))}(y,{idToken:V.credential,phoneEnrollmentInfo:{phoneNumber:x.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===V.type,y,"internal-error");const Z=(null===(_=x.multiFactorHint)||void 0===_?void 0:_.uid)||x.multiFactorUid;return ne(Z,y,"missing-multi-factor-info"),(yield function po(y,h){return Ye(y,"POST","/v2/accounts/mfaSignIn:start",Ot(y,h))}(y,{mfaPendingCredential:V.credential,mfaEnrollmentId:Z,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:V}=yield function dg(y,h){return Lc.apply(this,arguments)}(y,{phoneNumber:x.phoneNumber,recaptchaToken:T});return V}}finally{p._reset()}}),Wr.apply(this,arguments)}function si(){return(si=(0,f.Z)(function*(y,h){yield Xn((0,O.m9)(y),h)})).apply(this,arguments)}let ut=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=hn(p)}verifyPhoneNumber(p,_){return Ku(this.auth,p,(0,O.m9)(_))}static credential(p,_){return mi._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:T}=p;return _&&T?mi._fromTokenResponse(_,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Mr(y,h){return h?En(h):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Tn extends os{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Oi(h,this._buildIdpRequest())}_linkToIdToken(h,p){return Oi(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return Oi(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function Rd(y){return xa(y.auth,new Tn(y),y.bypassAuthState)}function Ga(y){const{auth:h,user:p}=y;return ne(p,h,"internal-error"),Ns(p,new Tn(y),y.bypassAuthState)}function _i(y){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,f.Z)(function*(y){const{auth:h,user:p}=y;return ne(p,h,"internal-error"),Xn(p,new Tn(y),y.bypassAuthState)})).apply(this,arguments)}class tl{constructor(h,p,_,T,x=!1){this.auth=h,this.resolver=_,this.user=T,this.bypassAuthState=x,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,f.Z)(function*(_,T){h.pendingPromise={resolve:_,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(x){h.reject(x)}});return function(_,T){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,f.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:x,tenantId:V,error:Z,type:Te}=h;if(Z)return void p.reject(Z);const $e={auth:p.auth,requestUri:_,sessionId:T,tenantId:V||void 0,postBody:x||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Te)($e))}catch(Je){p.reject(Je)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Rd;case"linkViaPopup":case"linkViaRedirect":return _i;case"reauthViaPopup":case"reauthViaRedirect":return Ga;default:_e(this.auth,"internal-error")}}resolve(h){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wi=new be(2e3,1e4);function za(){return(za=(0,f.Z)(function*(y,h,p){const _=hn(y);Ne(y,h,cs);const T=Mr(_,p);return new Qu(_,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function ks(){return(ks=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,cs);const T=Mr(_.auth,p);return new Qu(_.auth,"reauthViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}function nl(){return(nl=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,cs);const T=Mr(_.auth,p);return new Qu(_.auth,"linkViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}let Qu=(()=>{class y extends tl{constructor(p,_,T,x,V){super(p,_,x,V),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,f.Z)(function*(){const _=yield p.execute();return ne(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,f.Z)(function*(){Xe(1===p.filter.length,"Popup operations only handle one event");const _=Jo();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(T=>{p.reject(T)}),p.resolver._isIframeWebStorageSupported(p.auth,T=>{T||p.reject(we(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(p,wi.get())};p()}}return y.currentPopupAction=null,y})();const Fs="pendingRedirect",Ls=new Map;class vr extends tl{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,f.Z)(function*(){let _=Ls.get(p.auth._key());if(!_){try{const x=(yield function rl(y,h){return il.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(x)}catch(T){_=()=>Promise.reject(T)}Ls.set(p.auth._key(),_)}return p.bypassAuthState||Ls.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const T=yield _.auth._redirectUserForId(h.eventId);if(T)return _.user=T,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function il(){return(il=(0,f.Z)(function*(y,h){const p=na(h),_=Xu(y);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(p));return yield _._remove(p),T})).apply(this,arguments)}function yo(y,h){return vo.apply(this,arguments)}function vo(){return(vo=(0,f.Z)(function*(y,h){return Xu(y)._set(na(h),"true")})).apply(this,arguments)}function Nd(y,h){Ls.set(y._key(),h)}function Xu(y){return En(y._redirectPersistence)}function na(y){return U(Fs,y.config.apiKey,y.name)}function Pd(y,h,p){return function rf(y,h,p){return Wa.apply(this,arguments)}(y,h,p)}function Wa(){return(Wa=(0,f.Z)(function*(y,h,p){const _=hn(y);Ne(y,h,cs),yield _._initializationPromise;const T=Mr(_,p);return yield yo(T,_),T._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function Za(y,h,p){return function Li(y,h,p){return Ka.apply(this,arguments)}(y,h,p)}function Ka(){return(Ka=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,cs),yield _.auth._initializationPromise;const T=Mr(_.auth,p);yield yo(T,_.auth);const x=yield Bn(_);return T._openRedirect(_.auth,h,"reauthViaRedirect",x)})).apply(this,arguments)}function xr(y,h,p){return function sl(y,h,p){return ol.apply(this,arguments)}(y,h,p)}function ol(){return(ol=(0,f.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,cs),yield _.auth._initializationPromise;const T=Mr(_.auth,p);yield ds(!1,_,h.providerId),yield yo(T,_.auth);const x=yield Bn(_);return T._openRedirect(_.auth,h,"linkViaRedirect",x)})).apply(this,arguments)}function _o(){return(_o=(0,f.Z)(function*(y,h){return yield hn(y)._initializationPromise,wo(y,h,!1)})).apply(this,arguments)}function wo(y,h){return oi.apply(this,arguments)}function oi(){return(oi=(0,f.Z)(function*(y,h,p=!1){const _=hn(y),T=Mr(_,h),V=yield new vr(_,T,p).execute();return V&&!p&&(delete V.user._redirectEventId,yield _._persistUserIfCurrent(V.user),yield _._setRedirectUser(null,h)),V})).apply(this,arguments)}function Bn(y){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,f.Z)(function*(y){const h=Jo(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class ra{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function lr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ys(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!ys(h)){const T=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(we(this.auth,T))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vi(h))}saveEventToCache(h){this.cachedEventUids.add(Vi(h)),this.lastProcessedEventTime=Date.now()}}function Vi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function ys({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function Io(y){return sf.apply(this,arguments)}function sf(){return(sf=(0,f.Z)(function*(y,h={}){return Ye(y,"GET","/v1/projects",h)})).apply(this,arguments)}const ec=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tc=/^https?/;function vs(){return(vs=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Io(y);for(const p of h)try{if(ul(p))return}catch{}_e(y,"unauthorized-domain")})).apply(this,arguments)}function ul(y){const h=zt(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const V=new URL(y);return""===V.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&V.hostname===_}if(!tc.test(p))return!1;if(ec.test(y))return _===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const rc=new be(3e4,6e4);function vt(){const y=gn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let ic=null;const af=new be(5e3,15e3),Od="__/auth/iframe",Bi="emulator/auth/iframe",kd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ld(y){const h=y.config;ne(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?ze(h,Bi):`https://${y.config.authDomain}/${Od}`,_={apiKey:h.apiKey,appName:y.name,v:re.SDK_VERSION},T=Fd.get(y.config.apiHost);T&&(_.eid=T);const x=y._getFrameworks();return x.length&&(_.fw=x.join(",")),`${p}?${(0,O.xO)(_).slice(1)}`}function D(){return D=(0,f.Z)(function*(y){const h=yield function Ei(y){return ic=ic||function Ui(y){return new Promise((h,p)=>{var _,T,x;function V(){vt(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{vt(),p(we(y,"network-request-failed"))},timeout:rc.get()})}if(null!==(T=null===(_=gn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(x=gn().gapi)||void 0===x||!x.load){const Z=zn("iframefcb");return gn()[Z]=()=>{gapi.load?V():p(we(y,"network-request-failed"))},or(`https://apis.google.com/js/api.js?onload=${Z}`).catch(Te=>p(Te))}V()}}).catch(h=>{throw ic=null,h})}(y),ic}(y),p=gn().gapi;return ne(p,y,"internal-error"),h.open({where:document.body,url:Ld(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kd,dontclear:!0},_=>new Promise(function(){var T=(0,f.Z)(function*(x,V){yield _.restyle({setHideOnLeave:!1});const Z=we(y,"network-request-failed"),Te=gn().setTimeout(()=>{V(Z)},af.get());function $e(){gn().clearTimeout(Te),x(_)}_.ping($e).then($e,()=>{V(Z)})});return function(x,V){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},P=500,$=600,W="_blank",te="http://localhost";class qe{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const xt="__/auth/handler",Rt="emulator/auth/handler",Rr=encodeURIComponent("fac");function mn(y,h,p,_,T,x){return kt.apply(this,arguments)}function kt(){return(kt=(0,f.Z)(function*(y,h,p,_,T,x){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const V={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:re.SDK_VERSION,eventId:T};if(h instanceof cs){h.setDefaultLanguage(y.languageCode),V.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(V.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Je,tt]of Object.entries(x||{}))V[Je]=tt}if(h instanceof Qi){const Je=h.getScopes().filter(tt=>""!==tt);Je.length>0&&(V.scopes=Je.join(","))}y.tenantId&&(V.tid=y.tenantId);const Z=V;for(const Je of Object.keys(Z))void 0===Z[Je]&&delete Z[Je];const Te=yield y._getAppCheckToken(),$e=Te?`#${Rr}=${encodeURIComponent(Te)}`:"";return`${function Vs({config:y}){return y.emulator?ze(y,Rt):`https://${y.authDomain}/${xt}`}(y)}?${(0,O.xO)(Z).slice(1)}${$e}`})).apply(this,arguments)}const Do="webStorageSupport",ji=class dr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gs,this._completeRedirectFn=wo,this._overrideRedirectResult=Nd}_openPopup(h,p,_,T){var x=this;return(0,f.Z)(function*(){var V;Xe(null===(V=x.eventManagers[h._key()])||void 0===V?void 0:V.manager,"_initialize() not called before _openPopup()");const Z=yield mn(h,p,_,zt(),T);return function je(y,h,p,_=P,T=$){const x=Math.max((window.screen.availHeight-T)/2,0).toString(),V=Math.max((window.screen.availWidth-_)/2,0).toString();let Z="";const Te=Object.assign(Object.assign({},A),{width:_.toString(),height:T.toString(),top:x,left:V}),$e=(0,O.z$)().toLowerCase();p&&(Z=Oe($e)?W:p),ge($e)&&(h=h||te,Te.scrollbars="yes");const Je=Object.entries(Te).reduce((Sn,[$s,Il])=>`${Sn}${$s}=${Il},`,"");if(function Tr(y=(0,O.z$)()){var h;return an(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}($e)&&"_self"!==Z)return function st(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",Z),new qe(null);const tt=window.open(h||"",Z,Je);ne(tt,y,"popup-blocked");try{tt.focus()}catch{}return new qe(tt)}(h,Z,Jo())})()}_openRedirect(h,p,_,T){var x=this;return(0,f.Z)(function*(){return yield x._originValidation(h),function Md(y){gn().location.href=y}(yield mn(h,p,_,zt(),T)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:T,promise:x}=this.eventManagers[p];return T?Promise.resolve(T):(Xe(x,"If manager is not set, promise should be"),x)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,f.Z)(function*(){const _=yield function E(y){return D.apply(this,arguments)}(h),T=new ra(h);return _.register("authEvent",x=>(ne(x?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(x.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:T},p.iframes[h._key()]=_,T})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Do,{type:Do},T=>{var x;const V=null===(x=T?.[0])||void 0===x?void 0:x[Do];void 0!==V&&p(!!V),_e(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function nc(y){return vs.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ki()||Q()||an()}};class Us{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return Tt("unexpected MultiFactorSessionType")}}}class cl extends Us{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new cl(h)}_finalizeEnroll(h,p,_){return function qc(y,h){return Ye(y,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Jh(y,h){return Ye(y,"POST","/v2/accounts/mfaSignIn:finalize",Ot(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ll=(()=>{class y{constructor(){}static assertion(p){return cl._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var cf="@firebase/auth";class sc{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,f.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qa(){return window}(0,O.Pz)("authIdTokenMaxAge"),function wg(y){(0,re._registerComponent)(new pe.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),x=h.getProvider("app-check-internal"),{apiKey:V,authDomain:Z}=_.options;ne(V&&!V.includes(":"),"invalid-api-key",{appName:_.name});const Te={apiKey:V,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ae(y)},$e=new pi(_,T,x,Te);return function Pn(y,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(En);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}($e,p),$e},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,re._registerComponent)(new pe.wA("auth-internal",h=>{const p=hn(h.getProvider("auth").getImmediate());return new sc(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,re.registerVersion)(cf,"0.23.2",function lf(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,re.registerVersion)(cf,"0.23.2","esm2017")}("Browser");const $y=2e3;function hl(){return hl=(0,f.Z)(function*(y,h,p){var _;const{BuildInfo:T}=Qa();Xe(h.sessionId,"AuthEvent did not contain a session ID");const x=yield function sa(y){return fl.apply(this,arguments)}(h.sessionId),V={};return an()?V.ibi=T.packageName:Qt()?V.apn=T.packageName:_e(y,"operation-not-supported-in-this-environment"),T.displayName&&(V.appDisplayName=T.displayName),V.sessionId=x,mn(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,V)}),hl.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(y){const{BuildInfo:h}=Qa(),p={};an()?p.iosBundleId=h.packageName:Qt()?p.androidPackageName=h.packageName:_e(y,"operation-not-supported-in-this-environment"),yield Io(y,p)})).apply(this,arguments)}function oc(){return(oc=(0,f.Z)(function*(y,h,p){const{cordova:_}=Qa();let T=()=>{};try{yield new Promise((x,V)=>{let Z=null;function Te(){var tt;x();const Sn=null===(tt=_.plugins.browsertab)||void 0===tt?void 0:tt.close;"function"==typeof Sn&&Sn(),"function"==typeof p?.close&&p.close()}function $e(){Z||(Z=window.setTimeout(()=>{V(we(y,"redirect-cancelled-by-user"))},$y))}function Je(){"visible"===document?.visibilityState&&$e()}h.addPassiveListener(Te),document.addEventListener("resume",$e,!1),Qt()&&document.addEventListener("visibilitychange",Je,!1),T=()=>{h.removePassiveListener(Te),document.removeEventListener("resume",$e,!1),document.removeEventListener("visibilitychange",Je,!1),Z&&window.clearTimeout(Z)}})}finally{T()}})).apply(this,arguments)}function fl(){return(fl=(0,f.Z)(function*(y){const h=function Dg(y){if(Xe(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const pl=20;class Bd extends ra{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function jd(y){return gl.apply(this,arguments)}function gl(){return(gl=(0,f.Z)(function*(y){const h=yield $d()._get(eu(y));return h&&(yield $d()._remove(eu(y))),h})).apply(this,arguments)}function hf(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<pl;p++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function $d(){return En(co)}function eu(y){return U("authEvent",y.config.apiKey,y.name)}function _s(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}const yl=class ml{constructor(){this._redirectPersistence=gs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wo,this._overrideRedirectResult=Nd}_initialize(h){var p=this;return(0,f.Z)(function*(){const _=h._key();let T=p.eventManagers.get(_);return T||(T=new Bd(h),p.eventManagers.set(_,T),p.attachCallbackListeners(h,T)),T})()}_openPopup(h){_e(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,T){var x=this;return(0,f.Z)(function*(){!function Gy(y){var h,p,_,T,x,V,Z,Te,$e,Je;const tt=Qa();ne("function"==typeof(null===(h=tt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(typeof(null===(p=tt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(x=null===(T=null===(_=tt?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===x?void 0:x.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Te=null===(Z=null===(V=tt?.cordova)||void 0===V?void 0:V.plugins)||void 0===Z?void 0:Z.browsertab)||void 0===Te?void 0:Te.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Je=null===($e=tt?.cordova)||void 0===$e?void 0:$e.InAppBrowser)||void 0===Je?void 0:Je.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const V=yield x._initialize(h);yield V.initialized(),V.resetRedirect(),function Ju(){Ls.clear()}(),yield x._originValidation(h);const Z=function To(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:hf(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(h,_,T);yield function Cg(y,h){return $d()._set(eu(y),h)}(h,Z);const Te=yield function Ig(y,h,p){return hl.apply(this,arguments)}(h,Z,p),$e=yield function Hy(y){const{cordova:h}=Qa();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let T=null;_?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function qt(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(T)})})}(Te);return function Ja(y,h,p){return oc.apply(this,arguments)}(h,V,$e)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Ud(y){return ia.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:T,BuildInfo:x}=Qa(),V=setTimeout((0,f.Z)(function*(){yield jd(h),p.onEvent(pf())}),500),Z=function(){var Je=(0,f.Z)(function*(tt){clearTimeout(V);const Sn=yield jd(h);let $s=null;Sn&&tt?.url&&($s=function Xa(y,h){var p,_;const T=function Gd(y){const h=_s(y),p=h.link?decodeURIComponent(h.link):void 0,_=_s(p).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return _s(T).link||T||_||p||y}(h);if(T.includes("/__/auth/callback")){const x=_s(T),V=x.firebaseError?function Hd(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(x.firebaseError)):null,Z=null===(_=null===(p=V?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Te=Z?we(Z):null;return Te?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Te,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Sn,tt.url)),p.onEvent($s||pf())});return function(Sn){return Je.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,Z);const Te=T,$e=`${x.packageName.toLowerCase()}://`;Qa().handleOpenURL=function(){var Je=(0,f.Z)(function*(tt){if(tt.toLowerCase().startsWith($e)&&Z({url:tt}),"function"==typeof Te)try{Te(tt)}catch(Sn){console.error(Sn)}});return function(tt){return Je.apply(this,arguments)}}()}};function pf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}const mf=1e3;function es(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function oa(y=(0,O.z$)()){return!("file:"!==es()&&"ionic:"!==es()&&"capacitor:"!==es()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Wy(){try{const y=self.localStorage,h=Jo();if(y)return y.setItem(h,"1"),y.removeItem(h),!function qy(y=(0,O.z$)()){return function ac(){return(0,O.w1)()&&11===document?.documentMode}()||function zy(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return yf()&&(0,O.hl)()}return!1}function yf(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function El(){return(function _l(){return"http:"===es()||"https:"===es()}()||(0,O.ru)()||oa())&&!function wl(){return(0,O.b$)()||(0,O.UG)()}()&&Wy()&&!yf()}function bg(){return oa()&&typeof document<"u"}function uc(){return(uc=(0,f.Z)(function*(){return!!bg()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},mf);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Ii={LOCAL:"local",NONE:"none",SESSION:"session"},tu=ne,_f="persistence";function wf(y){return Ef.apply(this,arguments)}function Ef(){return(Ef=(0,f.Z)(function*(y){yield y._initializationPromise;const h=If(),p=U(_f,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function If(){var y;try{return(null===(y=function vf(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Df=ne;class Nr{constructor(){this.browserResolver=En(ji),this.cordovaResolver=En(yl),this.underlyingResolver=null,this._redirectPersistence=gs,this._completeRedirectFn=wo,this._overrideRedirectResult=Nd}_initialize(h){var p=this;return(0,f.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,T){var x=this;return(0,f.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openPopup(h,p,_,T)})()}_openRedirect(h,p,_,T){var x=this;return(0,f.Z)(function*(){return yield x.selectUnderlyingResolver(),x.assertedUnderlyingResolver._openRedirect(h,p,_,T)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return bg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Df(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Tg(){return uc.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Di(y){return y.unwrap()}function Ky(y){return Qy(y)}function Qy(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ut.credentialFromResult(y);const p=h.providerId;if(!p||p===ce.PASSWORD)return null;let _;switch(p){case ce.GOOGLE:_=Aa;break;case ce.FACEBOOK:_=Vc;break;case ce.GITHUB:_=fd;break;case ce.TWITTER:_=Eu;break;default:const{oauthIdToken:T,oauthAccessToken:x,oauthTokenSecret:V,pendingToken:Z,nonce:Te}=h;return x||V||T||Z?Z?p.startsWith("saml.")?xs._create(p,Z):us._fromParams({providerId:p,signInMethod:p,pendingToken:Z,idToken:T,accessToken:x}):new Xs(p).credential({idToken:T,accessToken:x,rawNonce:Te}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function hr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Yy(y,h){var p;const _=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new qd(y,function Vu(y,h){var p;const _=(0,O.m9)(y),T=h;return ne(h.customData.operationType,_,"argument-error"),ne(null===(p=T.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),io._fromError(_,T)}(y,h));else if(_){const T=Qy(h),x=h;T&&(x.credential=T,x.tenantId=_.tenantId||void 0,x.email=_.email||void 0,x.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const T=p.user;return{operationType:p.operationType,credential:Ky(p),additionalUserInfo:Gc(p),user:js.getOrCreate(T)}})}function Cf(y,h){return zd.apply(this,arguments)}function zd(){return(zd=(0,f.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>hr(y,p.confirm(_))}})).apply(this,arguments)}class qd{constructor(h,p){this.resolver=p,this.auth=function cc(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return hr(Di(this.auth),this.resolver.resolveSignIn(h))}}class js{constructor(h){this._delegate=h,this.multiFactor=function Td(y){const h=(0,O.m9)(y);return Ps.has(h)||Ps.set(h,ao._fromUser(h)),Ps.get(h)}(h)}static getOrCreate(h){return js.USER_MAP.has(h)||js.USER_MAP.set(h,new js(h)),js.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,f.Z)(function*(){return hr(p.auth,yd(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,f.Z)(function*(){return Cf(_.auth,function Wu(y,h,p){return Zu.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,f.Z)(function*(){return hr(p.auth,function _t(y,h,p){return nl.apply(this,arguments)}(p._delegate,h,Nr))})()}linkWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield wf(hn(p.auth)),xr(p._delegate,h,Nr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,f.Z)(function*(){return hr(p.auth,vd(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Cf(this.auth,function nf(y,h,p){return el.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return hr(this.auth,function qa(y,h,p){return ks.apply(this,arguments)}(this._delegate,h,Nr))}reauthenticateWithRedirect(h){var p=this;return(0,f.Z)(function*(){return yield wf(hn(p.auth)),Za(p._delegate,h,Nr)})()}sendEmailVerification(h){return function Nu(y,h){return Oa.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,f.Z)(function*(){return yield function gd(y,h){return Ar.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function yr(y,h){return bn((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function fs(y,h){return bn((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function un(y,h){return si.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function zh(y,h){return Ou.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function $c(y,h,p){return ka.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}js.USER_MAP=new WeakMap;const nu=ne;let bf=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=p.options;nu(T,"invalid-api-key",{appName:p.name}),nu(T,"invalid-api-key",{appName:p.name});const x=typeof window<"u"?Nr:void 0;this._delegate=_.initialize({options:{persistence:ws(T,p.name),popupRedirectResolver:x}}),this._delegate._updateErrorMap(Ze),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function Ca(y,h,p){const _=hn(y);ne(_._canInitEmulator,_,"emulator-config-failed"),ne(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const T=!!p?.disableWarnings,x=ss(h),{host:V,port:Z}=function $t(y){const h=ss(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(_);if(T){const x=T[1];return{host:x,port:ba(_.substr(x.length+1))}}{const[x,V]=_.split(":");return{host:x,port:ba(V)}}}(h);_.config.emulator={url:`${x}//${V}${null===Z?"":`:${Z}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:V,port:Z,protocol:x.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ys(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function gg(y,h){return hs.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Na(this._delegate,p)}confirmPasswordReset(p,_){return function wd(y,h,p){return Au.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var T=this;return(0,f.Z)(function*(){return hr(T._delegate,function to(y,h,p){return vi.apply(this,arguments)}(T._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Id(y,h){return Ru.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function mg(y,h){return"EMAIL_SIGNIN"===Go.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,f.Z)(function*(){nu(El(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function Kn(y,h){return _o.apply(this,arguments)}(p._delegate,Nr);return _?hr(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function gf(y,h){hn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,T){const{next:x,error:V,complete:Z}=lc(p,_,T);return this._delegate.onAuthStateChanged(x,V,Z)}onIdTokenChanged(p,_,T){const{next:x,error:V,complete:Z}=lc(p,_,T);return this._delegate.onIdTokenChanged(x,V,Z)}sendSignInLinkToEmail(p,_){return function Pa(y,h,p){return Mu.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function Su(y,h,p){return qr.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,f.Z)(function*(){let T;switch(function Sg(y,h){tu(Object.values(Ii).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?tu(h!==Ii.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?tu(h===Ii.NONE,y,"unsupported-persistence-type"):yf()?tu(h===Ii.NONE||h===Ii.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):tu(h===Ii.NONE||Wy(),y,"unsupported-persistence-type")}(_._delegate,p),p){case Ii.SESSION:T=gs;break;case Ii.LOCAL:T=(yield En(fo)._isAvailable())?fo:co;break;case Ii.NONE:T=Gr;break;default:return _e("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return hr(this._delegate,function ur(y){return zo.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return hr(this._delegate,Ra(this._delegate,p))}signInWithCustomToken(p){return hr(this._delegate,function ue(y,h){return Vt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return hr(this._delegate,function Ed(y,h,p){return Ra((0,O.m9)(y),Hh.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return hr(this._delegate,function Zn(y,h,p){return Wo.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return Cf(this._delegate,function tf(y,h,p){return mo.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,f.Z)(function*(){return nu(El(),_._delegate,"operation-not-supported-in-this-environment"),hr(_._delegate,function ta(y,h,p){return za.apply(this,arguments)}(_._delegate,p,Nr))})()}signInWithRedirect(p){var _=this;return(0,f.Z)(function*(){return nu(El(),_._delegate,"operation-not-supported-in-this-environment"),yield wf(_._delegate),Pd(_._delegate,p,Nr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function yi(y,h){return Ji.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Ii,y})();function lc(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const T=_;return{next:V=>T(V&&js.getOrCreate(V)),error:h,complete:p}}function ws(y,h){const p=function Zy(y,h){const p=If();if(!p)return[];const _=U(_f,y,h);switch(p.getItem(_)){case Ii.NONE:return[Gr];case Ii.LOCAL:return[fo,gs];case Ii.SESSION:return[gs];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(fo)&&p.push(fo),typeof window<"u")for(const _ of[co,gs])p.includes(_)||p.push(_);return p.includes(Gr)||p.push(Gr),p}class ru{constructor(){this.providerId="phone",this._delegate=new ut(Di(Y.Z.auth()))}static credential(h,p){return ut.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}ru.PHONE_SIGN_IN_METHOD=ut.PHONE_SIGN_IN_METHOD,ru.PROVIDER_ID=ut.PROVIDER_ID;const dc=ne;class Ag{constructor(h,p,_=Y.Z.app()){var T;dc(null===(T=_.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new Xc(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function xg(y){y.INTERNAL.registerComponent(new pe.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new bf(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:q_EMAIL_SIGNIN,PASSWORD_RESET:q_PASSWORD_RESET,RECOVER_EMAIL:q_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:q_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:q_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:q_VERIFY_EMAIL}},EmailAuthProvider:Hh,FacebookAuthProvider:Vc,GithubAuthProvider:fd,GoogleAuthProvider:Aa,OAuthProvider:Xs,SAMLAuthProvider:wu,PhoneAuthProvider:ru,PhoneMultiFactorGenerator:ll,RecaptchaVerifier:Ag,TwitterAuthProvider:Eu,Auth:bf,AuthCredential:os,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(Y.Z)},5861:(mt,Ce,k)=>{function f(O,re,ie,se,pe,ve,ce){try{var j=O[ve](ce),B=j.value}catch(q){return void ie(q)}j.done?re(B):Promise.resolve(B).then(se,pe)}function Y(O){return function(){var re=this,ie=arguments;return new Promise(function(se,pe){var ve=O.apply(re,ie);function ce(B){f(ve,se,pe,ce,j,"next",B)}function j(B){f(ve,se,pe,ce,j,"throw",B)}ce(void 0)})}}k.d(Ce,{Z:()=>Y})}},mt=>{mt(mt.s=7780)}]);